import{g as u,b as h,i as y,t as g,d as T,r as x,u as Z}from"./web-DpIebe6J.js";import{k as p,n as V,t as G,p as R,a as P,o as N,S as D,d as Y,q as J}from"./solid-DuWri35y.js";import{Application as q}from"./runtime-DddzEQ-t.js";import{s as X}from"./index-2EPzZQ-a.js";import{u as Q}from"./routing-CrKy3yVb.js";import"./preload-helper-CM3UJVvY.js";import"./index-BbP3371Q.js";import"./index-BAMY2Nnw.js";import"./index-CgqXENQe.js";import"./exchangeRates-BrUJ_eQB.js";import"./Card.module-nMwE8ysR.js";import"./components-BSHtZ-Zq.js";import"./server-runtime-G1njbCYf.js";import"./auth.server-BY2lFEoQ.js";var W=g("<div>Loading..."),ee=g("<div><strong>Errore Caricamento Spline</strong><pre>"),te=g("<canvas>"),re=g('<img class="absolute ml-[20.7vw] -mt-[6vw] w-23"src=/icons/edit.png>'),ne=g("<div class=landing-container><div class=spline-wrapper><!$><!/><!$><!/><!$><!/><!$><!/>");function ve(t){let i;const[k,E]=p(!1),z=()=>{switch(console.log(`[Card3D ${t.id}] Calcolo URL per colore: ${t.color}`),t.color){case"purple":return"https://prod.spline.design/j0mVtZ9nPBu6RBRy/scene.splinecode";default:return"https://prod.spline.design/mzKeaOgjz2ILR0uC/scene.splinecode"}};V(()=>{i?(console.log(`[Card3D ${t.id}] Canvas ref pronto.`),E(!0)):console.error(`[Card3D ${t.id}] Errore: Canvas ref non trovato in onMount!`),N(()=>{console.log(`[Card3D ${t.id}] Cleanup: reset isCanvasReady.`),E(!1)})});const[s]=G(()=>k()?z():null,async n=>{if(!i)throw console.error(`[Card3D ${t.id}] Fetcher: CanvasRef è nullo! Impossibile caricare.`),new Error("Canvas element reference is missing.");console.log(`[Card3D ${t.id}] createResource Fetcher: Inizio caricamento da ${n}`);const r=new q(i);try{return await r.load(n),console.log(`[Card3D ${t.id}] createResource Fetcher: Spline caricata con successo.`),r}catch(o){throw console.error(`[Card3D ${t.id}] createResource Fetcher: Errore durante app.load():`,o),o}});R(n=>{const r=s();return n&&n!==r&&(console.log(`[Card3D ${t.id}] createEffect[cleanup]: Dispose istanza Spline precedente.`),n.dispose()),r},void 0),N(()=>{const n=s.latest;n?(console.log(`[Card3D ${t.id}] onCleanup: Dispose istanza Spline finale.`),n.dispose()):console.log(`[Card3D ${t.id}] onCleanup: Nessuna istanza Spline da pulire.`)}),R(()=>{const n=s();if(!n||s.loading||s.error)return;console.log(`[Card3D ${t.id}] Effetto Variabili: Esecuzione...`);const r="Group 2",o={x:1.2,y:1.2,z:1.2},c="wallet_name",m=t.name,f="balance",v=a=>{switch(a){case"EUR":return"€";case"USD":return"$";case"GBP":return"£";case"CHF":return"CHF";case"CAD":return"C$";case"AUD":return"A$";case"JPY":return"¥";case"CNY":return"¥";case"INR":return"₹";case"BRL":return"R$";case"MXN":return"$";case"NZD":return"$";case"SGD":return"$";case"HKD":return"$";case"SEK":return"kr";case"NOK":return"kr";case"DKK":return"kr";case"PLN":return"zł";case"CZK":return"Kč";case"HUF":return"Ft";case"RUB":return"₽";case"TRY":return"₺";case"ZAR":return"R";case"AED":return"د. إ";default:return a}},C=`${t.balance} ${v(t.currency)}`;console.log(`[Card3D ${t.id}] -> Aggiorno: ${c}=${m}, ${f}=${C}`);try{n.setVariable(c,m),n.setVariable(f,C);const a=n.findObjectByName(r);a?typeof a?.scale?.x=="number"?Object.assign(a.scale,o):console.warn(`[Card3D ${t.id}] -> ATTENZIONE: 'scale' non trovato su '${r}'.`):console.warn(`[Card3D ${t.id}] -> ATTENZIONE: Oggetto '${r}' non trovato.`)}catch(a){console.error(`[Card3D ${t.id}] -> ERRORE durante interazione Spline:`,a)}});const O=Q(),[I,L]=p(!0),[_,w]=p(!1),[M,F]=p(0),A=300;function b(n){const r=typeof t<"u"?t.id:"Elemento";if(console.log(`[${r}] handleInteraction - Event: ${n}, Current open state: ${I()}`),n==="down")w(!0),F(Date.now());else if(n==="up")if(_()){const o=Date.now()-M();console.log(`[${r}] Mouse up after ${o}ms`),o<A?(console.log(`[${r}] Click detected! Setting open to false.`),O(t.href),L(!1)):console.log(`[${r}] Mouse up, but duration (${o}ms) exceeds threshold for click.`),w(!1)}else console.log(`[${r}] Mouse up without a valid preceding mousedown on this element.`);else n==="leave"&&_()&&(console.log(`[${r}] Mouse left while down. Invalidating potential click.`),w(!1))}const[K,$]=p(!1);return(()=>{var n=u(ne),r=n.firstChild,o=r.firstChild,[c,m]=h(o.nextSibling),f=c.nextSibling,[v,C]=h(f.nextSibling),a=v.nextSibling,[S,j]=h(a.nextSibling),H=S.nextSibling,[U,B]=h(H.nextSibling);return r.style.setProperty("width","80%"),r.style.setProperty("height","500px"),r.style.setProperty("position","relative"),y(r,P(D,{get when(){return s.loading},get children(){var e=u(W);return e.style.setProperty("width","90%"),e.style.setProperty("height","45%"),e.style.setProperty("inset","0"),e.style.setProperty("margin-top","130px"),e.style.setProperty("background","rgba(0, 0, 0, 0.6)"),e.style.setProperty("display","flex"),e.style.setProperty("justify-content","center"),e.style.setProperty("align-items","center"),e.style.setProperty("border-radius","8px"),e.style.setProperty("z-index","10"),e.style.setProperty("color","white"),e.style.setProperty("font-size","1.1em"),e}}),c,m),y(r,P(D,{get when(){return s.error&&!s.loading},get children(){var e=u(ee),d=e.firstChild,l=d.nextSibling;return e.style.setProperty("position","absolute"),e.style.setProperty("inset","0"),e.style.setProperty("background","rgba(255, 200, 200, 0.9)"),e.style.setProperty("color","darkred"),e.style.setProperty("display","flex"),e.style.setProperty("flex-direction","column"),e.style.setProperty("justify-content","center"),e.style.setProperty("align-items","center"),e.style.setProperty("padding","15px"),e.style.setProperty("border-radius","8px"),e.style.setProperty("z-index","10"),e.style.setProperty("text-align","center"),e.style.setProperty("font-size","0.9em"),l.style.setProperty("margin-top","8px"),l.style.setProperty("white-space","pre-wrap"),l.style.setProperty("max-height","100px"),l.style.setProperty("overflow","auto"),y(l,()=>s.error?.message||JSON.stringify(s.error)),e}}),v,C),y(r,P(J,{get fallback(){return[]},get children(){var e=u(te),d=i;return typeof d=="function"?Z(d,e):i=e,e.addEventListener("mouseleave",()=>b("leave")),e.$$mouseup=()=>b("up"),e.$$mousedown=()=>b("down"),e.addEventListener("mouseleave",()=>$(!1)),e.addEventListener("mouseenter",()=>$(!0)),e.style.setProperty("width","100%"),e.style.setProperty("height","100%"),e.style.setProperty("display","block"),e.style.setProperty("outline","none"),e.style.setProperty("background-color","transparent"),e.style.setProperty("transition","opacity 0.4s ease-in-out"),Y(l=>(l=s.loading||s.error?.3:1)!=null?e.style.setProperty("opacity",l):e.style.removeProperty("opacity")),x(),e}}),S,j),y(r,P(D,{get when(){return K()},get children(){var e=u(re);return e.addEventListener("mouseleave",()=>$(!1)),e.addEventListener("mouseenter",()=>$(!0)),e.$$click=d=>{X(t.id)},x(),e}}),U,B),n})()}T(["mousedown","mouseup","click"]);export{ve as default};
