import{createComponent as t,ssr as g,ssrHydrationKey as p,escape as a}from"solid-js/web";import{createSignal as m,onMount as W,createResource as h,Switch as u,Match as c,For as y}from"solid-js";import{E as v}from"./assets/Title-C8lsFfVd.js";import{g as S}from"./assets/getWallets.server-C5R6kBVO.js";import{g as f}from"./assets/auth.server-ChqlnWrh.js";import{W as T,S as $}from"./assets/index-0U8vmGbf.js";import{e as s,C as b}from"./assets/index-D0aODT57.js";import{c as R}from"./assets/exchangeRates-BGrzYQig.js";import"./assets/server-fns-runtime-C3tiYEg6.js";import"solid-js/web/storage";import"./assets/fetchEvent-9EzSf9d7.js";import"h3";import"vite-plugin-node-polyfills/shims/global";import"node:async_hooks";import"./assets/db.server-CDeyn5Z_.js";import"vite-plugin-node-polyfills/shims/process";import"pg";import"./assets/prova-B1NEQR2_.js";import"./assets/components-DHKGOKg1.js";import"./assets/routing-BRXp7sqN.js";import"./assets/Inputs-D1T1pLkj.js";import"solid-js/store";import"gsap";import"./assets/action-BR9kmesq.js";import"./assets/deleteWallet-Cgff9KFR.js";import"./assets/ButtonSparkle-BxHzGCPC.js";/* empty css                     */import"./assets/Card.module-nMwE8ysR.js";var U=["<p",' class="CM mt-100">',"</p>"],x=["<div",' class="','"><!--$-->',"<!--/--><!--$-->","<!--/--></div>"];const[ur,C]=m(null),[sr,mr]=m(null);function lr(){const[_,I]=m(null);W(async()=>{const r=await f();I(r)});const[i,{mutate:D,refetch:F}]=h(()=>({user:_(),editState:s()}),async r=>S(r.user));function E(r){const n=[];return i()?.filter(e=>e.container_id==r&&e.type=="wallet").forEach(e=>{n.push({color:e.color,wallet:e.wallet_name,balance:e.balance,currency:e.currency,position:n.length,id:e.id})}),n}const l="EUR",[d]=h(()=>({containerId:null,targetCurrency:l}),async r=>{const{containerId:n,targetCurrency:e}=r;try{const o=await f();if(o===null)throw new Error("Utente non autenticato per calcolo totale.");return await R(n,e,o)}catch(o){throw console.error(`[ConvertedTotalResource] Error fetching/calculating total for container ${n}:`,o),o}});return[t(v,{title:"Wallets"}),g(U,p(),a((d()?.total_balance??0).toLocaleString("it-IT",{style:"currency",currency:d()?.currency_code??l,minimumFractionDigits:2,maximumFractionDigits:2}))),t(u,{get children(){return[t(c,{get when(){return i()&&s()==null},get children(){return g(x,p(),"ml-[13vw] mt-[20vw] grid grid-cols-3 gap-x-0 gap-y-300",a(t(y,{get each(){return i()},children:(r,n)=>t(u,{get children(){return t(c,{get when(){return r.type=="container"&&r.container_id==null},get children(){return t(b,{get data(){return E(r.id)},get id(){return r.id},get name(){return r.wallet_name},get currency(){return r.currency},get href(){return`/wallets/${r.id}`},onclick:()=>{C(r.id)}})}})}})})),a(t(y,{get each(){return i()},children:(r,n)=>t(u,{get children(){return t(c,{get when(){return r.type=="wallet"&&r.container_id==null},get children(){return t(T,{get balance(){return r.balance},get name(){return r.wallet_name},get nation(){return r.nation},get currency(){return r.currency},get category(){return r.category_id},get color(){return r.color},get href(){return`/wallets/${r.id}`},onClick:()=>C(r.id),get id(){return r.id}})}})}})})))}}),t(c,{get when(){return s()},get children(){return t($,{})}})]}})]}export{lr as default,C as setWalletId,mr as setWalletName,sr as walletName,ur as walletid};
