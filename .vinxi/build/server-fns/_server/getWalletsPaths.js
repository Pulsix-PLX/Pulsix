import{c as p}from"./assets/server-fns-runtime-DEO2-sKc.js";import{g as d}from"./assets/auth.server-QlO-zn0G.js";import{g as m}from"./assets/getWallets.server-DFLq-knu.js";import{j as r}from"./assets/response-CbUr9JDj.js";import"solid-js/web";import"solid-js/web/storage";import"./assets/fetchEvent-BW7O4Ysp.js";import"h3";import"vite-plugin-node-polyfills/shims/global";import"node:async_hooks";import"vite-plugin-node-polyfills/shims/process";import"./assets/db.server-CDeyn5Z_.js";import"pg";const u=p(async function(f){try{const e=await d();if(e==null)return r({success:!1,message:"Utente non autenticato."},{status:401});const a=await m(e);if(!a||!Array.isArray(a))return console.warn(`[API Endpoint] Nessun dato wallet trovato o formato non valido per user id: ${e}.`),r({success:!0,wallets:[]},{status:200});const n=new Map,i=[];a.forEach(t=>{if(!t||typeof t!="object"||t.id===void 0||t.id===null||!t.wallet_name||typeof t.wallet_name!="string"){console.warn("[API Endpoint] Elemento wallet non valido o incompleto, saltato:",t);return}let o;if(t.container_id===null||t.container_id===void 0)o=t.wallet_name;else{const l=n.get(t.container_id);l?o=`${l.path}/${t.wallet_name}`:(console.warn(`[API Endpoint] Genitore con id '${t.container_id}' non trovato per '${t.wallet_name}' (id: ${t.id}). SarÃ  trattato come orfano.`),o=`__ORPHANED__/${t.wallet_name}`)}const s={id:t.id,wallet:t.wallet_name,path:o,type:t.type,container_id:t.container_id};i.push(s),n.set(s.id,s)});const c=i.filter(t=>t.type!=="container").sort((t,o)=>t.path.localeCompare(o.path)).map(t=>({id:t.id,path:t.path}));return r({success:!0,wallets:c},{status:200})}catch(e){return console.error("[API Endpoint: POST /tuo/percorso] Errore durante elaborazione:",e),r({success:!1,message:"Errore interno del server durante l'elaborazione dei wallet."},{status:500})}},"src_routes_API_lib_getWalletsPaths_ts--POST_1","C:/Users/Matteo/Desktop/Pulsix/src/routes/API/lib/getWalletsPaths.ts?pick=POST&tsr-directive-use-server="),W=u;export{W as POST};
