const a={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return de(this.context.count)},getNextContextId(){return de(this.context.count++)}};function de(e){const t=String(e),r=t.length-1;return a.context.id+(r?String.fromCharCode(96+r):"")+t}function F(e){a.context=e}function Ve(){return{...a.context,id:a.getNextContextId(),count:0}}const be=!1,Te=(e,t)=>e===t,Y=Symbol("solid-proxy"),ye=typeof Proxy=="function",xe=Symbol("solid-track"),G={equals:Te};let K=null,Se=Ce;const N=1,z=2,me={owned:null,cleanups:null,context:null,owner:null},se={};var d=null;let o=null,Ne=null,p=null,E=null,v=null,ee=0;function _(e,t){const r=p,n=d,i=e.length===0,s=t===void 0?n:t,u=i?me:{owned:null,cleanups:null,context:s?s.context:null,owner:s},l=i?e:()=>e(()=>A(()=>$(u)));d=u,p=null;try{return I(l,!0)}finally{p=r,d=n}}function L(e,t){t=t?Object.assign({},G,t):G;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=i=>(typeof i=="function"&&(o&&o.running&&o.sources.has(r)?i=i(r.tValue):i=i(r.value)),Ae(r,i));return[Oe.bind(r),n]}function he(e,t,r){const n=B(e,t,!0,N);H(n)}function Fe(e,t,r){const n=B(e,t,!1,N);H(n)}function Le(e,t,r){Se=He;const n=B(e,t,!1,N),i=U&&ce(U);i&&(n.suspense=i),n.user=!0,v?v.push(n):H(n)}function k(e,t,r){r=r?Object.assign({},G,r):G;const n=B(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,H(n),Oe.bind(n)}function Re(e){return e&&typeof e=="object"&&"then"in e}function Me(e,t,r){let n,i,s;typeof t=="function"?(n=e,i=t,s={}):(n=!0,i=e,s=t||{});let u=null,l=se,f=null,h=!1,g=!1,c="initialValue"in s,S=typeof n=="function"&&k(n);const w=new Set,[m,O]=(s.storage||L)(s.initialValue),[j,V]=L(void 0),[C,P]=L(void 0,{equals:!1}),[T,R]=L(c?"ready":"unresolved");a.context&&(f=a.getNextContextId(),s.ssrLoadFrom==="initial"?l=s.initialValue:a.load&&a.has(f)&&(l=a.load(f)));function M(b,y,x,D){return u===b&&(u=null,D!==void 0&&(c=!0),(b===l||y===l)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(D,{value:y})),l=se,o&&b&&h?(o.promises.delete(b),h=!1,I(()=>{o.running=!0,ae(y,x)},!1)):ae(y,x)),y}function ae(b,y){I(()=>{y===void 0&&O(()=>b),R(y!==void 0?"errored":c?"ready":"unresolved"),V(y);for(const x of w.keys())x.decrement();w.clear()},!1)}function ne(){const b=U&&ce(U),y=m(),x=j();if(x!==void 0&&!u)throw x;return p&&!p.user&&b&&he(()=>{C(),u&&(b.resolved&&o&&h?o.promises.add(u):w.has(b)||(b.increment(),w.add(b)))}),y}function re(b=!0){if(b!==!1&&g)return;g=!1;const y=S?S():n;if(h=o&&o.running,y==null||y===!1){M(u,A(m));return}o&&u&&o.promises.delete(u);const x=l!==se?l:A(()=>i(y,{value:m(),refetching:b}));return Re(x)?(u=x,"value"in x?(x.status==="success"?M(u,x.value,void 0,y):M(u,void 0,ue(x.value),y),x):(g=!0,queueMicrotask(()=>g=!1),I(()=>{R(c?"refreshing":"pending"),P()},!1),x.then(D=>M(x,D,void 0,y),D=>M(x,void 0,ue(D),y)))):(M(u,x,void 0,y),x)}return Object.defineProperties(ne,{state:{get:()=>T()},error:{get:()=>j()},loading:{get(){const b=T();return b==="pending"||b==="refreshing"}},latest:{get(){if(!c)return ne();const b=j();if(b&&!u)throw b;return m()}}}),S?he(()=>re(!1)):re(!1),[ne,{refetch:re,mutate:O}]}function Qe(e){return I(e,!1)}function A(e){if(p===null)return e();const t=p;p=null;try{return e()}finally{p=t}}function Je(e,t,r){const n=Array.isArray(e);let i,s=r&&r.defer;return u=>{let l;if(n){l=Array(e.length);for(let h=0;h<e.length;h++)l[h]=e[h]()}else l=e();if(s)return s=!1,u;const f=A(()=>t(l,i,u));return i=l,f}}function Ze(e){Le(()=>A(e))}function te(e){return d===null||(d.cleanups===null?d.cleanups=[e]:d.cleanups.push(e)),e}function $e(e,t){K||(K=Symbol("error")),d=B(void 0,void 0,!0),d.context={...d.context,[K]:[t]},o&&o.running&&o.sources.add(d);try{return e()}catch(r){W(r)}finally{d=d.owner}}function et(){return p}function Ue(){return d}function tt(e,t){const r=d,n=p;d=e,p=null;try{return I(t,!0)}catch(i){W(i)}finally{d=r,p=n}}function nt(e){if(o&&o.running)return e(),o.done;const t=p,r=d;return Promise.resolve().then(()=>{p=t,d=r;let n;return U&&(n=o||(o={sources:new Set,effects:[],promises:new Set,disposed:new Set,queue:new Set,running:!0}),n.done||(n.done=new Promise(i=>n.resolve=i)),n.running=!0),I(e,!1),p=d=null,n?n.done:void 0})}const[rt,ge]=L(!1);function De(e){v.push.apply(v,e),e.length=0}function ve(e,t){const r=Symbol("context");return{id:r,Provider:Ke(r),defaultValue:e}}function ce(e){let t;return d&&d.context&&(t=d.context[e.id])!==void 0?t:e.defaultValue}function ke(e){const t=k(e),r=k(()=>le(t()));return r.toArray=()=>{const n=r();return Array.isArray(n)?n:n!=null?[n]:[]},r}let U;function qe(){return U||(U=ve())}function Oe(){const e=o&&o.running;if(this.sources&&(e?this.tState:this.state))if((e?this.tState:this.state)===N)H(this);else{const t=E;E=null,I(()=>J(this),!1),E=t}if(p){const t=this.observers?this.observers.length:0;p.sources?(p.sources.push(this),p.sourceSlots.push(t)):(p.sources=[this],p.sourceSlots=[t]),this.observers?(this.observers.push(p),this.observerSlots.push(p.sources.length-1)):(this.observers=[p],this.observerSlots=[p.sources.length-1])}return e&&o.sources.has(this)?this.tValue:this.value}function Ae(e,t,r){let n=o&&o.running&&o.sources.has(e)?e.tValue:e.value;if(!e.comparator||!e.comparator(n,t)){if(o){const i=o.running;(i||!r&&o.sources.has(e))&&(o.sources.add(e),e.tValue=t),i||(e.value=t)}else e.value=t;e.observers&&e.observers.length&&I(()=>{for(let i=0;i<e.observers.length;i+=1){const s=e.observers[i],u=o&&o.running;u&&o.disposed.has(s)||((u?!s.tState:!s.state)&&(s.pure?E.push(s):v.push(s),s.observers&&Ee(s)),u?s.tState=N:s.state=N)}if(E.length>1e6)throw E=[],new Error},!1)}return t}function H(e){if(!e.fn)return;$(e);const t=ee;pe(e,o&&o.running&&o.sources.has(e)?e.tValue:e.value,t),o&&!o.running&&o.sources.has(e)&&queueMicrotask(()=>{I(()=>{o&&(o.running=!0),p=d=e,pe(e,e.tValue,t),p=d=null},!1)})}function pe(e,t,r){let n;const i=d,s=p;p=d=e;try{n=e.fn(t)}catch(u){return e.pure&&(o&&o.running?(e.tState=N,e.tOwned&&e.tOwned.forEach($),e.tOwned=void 0):(e.state=N,e.owned&&e.owned.forEach($),e.owned=null)),e.updatedAt=r+1,W(u)}finally{p=s,d=i}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?Ae(e,n,!0):o&&o.running&&e.pure?(o.sources.add(e),e.tValue=n):e.value=n,e.updatedAt=r)}function B(e,t,r,n=N,i){const s={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:d,context:d?d.context:null,pure:r};return o&&o.running&&(s.state=0,s.tState=n),d===null||d!==me&&(o&&o.running&&d.pure?d.tOwned?d.tOwned.push(s):d.tOwned=[s]:d.owned?d.owned.push(s):d.owned=[s]),s}function Q(e){const t=o&&o.running;if((t?e.tState:e.state)===0)return;if((t?e.tState:e.state)===z)return J(e);if(e.suspense&&A(e.suspense.inFallback))return e.suspense.effects.push(e);const r=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ee);){if(t&&o.disposed.has(e))return;(t?e.tState:e.state)&&r.push(e)}for(let n=r.length-1;n>=0;n--){if(e=r[n],t){let i=e,s=r[n+1];for(;(i=i.owner)&&i!==s;)if(o.disposed.has(i))return}if((t?e.tState:e.state)===N)H(e);else if((t?e.tState:e.state)===z){const i=E;E=null,I(()=>J(e,r[0]),!1),E=i}}}function I(e,t){if(E)return e();let r=!1;t||(E=[]),v?r=!0:v=[],ee++;try{const n=e();return _e(r),n}catch(n){r||(v=null),E=null,W(n)}}function _e(e){if(E&&(Ce(E),E=null),e)return;let t;if(o){if(!o.promises.size&&!o.queue.size){const n=o.sources,i=o.disposed;v.push.apply(v,o.effects),t=o.resolve;for(const s of v)"tState"in s&&(s.state=s.tState),delete s.tState;o=null,I(()=>{for(const s of i)$(s);for(const s of n){if(s.value=s.tValue,s.owned)for(let u=0,l=s.owned.length;u<l;u++)$(s.owned[u]);s.tOwned&&(s.owned=s.tOwned),delete s.tValue,delete s.tOwned,s.tState=0}ge(!1)},!1)}else if(o.running){o.running=!1,o.effects.push.apply(o.effects,v),v=null,ge(!0);return}}const r=v;v=null,r.length&&I(()=>Se(r),!1),t&&t()}function Ce(e){for(let t=0;t<e.length;t++)Q(e[t])}function He(e){let t,r=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[r++]=n:Q(n)}if(a.context){if(a.count){a.effects||(a.effects=[]),a.effects.push(...e.slice(0,r));return}F()}for(a.effects&&(a.done||!a.count)&&(e=[...a.effects,...e],r+=a.effects.length,delete a.effects),t=0;t<r;t++)Q(e[t])}function J(e,t){const r=o&&o.running;r?e.tState=0:e.state=0;for(let n=0;n<e.sources.length;n+=1){const i=e.sources[n];if(i.sources){const s=r?i.tState:i.state;s===N?i!==t&&(!i.updatedAt||i.updatedAt<ee)&&Q(i):s===z&&J(i,t)}}}function Ee(e){const t=o&&o.running;for(let r=0;r<e.observers.length;r+=1){const n=e.observers[r];(t?!n.tState:!n.state)&&(t?n.tState=z:n.state=z,n.pure?E.push(n):v.push(n),n.observers&&Ee(n))}}function $(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),i=r.observers;if(i&&i.length){const s=i.pop(),u=r.observerSlots.pop();n<i.length&&(s.sourceSlots[u]=n,i[n]=s,r.observerSlots[n]=u)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)$(e.tOwned[t]);delete e.tOwned}if(o&&o.running&&e.pure)Pe(e,!0);else if(e.owned){for(t=e.owned.length-1;t>=0;t--)$(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}o&&o.running?e.tState=0:e.state=0}function Pe(e,t){if(t||(e.tState=0,o.disposed.add(e)),e.owned)for(let r=0;r<e.owned.length;r++)Pe(e.owned[r])}function ue(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function we(e,t,r){try{for(const n of t)n(e)}catch(n){W(n,r&&r.owner||null)}}function W(e,t=d){const r=K&&t&&t.context&&t.context[K],n=ue(e);if(!r)throw n;v?v.push({fn(){we(n,r,t)},state:N}):we(n,r,t)}function le(e){if(typeof e=="function"&&!e.length)return le(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const n=le(e[r]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}function Ke(e,t){return function(n){let i;return Fe(()=>i=A(()=>(d.context={...d.context,[e]:n.value},ke(()=>n.children))),void 0),i}}const oe=Symbol("fallback");function Z(e){for(let t=0;t<e.length;t++)e[t]()}function ze(e,t,r={}){let n=[],i=[],s=[],u=0,l=t.length>1?[]:null;return te(()=>Z(s)),()=>{let f=e()||[],h=f.length,g,c;return f[xe],A(()=>{let w,m,O,j,V,C,P,T,R;if(h===0)u!==0&&(Z(s),s=[],n=[],i=[],u=0,l&&(l=[])),r.fallback&&(n=[oe],i[0]=_(M=>(s[0]=M,r.fallback())),u=1);else if(u===0){for(i=new Array(h),c=0;c<h;c++)n[c]=f[c],i[c]=_(S);u=h}else{for(O=new Array(h),j=new Array(h),l&&(V=new Array(h)),C=0,P=Math.min(u,h);C<P&&n[C]===f[C];C++);for(P=u-1,T=h-1;P>=C&&T>=C&&n[P]===f[T];P--,T--)O[T]=i[P],j[T]=s[P],l&&(V[T]=l[P]);for(w=new Map,m=new Array(T+1),c=T;c>=C;c--)R=f[c],g=w.get(R),m[c]=g===void 0?-1:g,w.set(R,c);for(g=C;g<=P;g++)R=n[g],c=w.get(R),c!==void 0&&c!==-1?(O[c]=i[g],j[c]=s[g],l&&(V[c]=l[g]),c=m[c],w.set(R,c)):s[g]();for(c=C;c<h;c++)c in O?(i[c]=O[c],s[c]=j[c],l&&(l[c]=V[c],l[c](c))):i[c]=_(S);i=i.slice(0,u=h),n=f.slice(0)}return i});function S(w){if(s[c]=w,l){const[m,O]=L(c);return l[c]=O,t(f[c],m)}return t(f[c])}}}function Be(e,t,r={}){let n=[],i=[],s=[],u=[],l=0,f;return te(()=>Z(s)),()=>{const h=e()||[],g=h.length;return h[xe],A(()=>{if(g===0)return l!==0&&(Z(s),s=[],n=[],i=[],l=0,u=[]),r.fallback&&(n=[oe],i[0]=_(S=>(s[0]=S,r.fallback())),l=1),i;for(n[0]===oe&&(s[0](),s=[],n=[],i=[],l=0),f=0;f<g;f++)f<n.length&&n[f]!==h[f]?u[f](()=>h[f]):f>=n.length&&(i[f]=_(c));for(;f<n.length;f++)s[f]();return l=u.length=s.length=g,n=h.slice(0),i=i.slice(0,l)});function c(S){s[f]=S;const[w,m]=L(h[f]);return u[f]=m,t(w,f)}}}let Ie=!1;function st(){Ie=!0}function We(e,t){if(Ie&&a.context){const r=a.context;F(Ve());const n=A(()=>e(t||{}));return F(r),n}return A(()=>e(t||{}))}function X(){return!0}const fe={get(e,t,r){return t===Y?r:e.get(t)},has(e,t){return t===Y?!0:e.has(t)},set:X,deleteProperty:X,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:X,deleteProperty:X}},ownKeys(e){return e.keys()}};function ie(e){return(e=typeof e=="function"?e():e)?e:{}}function Xe(){for(let e=0,t=this.length;e<t;++e){const r=this[e]();if(r!==void 0)return r}}function it(...e){let t=!1;for(let u=0;u<e.length;u++){const l=e[u];t=t||!!l&&Y in l,e[u]=typeof l=="function"?(t=!0,k(l)):l}if(ye&&t)return new Proxy({get(u){for(let l=e.length-1;l>=0;l--){const f=ie(e[l])[u];if(f!==void 0)return f}},has(u){for(let l=e.length-1;l>=0;l--)if(u in ie(e[l]))return!0;return!1},keys(){const u=[];for(let l=0;l<e.length;l++)u.push(...Object.keys(ie(e[l])));return[...new Set(u)]}},fe);const r={},n=Object.create(null);for(let u=e.length-1;u>=0;u--){const l=e[u];if(!l)continue;const f=Object.getOwnPropertyNames(l);for(let h=f.length-1;h>=0;h--){const g=f[h];if(g==="__proto__"||g==="constructor")continue;const c=Object.getOwnPropertyDescriptor(l,g);if(!n[g])n[g]=c.get?{enumerable:!0,configurable:!0,get:Xe.bind(r[g]=[c.get.bind(l)])}:c.value!==void 0?c:void 0;else{const S=r[g];S&&(c.get?S.push(c.get.bind(l)):c.value!==void 0&&S.push(()=>c.value))}}}const i={},s=Object.keys(n);for(let u=s.length-1;u>=0;u--){const l=s[u],f=n[l];f&&f.get?Object.defineProperty(i,l,f):i[l]=f?f.value:void 0}return i}function ut(e,...t){if(ye&&Y in e){const i=new Set(t.length>1?t.flat():t[0]),s=t.map(u=>new Proxy({get(l){return u.includes(l)?e[l]:void 0},has(l){return u.includes(l)&&l in e},keys(){return u.filter(l=>l in e)}},fe));return s.push(new Proxy({get(u){return i.has(u)?void 0:e[u]},has(u){return i.has(u)?!1:u in e},keys(){return Object.keys(e).filter(u=>!i.has(u))}},fe)),s}const r={},n=t.map(()=>({}));for(const i of Object.getOwnPropertyNames(e)){const s=Object.getOwnPropertyDescriptor(e,i),u=!s.get&&!s.set&&s.enumerable&&s.writable&&s.configurable;let l=!1,f=0;for(const h of t)h.includes(i)&&(l=!0,u?n[f][i]=s.value:Object.defineProperty(n[f],i,s)),++f;l||(u?r[i]=s.value:Object.defineProperty(r,i,s))}return[...n,r]}function lt(e){let t,r;const n=i=>{const s=a.context;if(s){const[l,f]=L();a.count||(a.count=0),a.count++,(r||(r=e())).then(h=>{!a.done&&F(s),a.count--,f(()=>h.default),F()}),t=l}else if(!t){const[l]=Me(()=>(r||(r=e())).then(f=>f.default));t=l}let u;return k(()=>(u=t())?A(()=>{if(!s||a.done)return u(i);const l=a.context;F(s);const f=u(i);return F(l),f}):"")};return n.preload=()=>r||((r=e()).then(i=>t=()=>i.default),r),n}let Ye=0;function ot(){return a.context?a.getNextContextId():`cl-${Ye++}`}const je=e=>`Stale read from <${e}>.`;function ft(e){const t="fallback"in e&&{fallback:()=>e.fallback};return k(ze(()=>e.each,e.children,t||void 0))}function ct(e){const t="fallback"in e&&{fallback:()=>e.fallback};return k(Be(()=>e.each,e.children,t||void 0))}function at(e){const t=e.keyed,r=k(()=>e.when,void 0,void 0),n=t?r:k(r,void 0,{equals:(i,s)=>!i==!s});return k(()=>{const i=n();if(i){const s=e.children;return typeof s=="function"&&s.length>0?A(()=>s(t?i:()=>{if(!A(n))throw je("Show");return r()})):s}return e.fallback},void 0,void 0)}function dt(e){const t=ke(()=>e.children),r=k(()=>{const n=t(),i=Array.isArray(n)?n:[n];let s=()=>{};for(let u=0;u<i.length;u++){const l=u,f=i[u],h=s,g=k(()=>h()?void 0:f.when,void 0,void 0),c=f.keyed?g:k(g,void 0,{equals:(S,w)=>!S==!w});s=()=>h()||(c()?[l,g,f]:void 0)}return s});return k(()=>{const n=r()();if(!n)return e.fallback;const[i,s,u]=n,l=u.children;return typeof l=="function"&&l.length>0?A(()=>l(u.keyed?s():()=>{if(A(r)()?.[0]!==i)throw je("Match");return s()})):l},void 0,void 0)}function ht(e){return e}let q;function gt(){q&&[...q].forEach(e=>e())}function pt(e){let t;a.context&&a.load&&(t=a.load(a.getContextId()));const[r,n]=L(t,void 0);return q||(q=new Set),q.add(n),te(()=>q.delete(n)),k(()=>{let i;if(i=r()){const s=e.fallback;return typeof s=="function"&&s.length?A(()=>s(i,()=>n())):s}return $e(()=>e.children,n)},void 0,void 0)}const Ge=ve();function wt(e){let t=0,r,n,i,s,u;const[l,f]=L(!1),h=qe(),g={increment:()=>{++t===1&&f(!0)},decrement:()=>{--t===0&&f(!1)},inFallback:l,effects:[],resolved:!1},c=Ue();if(a.context&&a.load){const m=a.getContextId();let O=a.load(m);if(O&&(typeof O!="object"||O.status!=="success"?i=O:a.gather(m)),i&&i!=="$$f"){const[j,V]=L(void 0,{equals:!1});s=j,i.then(()=>{if(a.done)return V();a.gather(m),F(n),V(),F()},C=>{u=C,V()})}}const S=ce(Ge);S&&(r=S.register(g.inFallback));let w;return te(()=>w&&w()),We(h.Provider,{value:g,get children(){return k(()=>{if(u)throw u;if(n=a.context,s)return s(),s=void 0;n&&i==="$$f"&&F();const m=k(()=>e.children);return k(O=>{const j=g.inFallback(),{showContent:V=!0,showFallback:C=!0}=r?r():{};if((!j||i&&i!=="$$f")&&V)return g.resolved=!0,w&&w(),w=n=i=void 0,De(g.effects),m();if(C)return w?O:_(P=>(w=P,n&&(F({id:n.id+"F",count:0}),n=void 0),e.fallback),c)})})}})}export{Y as $,Qe as A,xe as B,et as C,pt as E,ft as F,ct as I,ht as M,at as S,We as a,ve as b,ot as c,Fe as d,ke as e,k as f,Ue as g,A as h,Je as i,_ as j,L as k,lt as l,it as m,Ze as n,te as o,Le as p,wt as q,ut as r,a as s,Me as t,ce as u,dt as v,st as w,tt as x,nt as y,gt as z};
