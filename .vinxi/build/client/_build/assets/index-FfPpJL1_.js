import{g as h,i as u,t as b,b as y}from"./web-DpIebe6J.js";import{k as m,n as T,t as f,a as n,M as c,F as _,v as l,f as M}from"./solid-DuWri35y.js";import{E as R}from"./Title-CrVuX5YX.js";import{g as N}from"./getWallets.server-rCnpGkki.js";import{g as $}from"./auth.server-BY2lFEoQ.js";import{W as U,S as k}from"./index-DlIjekMf.js";import{e as s,C as F}from"./index-2EPzZQ-a.js";import{c as D}from"./exchangeRates-BrUJ_eQB.js";import"./server-runtime-G1njbCYf.js";import"./index-BbP3371Q.js";import"./prova-m-C6m0c_.js";import"./components-BSHtZ-Zq.js";import"./routing-CrKy3yVb.js";import"./preload-helper-CM3UJVvY.js";import"./Inputs-DcqJwVVk.js";import"./store-EkIb7068.js";import"./action-Dtdjs7R9.js";import"./deleteWallet-DZXYhnFv.js";import"./ButtonSparkle-B8MvXRxa.js";/* empty css              */import"./Card.module-nMwE8ysR.js";var w=b('<p class="CM mt-100">'),A=b('<div class="ml-[13vw] mt-[20vw] grid grid-cols-3 gap-x-0 gap-y-300"><!$><!/><!$><!/>');const[cr,C]=m(null),[ur,lr]=m(null);function sr(){const[S,v]=m(null);T(async()=>{const t=await $();v(t)});const[i,{mutate:G,refetch:L}]=f(()=>({user:S(),editState:s()}),async t=>N(t.user));function E(t){const o=[];return i()?.filter(e=>e.container_id==t&&e.type=="wallet").forEach(e=>{o.push({color:e.color,wallet:e.wallet_name,balance:e.balance,currency:e.currency,position:o.length,id:e.id})}),o}const g="EUR",[d]=f(()=>({containerId:null,targetCurrency:g}),async t=>{const{containerId:o,targetCurrency:e}=t;try{const a=await $();if(a===null)throw new Error("Utente non autenticato per calcolo totale.");return await D(o,e,a)}catch(a){throw console.error(`[ConvertedTotalResource] Error fetching/calculating total for container ${o}:`,a),a}});return[n(R,{title:"Wallets"}),(()=>{var t=h(w);return u(t,()=>(d()?.total_balance??0).toLocaleString("it-IT",{style:"currency",currency:d()?.currency_code??g,minimumFractionDigits:2,maximumFractionDigits:2})),t})(),n(l,{get children(){return[n(c,{get when(){return M(()=>!!i())()&&s()==null},get children(){var t=h(A),o=t.firstChild,[e,a]=y(o.nextSibling),p=e.nextSibling,[I,x]=y(p.nextSibling);return u(t,n(_,{get each(){return i()},children:(r,W)=>n(l,{get children(){return n(c,{get when(){return r.type=="container"&&r.container_id==null},get children(){return n(F,{get data(){return E(r.id)},get id(){return r.id},get name(){return r.wallet_name},get currency(){return r.currency},get href(){return`/wallets/${r.id}`},onclick:()=>{C(r.id)}})}})}})}),e,a),u(t,n(_,{get each(){return i()},children:(r,W)=>n(l,{get children(){return n(c,{get when(){return r.type=="wallet"&&r.container_id==null},get children(){return n(U,{get balance(){return r.balance},get name(){return r.wallet_name},get nation(){return r.nation},get currency(){return r.currency},get category(){return r.category_id},get color(){return r.color},get href(){return`/wallets/${r.id}`},onClick:()=>C(r.id),get id(){return r.id}})}})}})}),I,x),t}}),n(c,{get when(){return s()},get children(){return n(k,{})}})]}})]}export{sr as default,C as setWalletId,lr as setWalletName,ur as walletName,cr as walletid};
