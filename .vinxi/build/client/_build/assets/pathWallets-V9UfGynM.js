import{k as l,n as y,a as P}from"./solid-DuWri35y.js";import{S as D,b as M,I as $}from"./Inputs-DcqJwVVk.js";import{g as S}from"./getWallets.server-rCnpGkki.js";import{g as W}from"./auth.server-BY2lFEoQ.js";function U(){const[E,s]=l(null),[_,i]=l(void 0),[p,n]=l([]),[u,o]=l([]);return y(async()=>{D({}),M({});try{const e=await W();if(e==null)console.warn("[onMount] getUserId ha restituito null/undefined."),s(null),i(void 0),n([]),o([]);else{s(e);const I=await S(e);i(I);const c=_();if(!c||!Array.isArray(c)){console.warn("[onMount] Dati non validi o non presenti."),n([]),o([]);return}const m=new Map,f=[];c.forEach(t=>{if(!t||typeof t!="object"||t.id===void 0||t.id===null||!t.wallet_name){console.warn("Elemento non valido o incompleto, saltato:",t);return}let a=null,r;if(t.container_id===null||t.container_id===void 0)r=t.wallet_name;else{const h=m.get(t.container_id);h?r=`${h.path}/${t.wallet_name}`:(console.warn(`Genitore con id '${t.container_id}' non trovato per '${t.wallet_name}' (id: ${t.id}). SarÃ  trattato come orfano.`),r=`__ORPHANED__/${t.wallet_name}`)}a={id:t.id,wallet:t.wallet_name,path:r,type:t.type,container_id:t.container_id},f.push(a),m.set(a.id,a)});const d=f.filter(t=>t.type!=="container");d.sort((t,a)=>t.path.localeCompare(a.path));const g=d.map(t=>t.path),v=d.map(t=>t.id);n(g),o(v),console.log("Paths Ordinati (no container):",p()),console.log("IDs Ordinati (no container):",u())}}catch(e){console.error("[onMount] Errore durante recupero dati o elaborazione:",e),s(null),i(void 0),n([]),o([])}}),P($,{type:"select",name:"walletId",get options(){return p()},get values(){return u()},placeholder:"Wallet",class:"ml-30",required:!0})}export{U as P};
