import{g as f,b as D,i as h,t as g,d as E,u as S,e as C,c as N,r as T}from"./web-DpIebe6J.js";import{k as w,a as _,f as O,d as B,F,S as I}from"./solid-DuWri35y.js";import{g as L,h as V}from"./otpInput-BXc_Jx1f.js";import{s as j,n as A}from"./index-BfCmSeNt.js";import{g as i}from"./Inputs-DcqJwVVk.js";import{u as M}from"./action-Dtdjs7R9.js";import"./server-runtime-G1njbCYf.js";import"./index-BbP3371Q.js";import"./index-BAMY2Nnw.js";import"./ButtonSparkle-B8MvXRxa.js";import"./store-EkIb7068.js";import"./icons-DnmAahPX.js";import"./routing-CrKy3yVb.js";var U=g("<p class=responseOTP>"),H=g("<div class=otp-container><div class=otp-field></div><!$><!/>"),K=g("<input type=number pattern=[0-9]* inputmode=numeric maxlength=1>"),q=g('<span class="text-white text-3xl ml-10 mr-10">&#183;');function rt(d){const[n,m]=w(Array(6).fill("")),[v,$]=w(""),u=[],P=M(L),R=(t,s)=>{const e=s.target.value,l=/[0-9]/g.test(e),r=[...n()];r[t]=l?e[0]:"",m(r),l&&t<n().length-1&&u[t+1]?.focus(),r.every(a=>a!=="")&&y(r.join(""))},b=(t,s)=>{const p=s.target;if($(""),s.key==="Backspace"){const e=[...n()];p.value!==""?(e[t]="",m(e),t>0&&u[t-1]?.focus()):t>0&&(e[t-1]="",m(e),u[t-1]?.focus())}},k=t=>{t.preventDefault();const e=(t.clipboardData?.getData("text")||"").slice(0,n().length).split("").filter(l=>/[0-9]/.test(l));e.length===n().length&&(m(e),y(e.join("")))},y=async t=>{if(d.createUser)try{await V().confirm(t),console.log("OTP verified successfully."),await P({username:i("username"),passwordConfirm:i("passwordConfirm"),name:i("name"),surname:i("surname"),dateOfBirthday:i("dateOfBirthday"),email:i("email"),phone:i("phone")})}catch(s){console.error("Error verifying OTP:",s)}t.length===n().length&&(t==d.code?j(A()+1):$("wrong code"))};return(()=>{var t=f(H),s=t.firstChild,p=s.nextSibling,[e,l]=D(p.nextSibling);return h(s,_(F,{get each(){return n()},children:(r,a)=>[(()=>{var o=f(K);return o.addEventListener("paste",k),o.$$keydown=c=>b(a(),c),o.$$input=c=>R(a(),c),S(c=>u[a()]=c,o),C(o,"value",r),B(()=>N(o,a()===0?"inputLeft":a()===5||a()===2?"inputRight":a()===3?"inputLeft":"")),T(),o})(),O(()=>O(()=>a()===2)()&&f(q))]})),h(t,_(I,{get when(){return v()},get children(){var r=f(U);return h(r,v),r}}),e,l),t})()}E(["input","keydown"]);export{rt as default};
