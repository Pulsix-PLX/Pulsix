import{l as x,D as P,c as s,m as D,F as R,S as g,n as c,t as u,e as m,r as U,B as I,z as p,q as h,g as v,C as y}from"./web-DcXN-p99.js";import{g as T,c as z,C as F,s as H}from"./exchangeRates-DIwxOQun.js";import{A}from"./components-BQhjVazl.js";import"./server-runtime-6wq6LtAi.js";import"./Card.module-nMwE8ysR.js";import"./routing-BUmn5GEU.js";var N=u('<img class="absolute w-23 ml-[15.8vw] cursor-pointer z-100"src=/icons/edit.png>'),M=u("<img src=/img/wallets/backCardHolder.png>"),Y=u('<span class="text-orange-500 text-xs ml-1 cursor-help">(⚠️) '),j=u('<span class="text-red-500 text-xs cursor-help">(Errore!)'),q=u('<div class="relative w-[17.7vw] inline-block"><img src=/img/wallets/frontCardHolder.png class="block w-full"><p class="absolute bottom-[3.8vw] left-1/2 transform -translate-x-1/2 z-10 text-[1.2vw] text-center whitespace-nowrap w-[90%] overflow-hidden text-ellipsis"></p><p class="absolute bottom-[0.5vw] ml-[1vw] z-10 text-[1.3vw] whitespace-nowrap text-left"><!$><!/><!$><!/>'),B=u("<span>...");const[E,G]=x(null);function X(n){const[b,a]=x(!1),w=[{color:"",wallet:"nothing",balance:0,currency:"USD",id:0}],f="EUR",[l]=P(()=>({containerId:n.id,targetCurrency:f}),async e=>{const{containerId:t,targetCurrency:o}=e;try{const r=await T();if(r===null)throw new Error("Utente non autenticato per calcolo totale.");return await z(t,o,r)}catch(r){throw console.error(`[ConvertedTotalResource] Error fetching/calculating total for container ${t}:`,r),r}}),_=e=>{console.log("Link clicked. Edit mode:",E()),E()?(console.log("Preventing default link action and stopping propagation because edit=true"),e.preventDefault(),e.stopPropagation()):n.onclick&&(console.log("Executing props.onclick"),n.onclick())};return[s(R,{get each(){return n.data&&n.data.length>0?n.data:null},children:(e,t)=>s(F,{get color(){return e.color},get wallet(){return e.wallet},get balance(){return e.balance},get position(){return t()},get currency(){return e.currency},get id(){return e.id}})}),s(A,{get href(){return n.href},onclick:_,get children(){return[s(g,{get when(){return b()},get children(){var e=c(N);return e.addEventListener("mouseleave",()=>a(!1)),e.addEventListener("mouseenter",()=>a(!0)),e.$$click=t=>G(n.id),m(t=>(t=`-${n.data?.length*2+2}vw`)!=null?e.style.setProperty("margin-top",t):e.style.removeProperty("margin-top")),U(),e}}),(()=>{var e=c(M);return e.addEventListener("mouseleave",()=>a(!1)),e.addEventListener("mouseenter",()=>a(!0)),e.style.setProperty("z-index","-10"),m(t=>{var o=` ${H.backCardHolder}`,r=`${(n.data?.length??w.length)*2+11}vw`,i=`-${(n.data?.length??w.length)*2+2.5}vw`;return o!==t.e&&I(e,t.e=o),r!==t.t&&((t.t=r)!=null?e.style.setProperty("height",r):e.style.removeProperty("height")),i!==t.a&&((t.a=i)!=null?e.style.setProperty("margin-top",i):e.style.removeProperty("margin-top")),t},{e:void 0,t:void 0,a:void 0}),e})(),(()=>{var e=c(q),t=e.firstChild,o=t.nextSibling,r=o.nextSibling,i=r.firstChild,[$,k]=p(i.nextSibling),C=$.nextSibling,[L,S]=p(C.nextSibling);return t.addEventListener("mouseleave",()=>a(!1)),t.addEventListener("mouseenter",()=>a(!0)),o.addEventListener("mouseleave",()=>a(!1)),o.addEventListener("mouseenter",()=>a(!0)),h(o,()=>n.name),r.addEventListener("mouseleave",()=>a(!1)),r.addEventListener("mouseenter",()=>a(!0)),h(r,s(g,{get when(){return!l.loading&&l.state!=="unresolved"},get fallback(){return c(B)},get children(){return[v(()=>(l()?.total_balance??0).toLocaleString("it-IT",{minimumFractionDigits:2,maximumFractionDigits:2}))," "," ",v(()=>v(()=>l()?.currency_code=="USD")()?"$":l()?.currency_code=="EUR"?"€":f),s(g,{get when(){return v(()=>!!l()?.warnings)()&&l().warnings.length>0},get children(){var d=c(Y);return m(()=>y(d,"title",l().warnings.join(`
`))),d}})]}}),$,k),h(r,s(g,{get when(){return l.error},get children(){var d=c(j);return m(()=>y(d,"title",l.error.message)),d}}),L,S),e})()]}})]}D(["click"]);export{X as default,E as edit,G as setEdit};
