import{createComponent as y}from"solid-js/web";import{createSignal as l,onMount as P}from"solid-js";import{S as D,b as M,I as $}from"./Inputs-D1T1pLkj.js";import{g as S}from"./getWallets.server-C5R6kBVO.js";import{g as W}from"./auth.server-ChqlnWrh.js";function w(){const[E,s]=l(null),[_,i]=l(void 0),[p,a]=l([]),[u,n]=l([]);return P(async()=>{D({}),M({});try{const e=await W();if(e==null)console.warn("[onMount] getUserId ha restituito null/undefined."),s(null),i(void 0),a([]),n([]);else{s(e);const I=await S(e);i(I);const c=_();if(!c||!Array.isArray(c)){console.warn("[onMount] Dati non validi o non presenti."),a([]),n([]);return}const m=new Map,f=[];c.forEach(t=>{if(!t||typeof t!="object"||t.id===void 0||t.id===null||!t.wallet_name){console.warn("Elemento non valido o incompleto, saltato:",t);return}let o=null,r;if(t.container_id===null||t.container_id===void 0)r=t.wallet_name;else{const h=m.get(t.container_id);h?r=`${h.path}/${t.wallet_name}`:(console.warn(`Genitore con id '${t.container_id}' non trovato per '${t.wallet_name}' (id: ${t.id}). SarÃ  trattato come orfano.`),r=`__ORPHANED__/${t.wallet_name}`)}o={id:t.id,wallet:t.wallet_name,path:r,type:t.type,container_id:t.container_id},f.push(o),m.set(o.id,o)});const d=f.filter(t=>t.type!=="container");d.sort((t,o)=>t.path.localeCompare(o.path));const g=d.map(t=>t.path),v=d.map(t=>t.id);a(g),n(v),console.log("Paths Ordinati (no container):",p()),console.log("IDs Ordinati (no container):",u())}}catch(e){console.error("[onMount] Errore durante recupero dati o elaborazione:",e),s(null),i(void 0),a([]),n([])}}),y($,{type:"select",name:"walletId",get options(){return p()},get values(){return u()},placeholder:"Wallet",class:"ml-30",required:!0})}export{w as P};
