import{c as l}from"./server-fns-runtime-4T1EILgx.js";import{d}from"./db.server-BYnrqg0d.js";import*as p from"bcryptjs";import"solid-js/web";import"solid-js/web/storage";import"./fetchEvent-1KlzQMFw.js";import"h3";import"node:async_hooks";import"pg";const I=l(async u=>{const{username:s,passwordConfirm:e,name:o,surname:t,dateOfBirthday:a,email:n,phone:c}=u;if(console.log("username: ",s),console.log("password: ",e),console.log("name: ",o),console.log("surname: ",t),console.log("dateOfBirthday: ",a),console.log("email: ",n),console.log("phone: ",c),!e)return console.error("Password is required"),{success:!1,error:"Password is required"};try{const r=String(e).trim();if(r.length<6)return{success:!1,error:"Password must be at least 6 characters long"};const m=await p.hash(r,10),i=(await d.query(`INSERT INTO users 
      (username, password, name, surname, date_of_birth, phone_number, email)
      VALUES ($1, $2, $3, $4, $5, $6, $7)
      RETURNING id, username`,[s,m,o,t,a,c,n])).rows[0];return{success:!0,userId:i.id,username:i.username}}catch(r){return console.error("Error during user insertion:",r),{success:!1,error:r.message||"An unexpected error occurred"}}},"src_routes_API_Auth_registration_createUser_ts--createUser_action","C:/Users/Matteo/Desktop/Pulsix/src/routes/API/Auth/registration/createUser.ts?tsr-directive-use-server=");export{I as createUser_action};
