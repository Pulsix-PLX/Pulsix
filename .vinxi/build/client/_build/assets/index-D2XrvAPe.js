import{g as i,t as o,b as v,i as e,d as Ke,u as Je,e as j,r as me,a as Qe,j as ge,c as ze}from"./web-DpIebe6J.js";import{k as ae,a as n,S,f as M,n as Xe,o as bt,F as ne,d as D}from"./solid-DuWri35y.js";import{c as b,s as ke,i as Ye,r as $t,a as vt,u as ht,b as Re,d as ft}from"./context-DTlNXViu.js";import{a as et}from"./auth-B7ef8sb9.js";import{B as Ne}from"./ButtonSparkle-B8MvXRxa.js";import{M as xt}from"./index-BRALuBVh.js";import{a as _t,g as yt}from"./Inputs-DcqJwVVk.js";import{P as Ct}from"./pathWallets-V9UfGynM.js";import{s as St}from"./Menu-CJHi8x7g.js";import{p as wt}from"./index-ClXKiMUD.js";import"./store-EkIb7068.js";import"./index-Ckjqp3wL.js";import"./index-BbP3371Q.js";import"./index-BAMY2Nnw.js";import"./index-CgqXENQe.js";/* empty css              */import"./server-runtime-G1njbCYf.js";import"./action-Dtdjs7R9.js";import"./routing-CrKy3yVb.js";import"./getWallets.server-rCnpGkki.js";import"./auth.server-BY2lFEoQ.js";import"./components-BSHtZ-Zq.js";var Dt=o("<p>Selected file: <strong>"),Et=o("<p>"),At=o("<div class=CM><h1>Carica Estratto Conto (CSV)</h1><form enctype=multipart/form-data class><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/>"),It=o("<strong>CSV file"),Tt=o("<br>");function Mt(){const[y,H]=ae(null);let le;function G(E){const c=E.currentTarget.files?.[0];c?c.name.toLowerCase().endsWith(".csv")?(H(c),ke(null)):(H(null),ke("File selected is not a csv file"),le&&(le.value="")):(H(null),ke(null))}async function k(E){E.preventDefault();const P=y();if(P)try{const c=new FormData;c.append("file",P);const g=await et.api.post("API/Wallets/Wallet/addTransactionByFile/uploadFile",c,{headers:{"Content-Type":"multipart/form-data"}});g.data&&Array.isArray(g.data.headers)&&Array.isArray(g.data.rows)?Ye({headers:g.data.headers,rows:g.data.rows},yt("walletId")):(console.error("Risposta API non contiene headers o rows validi:",g.data),ke("Response from server malformed or empty (mancano headers/rows)."))}catch(c){console.error(c),ke("Error during upload: "+c.message)}}return(()=>{var E=i(At),P=E.firstChild,c=P.nextSibling,g=c.firstChild,[xe,Z]=v(g.nextSibling),Ee=xe.nextSibling,[W,re]=v(Ee.nextSibling),_e=W.nextSibling,[ie,ye]=v(_e.nextSibling),be=ie.nextSibling,[Ce,Se]=v(be.nextSibling),N=Ce.nextSibling,[s,$]=v(N.nextSibling);return c.addEventListener("submit",k),e(c,n(xt,{ref:d=>le=d,id:"csv-file-input",name:"csv",accept:".csv",required:!0,onChange:G,get label(){return["Drag & drop your ",i(It)," here,",i(Tt)," or click to select"]},draggingLabel:"Release to drop the CSV file!"}),xe,Z),e(c,n(S,{get when(){return y()},get children(){var d=i(Dt),A=d.firstChild,t=A.nextSibling;return d.style.setProperty("margin-top","1rem"),d.style.setProperty("color","#e2e8f0"),e(t,()=>y()?.name),d}}),W,re),e(c,n(S,{get when(){return b.errorMessage},get children(){var d=i(Et);return d.style.setProperty("color","red"),d.style.setProperty("margin-top","10px"),e(d,()=>b.errorMessage),d}}),ie,ye),e(c,n(Ct,{}),Ce,Se),e(c,n(Ne,{type:"submit",get disabled(){return!y()||!_t()},text:"Submit file",class:"ml-130 mt-100"}),s,$),E})()}var kt=o(`<div class="p-6 border rounded-lg shadow-lg mb-6 "><h2 class="text-2xl font-bold mb-3">Anteprima Dati (Contestualizzata)</h2><p class="text-sm text-gray-600 mb-4">Dataset con <!$><!/> righe totali - <span class="font-medium text-blue-600">Clicca su una cella per modificare</span>(Salvataggio automatico uscendo dalla cella)</p><div class="overflow-auto border border-gray-200 rounded-lg relative"><div><table class="w-full bg-white border-separate border-spacing-0"><thead class="sticky top-0 z-10 bg-gray-100"><tr></tr></thead><tbody></tbody></table></div></div><div class="mt-6 flex justify-end items-center"><div class="flex space-x-2"><button class=" bg-gray-200 text-gray-800 rounded hover:bg-gray-300"title="Annulla l'intero processo di importazione">Back to upload file</button><!$><!/></div></div><div class="my-4 flex justify-start space-x-2"><button class="px-3 py-1 text-sm bg-red-100 text-red-800 rounded hover:bg-red-200 disabled:opacity-50 disabled:cursor-not-allowed"title="Annulla tutte le modifiche fatte nella tabella">Resetta Modifiche Tabella</button><button class="px-3 py-1 text-sm bg-yellow-100 text-yellow-800 rounded hover:bg-yellow-200 disabled:opacity-50 disabled:cursor-not-allowed"title="Annulla l'ultima modifica fatta nella tabella">Annulla Ultima Modifica`),Pt=o('<th class="py-3 px-4 ...">'),Lt=o('<tr class="hover:bg-gray-50 border-b border-gray-200">'),zt=o('<input type=text class="w-full h-full px-4 py-3 ...">'),Rt=o('<td class="py-3 px-4 border-gray-200">'),Nt=o('<div class="w-full h-full flex items-center cursor-pointer">'),Vt=o('<button class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Next to mapper');function Ft(){const[y,H]=ae(null),[le,G]=ae(0);let k;const E=M(()=>(b.history?.length||0)>0);Xe(()=>{k&&k.addEventListener("scroll",_e),document.addEventListener("mousedown",ie),console.log("Componente CsvPreview CONTESTUALIZZATO montato.")}),bt(()=>{k&&k.removeEventListener("scroll",_e),document.removeEventListener("mousedown",ie),console.log("Componente CsvPreview CONTESTUALIZZATO smontato.")});const P=48,c=800,g=M(()=>typeof window<"u"?Math.min(c,window.innerHeight*.8):c),xe=M(()=>Math.ceil(g()/P)+5),Z=M(()=>Math.max(0,Math.floor(le()/P))),Ee=M(()=>{const s=Array.isArray(b.data?.rows)?b.data?.rows:[];if(!s)return[];const $=Z(),d=xe(),A=Math.min($+d,s.length);return s.slice($,A)}),W=M(()=>(b.data?.rows?.length??0)*P),re=()=>{y()!==null&&H(null)},_e=s=>{G(s.target.scrollTop)},ie=s=>{y()&&k&&!k.contains(s.target)&&re()},ye=(s,$)=>{const d=y();d?.visibleRowIndex===s&&d?.header===$||H({visibleRowIndex:s,header:$})},be=(s,$,d)=>{const A=Z()+s,t=b.data?.rows;if(!t||A<0||A>=t.length){console.error("saveDataToContext: Indice riga non valido o dati non pronti:",A);return}const a=t[A]?.[$];if(String(a??"")===String(d??""))return;const l=[...t],p={...l[A]};p[$]=d,l[A]=p,ft(l)},Ce=s=>{const $=y();$&&be($.visibleRowIndex,$.header,s.target.value)},Se=s=>{const $=y();$&&(s.key==="Enter"?(s.preventDefault(),be($.visibleRowIndex,$.header,s.target.value),re()):s.key==="Escape"&&re())};function N(){re(),(b.data?.headers??[]).length>0?(console.log(b.data),Re("mapping")):console.warn("Impossibile procedere: dati/headers mancanti nel context.")}return(()=>{var s=i(kt),$=s.firstChild,d=$.nextSibling,A=d.firstChild,t=A.nextSibling,[a,l]=v(t.nextSibling);a.nextSibling;var p=d.nextSibling,u=p.firstChild,m=u.firstChild,oe=m.firstChild,I=oe.firstChild,J=oe.nextSibling,q=p.nextSibling,$e=q.firstChild,se=$e.firstChild,Ae=se.nextSibling,[ve,K]=v(Ae.nextSibling),L=q.nextSibling,Q=L.firstChild,Pe=Q.nextSibling;e(d,()=>b.data?.rows?.length||0,a,l);var de=k;return typeof de=="function"?Je(de,p):k=p,p.style.setProperty("width","70%"),u.style.setProperty("position","relative"),m.style.setProperty("position","absolute"),m.style.setProperty("width","100%"),e(I,n(ne,{get each(){return b.data?.headers},children:x=>(()=>{var V=i(Pt);return e(V,x),V})()})),e(J,n(ne,{get each(){return Ee()},children:(x,V)=>(()=>{var X=i(Lt);return X.style.setProperty("height","48px"),e(X,n(ne,{get each(){return b.data?.headers},children:O=>{const he=M(()=>Z()+V()),Y=M(()=>{const z=y();return z!==null&&z.visibleRowIndex===V()&&z.header===O}),Ie=M(()=>{const z=b.data?.rows,_=he();return z?.[_]?.[O]??""});return(()=>{var z=i(Rt);return z.style.setProperty("position","relative"),e(z,n(S,{get when(){return Y()},get fallback(){return(()=>{var _=i(Nt);return _.$$click=()=>ye(V(),O),e(_,Ie),D(()=>Qe(_,"title",`Riga ${he()}, Colonna ${O}`)),me(),_})()},get children(){var _=i(zt);return _.$$mousedown=ee=>ee.stopPropagation(),_.$$click=ee=>ee.stopPropagation(),Je(ee=>setTimeout(()=>ee.focus(),0),_),_.$$keydown=Se,_.addEventListener("blur",Ce),D(()=>j(_,"value",Ie())),me(),_}})),D(_=>(_=Y()?"0":void 0)!=null?z.style.setProperty("padding",_):z.style.removeProperty("padding")),z})()}})),X})()})),ge(se,"click",$t,!0),e($e,n(S,{when:typeof Ne<"u",get fallback(){return(()=>{var x=i(Vt);return x.$$click=N,me(),x})()},get children(){return n(Ne,{onClick:N,text:"Procedi con la mappatura"})}}),ve,K),ge(Q,"click",vt,!0),ge(Pe,"click",ht,!0),D(x=>{var V=`${g()}px`,X=`${W()}px`,O=`${Z()*P}px`,he=!E(),Y=!E();return V!==x.e&&((x.e=V)!=null?p.style.setProperty("height",V):p.style.removeProperty("height")),X!==x.t&&((x.t=X)!=null?u.style.setProperty("height",X):u.style.removeProperty("height")),O!==x.a&&((x.a=O)!=null?m.style.setProperty("top",O):m.style.removeProperty("top")),he!==x.o&&j(Q,"disabled",x.o=he),Y!==x.i&&j(Pe,"disabled",x.i=Y),x},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),me(),s})()}Ke(["click","keydown","mousedown"]);var Ut=o('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">'),Ht=o('<div><p class="font-medium mb-2">Interpretazione del segno:</p><div class="flex items-center space-x-4"><label class="flex items-center"><input type=radio name=signInterpretation value=negativeIsExpense><span class=ml-2>Importi negativi = Uscite, Importi positivi = Entrate</span></label></div><div class="flex items-center space-x-4 mt-2"><label class="flex items-center"><input type=radio name=signInterpretation value=negativeIsIncome><span class=ml-2>Importi negativi = Entrate, Importi positivi = Uscite'),Ot=o('<div class=space-y-3><div><label class="block font-medium mb-1">Colonna che indica il tipo:</label><select class="w-full p-2 border rounded"><option value>-- Seleziona colonna --</option><!$><!/></select></div><div class="grid grid-cols-2 gap-4"><div><label class="block font-medium mb-1">Valore per Entrate:</label><input type=text class="w-full p-2 border rounded"placeholder="es. entrata, income, guadagno"></div><div><label class="block font-medium mb-1">Valore per Uscite:</label><input type=text class="w-full p-2 border rounded"placeholder="es. uscita, expense, spesa">'),Bt=o(`<div class="mt-2 p-4 bg-gray-50 rounded-lg overflow-x-auto"><p class="text-xs text-gray-600 mb-2">Questa è un'anteprima di come verranno interpretati i dati in base alla mappatura e alla logica del tipo transazione attuale. 'N/D' significa che il valore nella riga originale era vuoto o nullo. 'Non Mappato' significa che il campo sistema non è stato associato a nessuna colonna CSV.</p><table class="w-full min-w-max text-sm"> <thead><tr class="border-b-2 border-gray-300 text-left"><!$><!/><th class="p-2 font-semibold">Interpretazione</th> </tr></thead><tbody>`),jt=o(`<p class="mt-2 text-sm text-orange-600">Per vedere l'anteprima dell'interpretazione, mappa prima il campo "Amount".`),Gt=o("<div class=mt-4><!$><!/><!$><!/>"),Wt=o(`<div class="p-6 border rounded-lg shadow-lg mb-6 bg-white"><h2 class="text-2xl font-bold mb-3">Mappatura Colonne</h2><p class="text-sm text-gray-600 mb-4">Trascina le colonne del CSV nei campi del sistema corrispondenti</p><!$><!/><div class="flex gap-6"><div class="w-1/2 bg-gray-50 p-4 rounded-lg"><h3 class="text-lg font-semibold mb-3">Colonne CSV</h3><p class="text-sm text-gray-500 mb-3">Trascina queste colonne nei campi a destra</p><div class=space-y-2></div></div><div class="w-1/2 bg-gray-50 p-4 rounded-lg"><h3 class="text-lg font-semibold mb-3">Campi Sistema</h3><p class="text-sm text-gray-500 mb-3">Rilascia le colonne CSV qui</p><div class=space-y-2><!$><!/><div><div class="flex justify-between items-center"><span class="font-medium text-gray-500">Non utilizzare</span><div class="flex flex-wrap gap-1 max-w-xs"></div></div></div></div></div></div><div class="mt-6 p-4 bg-gray-50 rounded-lg"><h3 class="text-lg font-semibold mb-3">Configurazione Tipo Transazione</h3><div class=space-y-4><div><p class="font-medium mb-2">Come determinare se una transazione è un'entrata o un'uscita?</p><div class="flex items-center space-x-4"><label class="flex items-center"><input type=radio name=transactionType value=auto><span class=ml-2>Dal segno dell'importo</span></label><label class="flex items-center"><input type=radio name=transactionType value=column><span class=ml-2>Da una colonna specifica</span></label></div></div><!$><!/><!$><!/></div></div><div class=mt-4><button class="text-blue-600 hover:text-blue-800 text-sm flex items-center"><!$><!/>Mostra anteprima interpretazione transazioni</button><!$><!/></div><div class="mt-6 flex justify-between"><button class="px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300">Go back</button><!$><!/></div><div class="mt-4 text-sm text-gray-500"><p>* I campi contrassegnati sono obbligatori`),qt=o('<button class="text-gray-600 hover:text-red-600"title="Rimuovi mappatura">✕'),Zt=o('<div><div class="flex justify-between items-center"><span></span><!$><!/>'),Jt=o('<div class="flex items-center"><span class="bg-blue-100 text-blue-800 px-2 py-1 rounded mr-2"></span><button class="text-gray-500 hover:text-red-600"title="Rimuovi mappatura">✕'),Kt=o('<div><div class="flex justify-between items-center"><div><span class=font-medium></span><!$><!/></div><!$><!/>'),Qt=o('<span class="text-red-500 ml-1">*'),Xt=o('<span class="bg-gray-200 text-gray-700 px-2 py-1 rounded text-xs flex items-center"><!$><!/><button class="ml-1 text-gray-500 hover:text-red-600">✕'),Yt=o("<option>"),ea=o('<th class="p-2 font-semibold">'),ta=o('<tr class="border-b border-gray-200"><td class=p-2></td><td class=p-2></td><td class=p-2></td><td>');function aa(){const[y,H]=ae({}),[le,G]=ae(null),[k,E]=ae(null),[P,c]=ae(null),[g,xe]=ae({mode:"auto",negativeIsExpense:!0}),Z=[{id:"amount",label:"Amount"},{id:"cause",label:"Cause"},{id:"date",label:"Date"},{id:"category_id",label:"category"},{id:"subCategory_id",label:"Sub Category"}],Ee=["amount"],[W,re]=ae(!1),_e=t=>a=>{if(G(t),a.dataTransfer){a.dataTransfer.effectAllowed="move";try{a.dataTransfer.setData("text/plain",t)}catch(l){console.error("Error setting drag data:",l)}}},ie=t=>a=>{a.preventDefault(),E(t),a.dataTransfer&&(a.dataTransfer.dropEffect="move")},ye=()=>{E(null)},be=t=>a=>{a.preventDefault();const l=le();l&&H(p=>{const u={...p};return u[l]&&u[l]===t?(E(null),G(null),p):(Object.keys(u).forEach(m=>{u[m]===t&&delete u[m]}),u[l]=t,u)}),E(null),G(null)},Ce=t=>{H(a=>{const l={...a};return Object.keys(l).forEach(p=>{l[p]===t&&delete l[p]}),l})},Se=t=>{H(a=>{const l={...a};return delete l[t],l})},N=t=>{xe(a=>({...a,...t}))},s=t=>{const l=Object.entries(y()).find(([p,u])=>typeof u=="string"&&u.trim()===t);return l?l[0]:null},$=["cause","amount","date"],d=M(()=>{console.log("Calculating transactionExamples (detailed)...");const t=y();if(!b.data?.rows||b.data?.length===0)return console.log("DEBUG Memo: props.rows è vuoto."),[];const a={};$.forEach(I=>{a[I]=Object.entries(t).find(([J,q])=>typeof q=="string"&&q.trim()===I)?.[0]});const l=b.data?.rows.slice(0,5),p="amount";console.log(`DEBUG Memo: Cerco il valore ID: "${p}" (Tipo: string)`);const u=Object.entries(t);console.log("DEBUG Memo: Controllo queste entries:",JSON.stringify(u)),u.forEach(([I,J])=>{const se=(typeof J==="string"?J.trim():J)===p;console.log(`-- DEBUG Memo Entry: Chiave="<span class="math-inline">{key}", Valore="</span>{value}" (Tipo: <span class="math-inline">{valueType}). Confronto diretto ('</span>{amountFieldId}'): <span class="math-inline">{directMatch}. Confronto con trim ('</span>{amountFieldId}'): ${se}`)});const m=a.amount;if(!m)return console.log("DEBUG Memo: Amount header non mappato, impossibile calcolare esempi completi."),[];if(console.log("DEBUG: Header mappato per 'amount' (Risultato finale find):",m),!m)return console.log("DEBUG Memo: Amount header NON trovato, ritorno array vuoto."),[];console.log(`DEBUG Memo: Amount header trovato: "${m}". Calcolo esempi...`);const oe=l.map((I,J)=>{const q=a.walletId?I[a.walletId]??"N/D":"Non Mappato",$e=a.cause?I[a.cause]??"N/D":"Non Mappato",se=a.date?I[a.date]??"N/D":"Non Mappato",Ae=I[m],ve=parseFloat(Ae);let K="Non determinato";const L=g();if(L.mode==="auto")K=ve<0===L.negativeIsExpense?"Expense":"Income";else if(L.mode==="column"&&L.columnName&&L.positiveValue&&L.negativeValue){const Q=I[L.columnName];Q===L.positiveValue?K="Income":Q===L.negativeValue&&(K="Expense")}return{walletId:q,cause:$e,amount:isNaN(ve)?"N/A":ve,date:se,interpretation:K}});return console.log(`DEBUG: Esempi dettagliati calcolati: ${oe.length}`),oe}),A=async()=>{console.log("Processing data before sending..."),c(null);const t=b.data?.rows,a=y(),l=g();if(!t||t.length===0){c("Nessun dato da processare.");return}const p=wt(t,a,l);console.log("Dati processati pronti per l'invio:",p);const u=p.filter(m=>m.amount!==null&&m.type!==null);if(u.length===0){c("Nessuna transazione valida trovata dopo il processamento. Controlla la mappatura e i dati.");return}try{await et.api.post("API/Wallets/Wallet/addTransactionByFile/addTransactions",{transactions:u,walletId:b.walletId}),console.log(`Inviate ${u.length} transazioni processate al server.`),Re("complete")}catch(m){console.error("Errore durante l'invio dei dati processati:",m),c(m.response?.data?.message||m.message||"Errore durante l'invio dei dati al server")}};return(()=>{var t=i(Wt),a=t.firstChild,l=a.nextSibling,p=l.nextSibling,[u,m]=v(p.nextSibling),oe=u.nextSibling,I=oe.firstChild,J=I.firstChild,q=J.nextSibling,$e=q.nextSibling,se=I.nextSibling,Ae=se.firstChild,ve=Ae.nextSibling,K=ve.nextSibling,L=K.firstChild,[Q,Pe]=v(L.nextSibling),de=Q.nextSibling,x=de.firstChild,V=x.firstChild,X=V.nextSibling,O=oe.nextSibling,he=O.firstChild,Y=he.nextSibling,Ie=Y.firstChild,z=Ie.firstChild,_=z.nextSibling,ee=_.firstChild,Fe=ee.firstChild,tt=ee.nextSibling,Ue=tt.firstChild,at=Ie.nextSibling,[He,nt]=v(at.nextSibling),lt=He.nextSibling,[rt,it]=v(lt.nextSibling),Ve=O.nextSibling,Le=Ve.firstChild,ot=Le.firstChild,[Oe,st]=v(ot.nextSibling);Oe.nextSibling;var dt=Le.nextSibling,[ct,pt]=v(dt.nextSibling),Be=Ve.nextSibling,je=Be.firstChild,ut=je.nextSibling,[gt,mt]=v(ut.nextSibling);return e(t,n(S,{get when(){return P()},get children(){var r=i(Ut);return e(r,P),r}}),u,m),e($e,n(ne,{get each(){return b.data?.headers},children:r=>{const C=M(()=>Object.keys(y()).includes(r));return(()=>{var h=i(Zt),f=h.firstChild,w=f.firstChild,R=w.nextSibling,[F,B]=v(R.nextSibling);return ge(h,"dragstart",_e(r)),e(w,r),e(f,n(S,{get when(){return C()},get children(){var T=i(qt);return T.$$click=()=>Se(r),me(),T}}),F,B),D(T=>{var te=`p-3 rounded-md cursor-grab ${C()?"bg-gray-300 text-gray-600":"bg-blue-100 hover:bg-blue-200 text-blue-800"}`,ce=!C();return te!==T.e&&ze(h,T.e=te),ce!==T.t&&Qe(h,"draggable",T.t=ce),T},{e:void 0,t:void 0}),h})()}})),e(K,n(ne,{each:Z,children:r=>{const C=M(()=>s(r.id)),h=Ee.includes(r.id);return(()=>{var f=i(Kt),w=f.firstChild,R=w.firstChild,F=R.firstChild,B=F.nextSibling,[T,te]=v(B.nextSibling),ce=R.nextSibling,[fe,we]=v(ce.nextSibling);return ge(f,"drop",be(r.id)),f.addEventListener("dragleave",ye),ge(f,"dragover",ie(r.id)),e(F,()=>r.label),e(R,h&&i(Qt),T,te),e(w,n(S,{get when(){return C()},get children(){var De=i(Jt),pe=De.firstChild,U=pe.nextSibling;return e(pe,C),U.$$click=()=>Ce(r.id),me(),De}}),fe,we),D(()=>ze(f,`p-3 rounded-md border-2 ${k()===r.id?"border-blue-500 bg-blue-50":C()?"border-green-500 bg-green-50":h?"border-yellow-300 bg-yellow-50":"border-gray-300 bg-white"}`)),f})()}}),Q,Pe),ge(de,"drop",be("non_utilizzare")),de.addEventListener("dragleave",ye),ge(de,"dragover",ie("non_utilizzare")),e(X,n(ne,{get each(){return Object.entries(y())},children:([r,C])=>n(S,{when:C==="non_utilizzare",get children(){var h=i(Xt),f=h.firstChild,[w,R]=v(f.nextSibling),F=w.nextSibling;return e(h,r,w,R),F.$$click=()=>Se(r),me(),h}})})),Fe.addEventListener("change",()=>N({mode:"auto"})),Ue.addEventListener("change",()=>N({mode:"column"})),e(Y,n(S,{get when(){return g().mode==="auto"},get children(){var r=i(Ht),C=r.firstChild,h=C.nextSibling,f=h.firstChild,w=f.firstChild,R=h.nextSibling,F=R.firstChild,B=F.firstChild;return w.addEventListener("change",()=>N({negativeIsExpense:!0})),B.addEventListener("change",()=>N({negativeIsExpense:!1})),D(()=>j(w,"checked",g().negativeIsExpense===!0)),D(()=>j(B,"checked",g().negativeIsExpense===!1)),r}}),He,nt),e(Y,n(S,{get when(){return g().mode==="column"},get children(){var r=i(Ot),C=r.firstChild,h=C.firstChild,f=h.nextSibling,w=f.firstChild,R=w.nextSibling,[F,B]=v(R.nextSibling),T=C.nextSibling,te=T.firstChild,ce=te.firstChild,fe=ce.nextSibling,we=te.nextSibling,De=we.firstChild,pe=De.nextSibling;return f.addEventListener("change",U=>N({columnName:U.currentTarget.value})),e(f,n(ne,{get each(){return b.data?.headers},children:U=>(()=>{var Te=i(Yt);return j(Te,"value",U),e(Te,U),Te})()}),F,B),fe.addEventListener("change",U=>N({positiveValue:U.currentTarget.value})),pe.addEventListener("change",U=>N({negativeValue:U.currentTarget.value})),D(()=>j(f,"value",g().columnName||"")),D(()=>j(fe,"value",g().positiveValue||"")),D(()=>j(pe,"value",g().negativeValue||"")),r}}),rt,it),Le.$$click=()=>re(!W()),e(Le,()=>W()?"▼ ":"► ",Oe,st),e(Ve,n(S,{get when(){return W()},get children(){var r=i(Gt),C=r.firstChild,[h,f]=v(C.nextSibling),w=h.nextSibling,[R,F]=v(w.nextSibling);return e(r,n(S,{get when(){return M(()=>!!W())()&&d().length>0},get children(){var B=i(Bt),T=B.firstChild,te=T.nextSibling,ce=te.firstChild,fe=ce.nextSibling,we=fe.firstChild,De=we.firstChild,[pe,U]=v(De.nextSibling);pe.nextSibling;var Te=fe.nextSibling;return e(we,n(ne,{each:Z,children:ue=>(()=>{var Me=i(ea);return e(Me,()=>ue.label),Me})()}),pe,U),e(Te,n(ne,{get each(){return d()},children:ue=>(()=>{var Me=i(ta),Ge=Me.firstChild,We=Ge.nextSibling,qe=We.nextSibling,Ze=qe.nextSibling;return e(Ge,()=>ue.amount),e(We,()=>ue.cause),e(qe,()=>ue.date),e(Ze,()=>ue.interpretation),D(()=>ze(Ze,`p-2 font-medium ${ue.interpretation==="Income"?"text-green-600":ue.interpretation==="Expense"?"text-red-600":"text-gray-600"}`)),Me})()})),B}}),h,f),e(r,n(S,{get when(){return M(()=>!!W())()&&!s("amount")},get children(){return i(jt)}}),R,F),r}}),ct,pt),je.$$click=()=>Re("preview"),e(Be,n(Ne,{onClick:A,text:"Conferma mappatura"}),gt,mt),D(()=>ze(de,`p-3 rounded-md border-2 ${k()==="non_utilizzare"?"border-red-500 bg-red-50":"border-gray-300 bg-white"}`)),D(()=>j(Fe,"checked",g().mode==="auto")),D(()=>j(Ue,"checked",g().mode==="column")),me(),t})()}Ke(["click"]);var na=o("<div class>");function Da(){return Xe(()=>St(!1)),Ye({headers:["Date","Description","Amount","Category","Status"],rows:[{Date:"2025-04-21",Description:"Stipendio Aprile",Amount:2500.5,Category:"Income",Status:"Completed"},{Date:"2025-04-20",Description:"Supermercato Esselunga",Amount:-75.3,Category:"Groceries",Status:"Completed"},{Date:"2025-04-19",Description:"Bolletta Luce",Amount:-55,Category:"Utilities",Status:"Completed"},{Date:"2025-04-18",Description:"Ristorante 'La Brace'",Amount:-42,Category:"Dining Out",Status:"Completed"},{Date:"2025-04-17",Description:"Amazon ordine #123",Amount:-120.99,Category:"Shopping",Status:"Pending"},{Date:"2025-04-16",Description:"Cinema Odeon",Amount:-18,Category:"Entertainment",Status:"Completed"},{Date:"2025-04-15",Description:"Rimborso Tasse",Amount:350,Category:"Income",Status:"Completed"},{Date:"2025-04-14",Description:"Palestra Mensile",Amount:-40,Category:"Health & Fitness",Status:"Completed"},{Date:"2025-04-13",Description:"Libri Universitari",Amount:-85.5,Category:"Education",Status:"Completed"},{Date:"2025-04-12",Description:"Riparazione Auto",Amount:-300,Category:"Transport",Status:"Completed"},{Date:"2025-04-15",Description:"Rimborso Tasse",Amount:350,Category:"Income",Status:"Completed"},{Date:"2025-04-14",Description:"Palestra Mensile",Amount:-40,Category:"Health & Fitness",Status:"Completed"},{Date:"2025-04-13",Description:"Libri Universitari",Amount:-85.5,Category:"Education",Status:"Completed"},{Date:"2025-04-12",Description:"Riparazione Auto",Amount:-300,Category:"Transport",Status:"Completed"},{Date:"2025-04-15",Description:"Rimborso Tasse",Amount:350,Category:"Income",Status:"Completed"},{Date:"2025-04-14",Description:"Palestra Mensile",Amount:-40,Category:"Health & Fitness",Status:"Completed"},{Date:"2025-04-13",Description:"Libri Universitari",Amount:-85.5,Category:"Education",Status:"Completed"},{Date:"2025-04-12",Description:"Riparazione Auto",Amount:-300,Category:"Transport",Status:"Completed"},{Date:"2025-04-15",Description:"Rimborso Tasse",Amount:350,Category:"Income",Status:"Completed"},{Date:"2025-04-14",Description:"Palestra Mensile",Amount:-40,Category:"Health & Fitness",Status:"Completed"},{Date:"2025-04-13",Description:"Libri Universitari",Amount:-85.5,Category:"Education",Status:"Completed"},{Date:"2025-04-12",Description:"Riparazione Auto",Amount:-300,Category:"Transport",Status:"Completed"}]},123),Re("mapping"),[n(S,{get when(){return b.step==="upload"},get children(){return n(Mt,{})}}),n(S,{get when(){return b.step==="preview"},get children(){var G=i(na);return e(G,n(Ft,{})),G}}),n(S,{get when(){return b.step==="mapping"},get children(){return n(aa,{})}})]}export{Da as default};
