import{createComponent as y}from"solid-js/web";import{createSignal as l,onMount as D}from"solid-js";import{S as P,b as M,I as $}from"./assets/Inputs-D1T1pLkj.js";import{g as S}from"./assets/getWallets.server-C5R6kBVO.js";import{g as W}from"./assets/auth.server-ChqlnWrh.js";import"solid-js/store";import"gsap";import"./assets/server-fns-runtime-C3tiYEg6.js";import"solid-js/web/storage";import"./assets/fetchEvent-9EzSf9d7.js";import"h3";import"vite-plugin-node-polyfills/shims/global";import"node:async_hooks";import"./assets/db.server-CDeyn5Z_.js";import"vite-plugin-node-polyfills/shims/process";import"pg";import"./assets/action-BR9kmesq.js";import"./assets/routing-BRXp7sqN.js";function B(){const[E,i]=l(null),[_,s]=l(void 0),[d,a]=l([]),[m,n]=l([]);return D(async()=>{P({}),M({});try{const e=await W();if(e==null)console.warn("[onMount] getUserId ha restituito null/undefined."),i(null),s(void 0),a([]),n([]);else{i(e);const I=await S(e);s(I);const c=_();if(!c||!Array.isArray(c)){console.warn("[onMount] Dati non validi o non presenti."),a([]),n([]);return}const u=new Map,f=[];c.forEach(t=>{if(!t||typeof t!="object"||t.id===void 0||t.id===null||!t.wallet_name){console.warn("Elemento non valido o incompleto, saltato:",t);return}let o=null,r;if(t.container_id===null||t.container_id===void 0)r=t.wallet_name;else{const h=u.get(t.container_id);h?r=`${h.path}/${t.wallet_name}`:(console.warn(`Genitore con id '${t.container_id}' non trovato per '${t.wallet_name}' (id: ${t.id}). SarÃ  trattato come orfano.`),r=`__ORPHANED__/${t.wallet_name}`)}o={id:t.id,wallet:t.wallet_name,path:r,type:t.type,container_id:t.container_id},f.push(o),u.set(o.id,o)});const p=f.filter(t=>t.type!=="container");p.sort((t,o)=>t.path.localeCompare(o.path));const g=p.map(t=>t.path),v=p.map(t=>t.id);a(g),n(v),console.log("Paths Ordinati (no container):",d()),console.log("IDs Ordinati (no container):",m())}}catch(e){console.error("[onMount] Errore durante recupero dati o elaborazione:",e),i(null),s(void 0),a([]),n([])}}),y($,{type:"select",name:"walletId",get options(){return d()},get values(){return m()},placeholder:"Wallet",class:"ml-30",required:!0})}export{B as default};
