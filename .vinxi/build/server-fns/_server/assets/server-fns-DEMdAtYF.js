import ue from"vite-plugin-node-polyfills/shims/process";import{d as tt,g as se,s as Ce,a as rt,b as st,m as pe,c as he,e as T,f as it,p as at}from"./fetchEvent-BW7O4Ysp.js";import O from"jsonwebtoken";import{appendCorsHeaders as nt,isPreflightRequest as ot,handleCors as lt,eventHandler as $e}from"h3";import{d as ct}from"./db.server-CDeyn5Z_.js";import{j as b}from"./response-CbUr9JDj.js";import de from"vite-plugin-node-polyfills/shims/global";import{lazy as ut,createComponent as pt,sharedConfig as Te}from"solid-js";import{ssrElement as W,escape as ht,mergeProps as dt,ssr as ft,getRequestEvent as gt,isServer as mt,renderToString as Pt}from"solid-js/web";import{provideRequestEvent as We}from"solid-js/web/storage";import"node:async_hooks";function fe(t){return async e=>{const r=se(e),i=await t(r);i&&await Ce(e,i)}}function ge(t){return async(e,r)=>{const i=se(e),a=await t(i,r);a&&await Ce(e,a)}}function yt({onRequest:t,onBeforeResponse:e}){return tt({onRequest:typeof t=="function"?fe(t):Array.isArray(t)?t.map(fe):void 0,onBeforeResponse:typeof e=="function"?ge(e):Array.isArray(e)?e.map(ge):void 0})}const De=["http://localhost:3000","http://localhost:3001","https://tuo-dominio-produzione.com","https://dominio-sito-esterno-1.com"];async function bt(t){const e=t.request.headers.get("authorization");if(!e||!e.startsWith("Bearer "))return b({error:"Authentication required",code:"NO_AUTH_HEADER"},{status:401});const r=e.substring(7);let i=null;const a=ue.env.JWT_SECRET||"",n=ue.env.JWT_ISSUER||"pulsix";if(!a)return console.error("[Auth Logic] Errore critico: JWT_SECRET non configurato!"),b({error:"Server configuration error",code:"JWT_SECRET_MISSING"},{status:500});try{i=O.verify(r,a,{issuer:n})}catch(c){let u="Invalid or expired token",d="INVALID_TOKEN";return c instanceof O.TokenExpiredError?(u="Token expired",d="TOKEN_EXPIRED",console.log(`[Auth Logic] Token scaduto per ${t.request.url}.`)):c instanceof O.JsonWebTokenError?(u=`Invalid token (${c.message})`,d="TOKEN_INVALID_SIGNATURE_OR_PAYLOAD",console.warn(`[Auth Logic] Errore verifica token per ${t.request.url}: ${c.message}`)):console.error(`[Auth Logic] Errore verifica token (sconosciuto) per ${t.request.url}:`,c),b({error:u,code:d},{status:401})}if(typeof i!="object"||i===null||typeof i.sub!="number"||typeof i.jti!="string")return console.log("[Auth Logic] Payload token decodificato non valido. Payload:",i),b({error:"Invalid token payload structure or types",code:"INVALID_TOKEN_PAYLOAD"},{status:401});const o=i.sub,l=i.jti;try{const u=(await ct.query("SELECT id, state FROM auth.users WHERE id = $1",[o])).rows[0];return u?u.state==="blocked"||u.state==="sospended"?(console.warn(`[Auth Logic] Accesso negato per utente ${o} (Stato: ${u.state})`),b({error:`User account is ${u.state}`,code:`USER_${u.state.toUpperCase()}`},{status:403})):(console.log(`[Auth Logic] Utente ${o} autenticato per ${t.request.url}.`),{user:{id:o,tokenId:l,state:u.state}}):(console.warn(`[Auth Logic] Utente ${o} non trovato.`),b({error:"User associated with token not found",code:"USER_NOT_FOUND"},{status:401}))}catch(c){return console.error(`[Auth Logic] Errore DB check utente ${o}:`,c),b({error:"Internal server error during user check"},{status:500})}}async function xt(t){const e=t.nativeEvent;if(ot(e)){const r=t.request.headers.get("origin");return lt(e,{origin:a=>!a||De.includes(a),methods:["GET","POST","PUT","DELETE","PATCH","OPTIONS"],allowHeaders:["Authorization","Content-Type","Accept","X-Requested-With"],credentials:!0,maxAge:"86400"})?new Response(null,{status:204}):(console.error(`[CORS Middleware] Preflight check failed for origin: ${r}`),b({error:"CORS Preflight Check Failed"},{status:403}))}}async function At(t){}const vt=["/API/Auth/login","/API/Auth/registration","/API/Auth/refresh","/API/Auth/logout"],St="/API/";async function wt(t){const r=new URL(t.request.url).pathname;if(!r.startsWith(St))return;let i=null;if(vt.some(o=>{let l=!1;return typeof o=="string"?l=o.endsWith("/")?r.startsWith(o):r===o:l=o.test(r),l&&(i=o),l})){console.log(`[ApiAuth Middleware] SKIPPING AUTH for public API path "${r}" (matched: ${i})`);return}console.log(`[ApiAuth Middleware] Path "${r}" is a PROTECTED API endpoint. Running auth check...`);const n=await bt(t);if(n instanceof Response)return console.warn(`[ApiAuth Middleware] Auth check failed for API "${r}". Status: ${n.status}`),n;t.locals.user=n.user,console.log(`[ApiAuth Middleware] Auth successful for user ${n.user?.id} on API path "${r}"`)}const me=yt({onRequest:[t=>{t.locals.startTime=Date.now()},xt,At,wt],onBeforeResponse:[t=>{nt(t.nativeEvent,{origin:e=>!e||De.includes(e),methods:["GET","POST","PUT","DELETE","PATCH","OPTIONS"],allowHeaders:["Authorization","Content-Type","Accept","X-Requested-With"],credentials:!0})},t=>{const e=t.locals;e.startTime&&(Date.now()-e.startTime,new URL(t.request.url).pathname)}]});var zt=(t=>(t[t.AggregateError=1]="AggregateError",t[t.ArrowFunction=2]="ArrowFunction",t[t.ErrorPrototypeStack=4]="ErrorPrototypeStack",t[t.ObjectAssign=8]="ObjectAssign",t[t.BigIntTypedArray=16]="BigIntTypedArray",t[t.AbortSignal=32]="AbortSignal",t))(zt||{});function Rt(t){switch(t){case'"':return'\\"';case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"\b":return"\\b";case"	":return"\\t";case"\f":return"\\f";case"<":return"\\x3C";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return}}function g(t){let e="",r=0,i;for(let a=0,n=t.length;a<n;a++)i=Rt(t[a]),i&&(e+=t.slice(r,a)+i,r=a+1);return r===0?e=t:e+=t.slice(r),e}function kt(t){switch(t){case"\\\\":return"\\";case'\\"':return'"';case"\\n":return`
`;case"\\r":return"\r";case"\\b":return"\b";case"\\t":return"	";case"\\f":return"\f";case"\\x3C":return"<";case"\\u2028":return"\u2028";case"\\u2029":return"\u2029";default:return t}}function A(t){return t.replace(/(\\\\|\\"|\\n|\\r|\\b|\\t|\\f|\\u2028|\\u2029|\\x3C)/g,kt)}var z="__SEROVAL_REFS__",F="$R",D=`self.${F}`;function It(t){return t==null?`${D}=${D}||[]`:`(${D}=${D}||{})["${g(t)}"]=[]`}function P(t,e){if(!t)throw e}var Fe=new Map,S=new Map;function Ue(t){return Fe.has(t)}function Et(t){return S.has(t)}function _t(t){return P(Ue(t),new dr(t)),Fe.get(t)}function Ct(t){return P(Et(t),new fr(t)),S.get(t)}typeof globalThis<"u"?Object.defineProperty(globalThis,z,{value:S,configurable:!0,writable:!1,enumerable:!1}):typeof window<"u"?Object.defineProperty(window,z,{value:S,configurable:!0,writable:!1,enumerable:!1}):typeof self<"u"?Object.defineProperty(self,z,{value:S,configurable:!0,writable:!1,enumerable:!1}):typeof de<"u"&&Object.defineProperty(de,z,{value:S,configurable:!0,writable:!1,enumerable:!1});function Oe(t,e){for(let r=0,i=e.length;r<i;r++){let a=e[r];t.has(a)||(t.add(a),a.extends&&Oe(t,a.extends))}}function Me(t){if(t){let e=new Set;return Oe(e,t),[...e]}}var $t={0:"Symbol.asyncIterator",1:"Symbol.hasInstance",2:"Symbol.isConcatSpreadable",3:"Symbol.iterator",4:"Symbol.match",5:"Symbol.matchAll",6:"Symbol.replace",7:"Symbol.search",8:"Symbol.species",9:"Symbol.split",10:"Symbol.toPrimitive",11:"Symbol.toStringTag",12:"Symbol.unscopables"},Le={[Symbol.asyncIterator]:0,[Symbol.hasInstance]:1,[Symbol.isConcatSpreadable]:2,[Symbol.iterator]:3,[Symbol.match]:4,[Symbol.matchAll]:5,[Symbol.replace]:6,[Symbol.search]:7,[Symbol.species]:8,[Symbol.split]:9,[Symbol.toPrimitive]:10,[Symbol.toStringTag]:11,[Symbol.unscopables]:12},Tt={0:Symbol.asyncIterator,1:Symbol.hasInstance,2:Symbol.isConcatSpreadable,3:Symbol.iterator,4:Symbol.match,5:Symbol.matchAll,6:Symbol.replace,7:Symbol.search,8:Symbol.species,9:Symbol.split,10:Symbol.toPrimitive,11:Symbol.toStringTag,12:Symbol.unscopables},Wt={2:"!0",3:"!1",1:"void 0",0:"null",4:"-0",5:"1/0",6:"-1/0",7:"0/0"},Dt={2:!0,3:!1,1:void 0,0:null,4:-0,5:Number.POSITIVE_INFINITY,6:Number.NEGATIVE_INFINITY,7:Number.NaN},Ne={0:"Error",1:"EvalError",2:"RangeError",3:"ReferenceError",4:"SyntaxError",5:"TypeError",6:"URIError"},Ft={0:Error,1:EvalError,2:RangeError,3:ReferenceError,4:SyntaxError,5:TypeError,6:URIError},s=void 0;function h(t,e,r,i,a,n,o,l,c,u,d,m){return{t,i:e,s:r,l:i,c:a,m:n,p:o,e:l,a:c,f:u,b:d,o:m}}function x(t){return h(2,s,t,s,s,s,s,s,s,s,s,s)}var q=x(2),H=x(3),Ut=x(1),Ot=x(0),Mt=x(4),Lt=x(5),Nt=x(6),Vt=x(7);function ie(t){return t instanceof EvalError?1:t instanceof RangeError?2:t instanceof ReferenceError?3:t instanceof SyntaxError?4:t instanceof TypeError?5:t instanceof URIError?6:0}function jt(t){let e=Ne[ie(t)];return t.name!==e?{name:t.name}:t.constructor.name!==e?{name:t.constructor.name}:{}}function Pe(t,e){let r=jt(t),i=Object.getOwnPropertyNames(t);for(let a=0,n=i.length,o;a<n;a++)o=i[a],o!=="name"&&o!=="message"&&(o==="stack"?e&4&&(r=r||{},r[o]=t[o]):(r=r||{},r[o]=t[o]));return r}function Ve(t){return Object.isFrozen(t)?3:Object.isSealed(t)?2:Object.isExtensible(t)?0:1}function Bt(t){switch(t){case Number.POSITIVE_INFINITY:return Lt;case Number.NEGATIVE_INFINITY:return Nt}return t!==t?Vt:Object.is(t,-0)?Mt:h(0,s,t,s,s,s,s,s,s,s,s,s)}function K(t){return h(1,s,g(t),s,s,s,s,s,s,s,s,s)}function qt(t){return h(3,s,""+t,s,s,s,s,s,s,s,s,s)}function Ht(t){return h(4,t,s,s,s,s,s,s,s,s,s,s)}function Kt(t,e){return h(5,t,e.toISOString(),s,s,s,s,s,s,s,s,s)}function Xt(t,e){return h(6,t,s,s,g(e.source),e.flags,s,s,s,s,s,s)}function Gt(t,e){let r=new Uint8Array(e),i=r.length,a=new Array(i);for(let n=0;n<i;n++)a[n]=r[n];return h(19,t,a,s,s,s,s,s,s,s,s,s)}function Jt(t,e){return h(17,t,Le[e],s,s,s,s,s,s,s,s,s)}function Yt(t,e){return h(18,t,g(_t(e)),s,s,s,s,s,s,s,s,s)}function je(t,e,r){return h(25,t,r,s,g(e),s,s,s,s,s,s,s)}function Zt(t,e,r){return h(9,t,s,e.length,s,s,s,s,r,s,s,Ve(e))}function Qt(t,e){return h(21,t,s,s,s,s,s,s,s,e,s,s)}function er(t,e,r){return h(15,t,s,e.length,e.constructor.name,s,s,s,s,r,e.byteOffset,s)}function tr(t,e,r){return h(16,t,s,e.length,e.constructor.name,s,s,s,s,r,e.byteOffset,s)}function rr(t,e,r){return h(20,t,s,e.byteLength,s,s,s,s,s,r,e.byteOffset,s)}function sr(t,e,r){return h(13,t,ie(e),s,s,g(e.message),r,s,s,s,s,s)}function ir(t,e,r){return h(14,t,ie(e),s,s,g(e.message),r,s,s,s,s,s)}function ar(t,e,r){return h(7,t,s,e,s,s,s,s,r,s,s,s)}function Be(t,e){return h(28,s,s,s,s,s,s,s,[t,e],s,s,s)}function qe(t,e){return h(30,s,s,s,s,s,s,s,[t,e],s,s,s)}function He(t,e,r){return h(31,t,s,s,s,s,s,s,r,e,s,s)}function nr(t,e){return h(32,t,s,s,s,s,s,s,s,e,s,s)}function or(t,e){return h(33,t,s,s,s,s,s,s,s,e,s,s)}function lr(t,e){return h(34,t,s,s,s,s,s,s,s,e,s,s)}var{toString:ae}=Object.prototype;function cr(t,e){return e instanceof Error?`Seroval caught an error during the ${t} process.
  
${e.name}
${e.message}

- For more information, please check the "cause" property of this error.
- If you believe this is an error in Seroval, please submit an issue at https://github.com/lxsmnsyc/seroval/issues/new`:`Seroval caught an error during the ${t} process.

"${ae.call(e)}"

For more information, please check the "cause" property of this error.`}var ne=class extends Error{constructor(e,r){super(cr(e,r)),this.cause=r}},ur=class extends ne{constructor(e){super("parsing",e)}},pr=class extends ne{constructor(t){super("serialization",t)}},hr=class extends ne{constructor(t){super("deserialization",t)}},U=class extends Error{constructor(e){super(`The value ${ae.call(e)} of type "${typeof e}" cannot be parsed/serialized.
      
There are few workarounds for this problem:
- Transform the value in a way that it can be serialized.
- If the reference is present on multiple runtimes (isomorphic), you can use the Reference API to map the references.`),this.value=e}},Ke=class extends Error{constructor(e){super('Unsupported node type "'+e.t+'".')}},Xe=class extends Error{constructor(t){super('Missing plugin for tag "'+t+'".')}},v=class extends Error{constructor(t){super('Missing "'+t+'" instance.')}},dr=class extends Error{constructor(t){super('Missing reference for the value "'+ae.call(t)+'" of type "'+typeof t+'"'),this.value=t}},fr=class extends Error{constructor(e){super('Missing reference for id "'+g(e)+'"')}},gr=class extends Error{constructor(t){super('Unknown TypedArray "'+t+'"')}},mr=class{constructor(t,e){this.value=t,this.replacement=e}},Pr={},yr={},br={0:{},1:{},2:{},3:{},4:{},5:{},6:{}};function X(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve(r){t(r)},reject(r){e(r)}}}function xr(t){return"__SEROVAL_STREAM__"in t}function C(){let t=new Set,e=[],r=!0,i=!0;function a(l){for(let c of t.keys())c.next(l)}function n(l){for(let c of t.keys())c.throw(l)}function o(l){for(let c of t.keys())c.return(l)}return{__SEROVAL_STREAM__:!0,on(l){r&&t.add(l);for(let c=0,u=e.length;c<u;c++){let d=e[c];c===u-1&&!r?i?l.return(d):l.throw(d):l.next(d)}return()=>{r&&t.delete(l)}},next(l){r&&(e.push(l),a(l))},throw(l){r&&(e.push(l),n(l),r=!1,i=!1,t.clear())},return(l){r&&(e.push(l),o(l),r=!1,i=!0,t.clear())}}}function Ar(t){let e=C(),r=t[Symbol.asyncIterator]();async function i(){try{let a=await r.next();a.done?e.return(a.value):(e.next(a.value),await i())}catch(a){e.throw(a)}}return i().catch(()=>{}),e}function vr(t){return()=>{let e=[],r=[],i=0,a=-1,n=!1;function o(){for(let c=0,u=r.length;c<u;c++)r[c].resolve({done:!0,value:void 0})}t.on({next(c){let u=r.shift();u&&u.resolve({done:!1,value:c}),e.push(c)},throw(c){let u=r.shift();u&&u.reject(c),o(),a=e.length,e.push(c),n=!0},return(c){let u=r.shift();u&&u.resolve({done:!0,value:c}),o(),a=e.length,e.push(c)}});function l(){let c=i++,u=e[c];if(c!==a)return{done:!1,value:u};if(n)throw u;return{done:!0,value:u}}return{[Symbol.asyncIterator](){return this},async next(){if(a===-1){let c=i++;if(c>=e.length){let u=X();return r.push(u),await u.promise}return{done:!1,value:e[c]}}return i>a?{done:!0,value:void 0}:l()}}}}function Ge(t){let e=[],r=-1,i=-1,a=t[Symbol.iterator]();for(;;)try{let n=a.next();if(e.push(n.value),n.done){i=e.length-1;break}}catch(n){r=e.length,e.push(n)}return{v:e,t:r,d:i}}function Sr(t){return()=>{let e=0;return{[Symbol.iterator](){return this},next(){if(e>t.d)return{done:!0,value:s};let r=e++,i=t.v[r];if(r===t.t)throw i;return{done:r===t.d,value:i}}}}}var wr=class{constructor(e){this.marked=new Set,this.plugins=e.plugins,this.features=47^(e.disabledFeatures||0),this.refs=e.refs||new Map}markRef(e){this.marked.add(e)}isMarked(e){return this.marked.has(e)}getIndexedValue(e){let r=this.refs.get(e);if(r!=null)return this.markRef(r),{type:1,value:Ht(r)};let i=this.refs.size;return this.refs.set(e,i),{type:0,value:i}}getReference(e){let r=this.getIndexedValue(e);return r.type===1?r:Ue(e)?{type:2,value:Yt(r.value,e)}:r}parseWellKnownSymbol(e){let r=this.getReference(e);return r.type!==0?r.value:(P(e in Le,new U(e)),Jt(r.value,e))}parseSpecialReference(e){let r=this.getIndexedValue(br[e]);return r.type===1?r.value:h(26,r.value,e,s,s,s,s,s,s,s,s,s)}parseIteratorFactory(){let e=this.getIndexedValue(Pr);return e.type===1?e.value:h(27,e.value,s,s,s,s,s,s,s,this.parseWellKnownSymbol(Symbol.iterator),s,s)}parseAsyncIteratorFactory(){let e=this.getIndexedValue(yr);return e.type===1?e.value:h(29,e.value,s,s,s,s,s,s,[this.parseSpecialReference(1),this.parseWellKnownSymbol(Symbol.asyncIterator)],s,s,s)}createObjectNode(e,r,i,a){return h(i?11:10,e,s,s,s,s,a,s,s,s,s,Ve(r))}createMapNode(e,r,i,a){return h(8,e,s,s,s,s,s,{k:r,v:i,s:a},s,this.parseSpecialReference(0),s,s)}createPromiseConstructorNode(e){return h(22,e,s,s,s,s,s,s,s,this.parseSpecialReference(1),s,s)}createAbortSignalConstructorNode(e){return h(35,e,s,s,s,s,s,s,s,this.parseSpecialReference(5),s,s)}};function zr(t){switch(t){case"Int8Array":return Int8Array;case"Int16Array":return Int16Array;case"Int32Array":return Int32Array;case"Uint8Array":return Uint8Array;case"Uint16Array":return Uint16Array;case"Uint32Array":return Uint32Array;case"Uint8ClampedArray":return Uint8ClampedArray;case"Float32Array":return Float32Array;case"Float64Array":return Float64Array;case"BigInt64Array":return BigInt64Array;case"BigUint64Array":return BigUint64Array;default:throw new gr(t)}}function ye(t,e){switch(e){case 3:return Object.freeze(t);case 1:return Object.preventExtensions(t);case 2:return Object.seal(t);default:return t}}var Rr=class{constructor(e){this.plugins=e.plugins,this.refs=e.refs||new Map}deserializeReference(e){return this.assignIndexedValue(e.i,Ct(A(e.s)))}deserializeArray(e){let r=e.l,i=this.assignIndexedValue(e.i,new Array(r)),a;for(let n=0;n<r;n++)a=e.a[n],a&&(i[n]=this.deserialize(a));return ye(i,e.o),i}deserializeProperties(e,r){let i=e.s;if(i){let a=e.k,n=e.v;for(let o=0,l;o<i;o++)l=a[o],typeof l=="string"?r[A(l)]=this.deserialize(n[o]):r[this.deserialize(l)]=this.deserialize(n[o])}return r}deserializeObject(e){let r=this.assignIndexedValue(e.i,e.t===10?{}:Object.create(null));return this.deserializeProperties(e.p,r),ye(r,e.o),r}deserializeDate(e){return this.assignIndexedValue(e.i,new Date(e.s))}deserializeRegExp(e){return this.assignIndexedValue(e.i,new RegExp(A(e.c),e.m))}deserializeSet(e){let r=this.assignIndexedValue(e.i,new Set),i=e.a;for(let a=0,n=e.l;a<n;a++)r.add(this.deserialize(i[a]));return r}deserializeMap(e){let r=this.assignIndexedValue(e.i,new Map),i=e.e.k,a=e.e.v;for(let n=0,o=e.e.s;n<o;n++)r.set(this.deserialize(i[n]),this.deserialize(a[n]));return r}deserializeArrayBuffer(e){let r=new Uint8Array(e.s);return this.assignIndexedValue(e.i,r.buffer)}deserializeTypedArray(e){let r=zr(e.c),i=this.deserialize(e.f);return this.assignIndexedValue(e.i,new r(i,e.b,e.l))}deserializeDataView(e){let r=this.deserialize(e.f);return this.assignIndexedValue(e.i,new DataView(r,e.b,e.l))}deserializeDictionary(e,r){if(e.p){let i=this.deserializeProperties(e.p,{});Object.assign(r,i)}return r}deserializeAggregateError(e){let r=this.assignIndexedValue(e.i,new AggregateError([],A(e.m)));return this.deserializeDictionary(e,r)}deserializeError(e){let r=Ft[e.s],i=this.assignIndexedValue(e.i,new r(A(e.m)));return this.deserializeDictionary(e,i)}deserializePromise(e){let r=X(),i=this.assignIndexedValue(e.i,r),a=this.deserialize(e.f);return e.s?r.resolve(a):r.reject(a),i.promise}deserializeBoxed(e){return this.assignIndexedValue(e.i,Object(this.deserialize(e.f)))}deserializePlugin(e){let r=this.plugins;if(r){let i=A(e.c);for(let a=0,n=r.length;a<n;a++){let o=r[a];if(o.tag===i)return this.assignIndexedValue(e.i,o.deserialize(e.s,this,{id:e.i}))}}throw new Xe(e.c)}deserializePromiseConstructor(e){return this.assignIndexedValue(e.i,X()).promise}deserializePromiseResolve(e){let r=this.refs.get(e.i);P(r,new v("Promise")),r.resolve(this.deserialize(e.a[1]))}deserializePromiseReject(e){let r=this.refs.get(e.i);P(r,new v("Promise")),r.reject(this.deserialize(e.a[1]))}deserializeIteratorFactoryInstance(e){this.deserialize(e.a[0]);let r=this.deserialize(e.a[1]);return Sr(r)}deserializeAsyncIteratorFactoryInstance(e){this.deserialize(e.a[0]);let r=this.deserialize(e.a[1]);return vr(r)}deserializeStreamConstructor(e){let r=this.assignIndexedValue(e.i,C()),i=e.a.length;if(i)for(let a=0;a<i;a++)this.deserialize(e.a[a]);return r}deserializeStreamNext(e){let r=this.refs.get(e.i);P(r,new v("Stream")),r.next(this.deserialize(e.f))}deserializeStreamThrow(e){let r=this.refs.get(e.i);P(r,new v("Stream")),r.throw(this.deserialize(e.f))}deserializeStreamReturn(e){let r=this.refs.get(e.i);P(r,new v("Stream")),r.return(this.deserialize(e.f))}deserializeIteratorFactory(e){this.deserialize(e.f)}deserializeAsyncIteratorFactory(e){this.deserialize(e.a[1])}deserializeAbortSignalConstructor(e){return this.assignIndexedValue(e.i,new AbortController).signal}deserializeAbortSignalAbort(e){let r=this.refs.get(e.i);P(r,new v("AbortSignal")),r.abort(this.deserialize(e.a[1]))}deserializeAbortSignalSync(e){return this.assignIndexedValue(e.i,AbortSignal.abort(this.deserialize(e.f)))}deserialize(e){try{switch(e.t){case 2:return Dt[e.s];case 0:return e.s;case 1:return A(e.s);case 3:return BigInt(e.s);case 4:return this.refs.get(e.i);case 18:return this.deserializeReference(e);case 9:return this.deserializeArray(e);case 10:case 11:return this.deserializeObject(e);case 5:return this.deserializeDate(e);case 6:return this.deserializeRegExp(e);case 7:return this.deserializeSet(e);case 8:return this.deserializeMap(e);case 19:return this.deserializeArrayBuffer(e);case 16:case 15:return this.deserializeTypedArray(e);case 20:return this.deserializeDataView(e);case 14:return this.deserializeAggregateError(e);case 13:return this.deserializeError(e);case 12:return this.deserializePromise(e);case 17:return Tt[e.s];case 21:return this.deserializeBoxed(e);case 25:return this.deserializePlugin(e);case 22:return this.deserializePromiseConstructor(e);case 23:return this.deserializePromiseResolve(e);case 24:return this.deserializePromiseReject(e);case 28:return this.deserializeIteratorFactoryInstance(e);case 30:return this.deserializeAsyncIteratorFactoryInstance(e);case 31:return this.deserializeStreamConstructor(e);case 32:return this.deserializeStreamNext(e);case 33:return this.deserializeStreamThrow(e);case 34:return this.deserializeStreamReturn(e);case 27:return this.deserializeIteratorFactory(e);case 29:return this.deserializeAsyncIteratorFactory(e);case 36:return this.deserializeAbortSignalAbort(e);case 35:return this.deserializeAbortSignalConstructor(e);case 37:return this.deserializeAbortSignalSync(e);default:throw new Ke(e)}}catch(r){throw new hr(r)}}},kr=/^[$A-Z_][0-9A-Z_$]*$/i;function be(t){let e=t[0];return(e==="$"||e==="_"||e>="A"&&e<="Z"||e>="a"&&e<="z")&&kr.test(t)}function R(t){switch(t.t){case 0:return t.s+"="+t.v;case 2:return t.s+".set("+t.k+","+t.v+")";case 1:return t.s+".add("+t.v+")";case 3:return t.s+".delete("+t.k+")"}}function Ir(t){let e=[],r=t[0];for(let i=1,a=t.length,n,o=r;i<a;i++)n=t[i],n.t===0&&n.v===o.v?r={t:0,s:n.s,k:s,v:R(r)}:n.t===2&&n.s===o.s?r={t:2,s:R(r),k:n.k,v:n.v}:n.t===1&&n.s===o.s?r={t:1,s:R(r),k:s,v:n.v}:n.t===3&&n.s===o.s?r={t:3,s:R(r),k:n.k,v:s}:(e.push(r),r=n),o=n;return e.push(r),e}function xe(t){if(t.length){let e="",r=Ir(t);for(let i=0,a=r.length;i<a;i++)e+=R(r[i])+",";return e}return s}var Er="Object.create(null)",_r="new Set",Cr="new Map",$r="Promise.resolve",Tr="Promise.reject",Wr={3:"Object.freeze",2:"Object.seal",1:"Object.preventExtensions",0:s},Dr=class{constructor(e){this.stack=[],this.flags=[],this.assignments=[],this.plugins=e.plugins,this.features=e.features,this.marked=new Set(e.markedRefs)}createFunction(e,r){return this.features&2?(e.length===1?e[0]:"("+e.join(",")+")")+"=>"+(r.startsWith("{")?"("+r+")":r):"function("+e.join(",")+"){return "+r+"}"}createEffectfulFunction(e,r){return this.features&2?(e.length===1?e[0]:"("+e.join(",")+")")+"=>{"+r+"}":"function("+e.join(",")+"){"+r+"}"}markRef(e){this.marked.add(e)}isMarked(e){return this.marked.has(e)}pushObjectFlag(e,r){e!==0&&(this.markRef(r),this.flags.push({type:e,value:this.getRefParam(r)}))}resolveFlags(){let e="";for(let r=0,i=this.flags,a=i.length;r<a;r++){let n=i[r];e+=Wr[n.type]+"("+n.value+"),"}return e}resolvePatches(){let e=xe(this.assignments),r=this.resolveFlags();return e?r?e+r:e:r}createAssignment(e,r){this.assignments.push({t:0,s:e,k:s,v:r})}createAddAssignment(e,r){this.assignments.push({t:1,s:this.getRefParam(e),k:s,v:r})}createSetAssignment(e,r,i){this.assignments.push({t:2,s:this.getRefParam(e),k:r,v:i})}createDeleteAssignment(e,r){this.assignments.push({t:3,s:this.getRefParam(e),k:r,v:s})}createArrayAssign(e,r,i){this.createAssignment(this.getRefParam(e)+"["+r+"]",i)}createObjectAssign(e,r,i){this.createAssignment(this.getRefParam(e)+"."+r,i)}isIndexedValueInStack(e){return e.t===4&&this.stack.includes(e.i)}serializeReference(e){return this.assignIndexedValue(e.i,z+'.get("'+e.s+'")')}serializeArrayItem(e,r,i){return r?this.isIndexedValueInStack(r)?(this.markRef(e),this.createArrayAssign(e,i,this.getRefParam(r.i)),""):this.serialize(r):""}serializeArray(e){let r=e.i;if(e.l){this.stack.push(r);let i=e.a,a=this.serializeArrayItem(r,i[0],0),n=a==="";for(let o=1,l=e.l,c;o<l;o++)c=this.serializeArrayItem(r,i[o],o),a+=","+c,n=c==="";return this.stack.pop(),this.pushObjectFlag(e.o,e.i),this.assignIndexedValue(r,"["+a+(n?",]":"]"))}return this.assignIndexedValue(r,"[]")}serializeProperty(e,r,i){if(typeof r=="string"){let a=Number(r),n=a>=0&&a.toString()===r||be(r);if(this.isIndexedValueInStack(i)){let o=this.getRefParam(i.i);return this.markRef(e.i),n&&a!==a?this.createObjectAssign(e.i,r,o):this.createArrayAssign(e.i,n?r:'"'+r+'"',o),""}return(n?r:'"'+r+'"')+":"+this.serialize(i)}return"["+this.serialize(r)+"]:"+this.serialize(i)}serializeProperties(e,r){let i=r.s;if(i){let a=r.k,n=r.v;this.stack.push(e.i);let o=this.serializeProperty(e,a[0],n[0]);for(let l=1,c=o;l<i;l++)c=this.serializeProperty(e,a[l],n[l]),o+=(c&&o&&",")+c;return this.stack.pop(),"{"+o+"}"}return"{}"}serializeObject(e){return this.pushObjectFlag(e.o,e.i),this.assignIndexedValue(e.i,this.serializeProperties(e,e.p))}serializeWithObjectAssign(e,r,i){let a=this.serializeProperties(e,r);return a!=="{}"?"Object.assign("+i+","+a+")":i}serializeStringKeyAssignment(e,r,i,a){let n=this.serialize(a),o=Number(i),l=o>=0&&o.toString()===i||be(i);if(this.isIndexedValueInStack(a))l&&o!==o?this.createObjectAssign(e.i,i,n):this.createArrayAssign(e.i,l?i:'"'+i+'"',n);else{let c=this.assignments;this.assignments=r,l&&o!==o?this.createObjectAssign(e.i,i,n):this.createArrayAssign(e.i,l?i:'"'+i+'"',n),this.assignments=c}}serializeAssignment(e,r,i,a){if(typeof i=="string")this.serializeStringKeyAssignment(e,r,i,a);else{let n=this.stack;this.stack=[];let o=this.serialize(a);this.stack=n;let l=this.assignments;this.assignments=r,this.createArrayAssign(e.i,this.serialize(i),o),this.assignments=l}}serializeAssignments(e,r){let i=r.s;if(i){let a=[],n=r.k,o=r.v;this.stack.push(e.i);for(let l=0;l<i;l++)this.serializeAssignment(e,a,n[l],o[l]);return this.stack.pop(),xe(a)}return s}serializeDictionary(e,r){if(e.p)if(this.features&8)r=this.serializeWithObjectAssign(e,e.p,r);else{this.markRef(e.i);let i=this.serializeAssignments(e,e.p);if(i)return"("+this.assignIndexedValue(e.i,r)+","+i+this.getRefParam(e.i)+")"}return this.assignIndexedValue(e.i,r)}serializeNullConstructor(e){return this.pushObjectFlag(e.o,e.i),this.serializeDictionary(e,Er)}serializeDate(e){return this.assignIndexedValue(e.i,'new Date("'+e.s+'")')}serializeRegExp(e){return this.assignIndexedValue(e.i,"/"+e.c+"/"+e.m)}serializeSetItem(e,r){return this.isIndexedValueInStack(r)?(this.markRef(e),this.createAddAssignment(e,this.getRefParam(r.i)),""):this.serialize(r)}serializeSet(e){let r=_r,i=e.l,a=e.i;if(i){let n=e.a;this.stack.push(a);let o=this.serializeSetItem(a,n[0]);for(let l=1,c=o;l<i;l++)c=this.serializeSetItem(a,n[l]),o+=(c&&o&&",")+c;this.stack.pop(),o&&(r+="(["+o+"])")}return this.assignIndexedValue(a,r)}serializeMapEntry(e,r,i,a){if(this.isIndexedValueInStack(r)){let n=this.getRefParam(r.i);if(this.markRef(e),this.isIndexedValueInStack(i)){let l=this.getRefParam(i.i);return this.createSetAssignment(e,n,l),""}if(i.t!==4&&i.i!=null&&this.isMarked(i.i)){let l="("+this.serialize(i)+",["+a+","+a+"])";return this.createSetAssignment(e,n,this.getRefParam(i.i)),this.createDeleteAssignment(e,a),l}let o=this.stack;return this.stack=[],this.createSetAssignment(e,n,this.serialize(i)),this.stack=o,""}if(this.isIndexedValueInStack(i)){let n=this.getRefParam(i.i);if(this.markRef(e),r.t!==4&&r.i!=null&&this.isMarked(r.i)){let l="("+this.serialize(r)+",["+a+","+a+"])";return this.createSetAssignment(e,this.getRefParam(r.i),n),this.createDeleteAssignment(e,a),l}let o=this.stack;return this.stack=[],this.createSetAssignment(e,this.serialize(r),n),this.stack=o,""}return"["+this.serialize(r)+","+this.serialize(i)+"]"}serializeMap(e){let r=Cr,i=e.e.s,a=e.i,n=e.f,o=this.getRefParam(n.i);if(i){let l=e.e.k,c=e.e.v;this.stack.push(a);let u=this.serializeMapEntry(a,l[0],c[0],o);for(let d=1,m=u;d<i;d++)m=this.serializeMapEntry(a,l[d],c[d],o),u+=(m&&u&&",")+m;this.stack.pop(),u&&(r+="(["+u+"])")}return n.t===26&&(this.markRef(n.i),r="("+this.serialize(n)+","+r+")"),this.assignIndexedValue(a,r)}serializeArrayBuffer(e){let r="new Uint8Array(",i=e.s,a=i.length;if(a){r+="["+i[0];for(let n=1;n<a;n++)r+=","+i[n];r+="]"}return this.assignIndexedValue(e.i,r+").buffer")}serializeTypedArray(e){return this.assignIndexedValue(e.i,"new "+e.c+"("+this.serialize(e.f)+","+e.b+","+e.l+")")}serializeDataView(e){return this.assignIndexedValue(e.i,"new DataView("+this.serialize(e.f)+","+e.b+","+e.l+")")}serializeAggregateError(e){let r=e.i;this.stack.push(r);let i=this.serializeDictionary(e,'new AggregateError([],"'+e.m+'")');return this.stack.pop(),i}serializeError(e){return this.serializeDictionary(e,"new "+Ne[e.s]+'("'+e.m+'")')}serializePromise(e){let r,i=e.f,a=e.i,n=e.s?$r:Tr;if(this.isIndexedValueInStack(i)){let o=this.getRefParam(i.i);r=n+(e.s?"().then("+this.createFunction([],o)+")":"().catch("+this.createEffectfulFunction([],"throw "+o)+")")}else{this.stack.push(a);let o=this.serialize(i);this.stack.pop(),r=n+"("+o+")"}return this.assignIndexedValue(a,r)}serializeWellKnownSymbol(e){return this.assignIndexedValue(e.i,$t[e.s])}serializeBoxed(e){return this.assignIndexedValue(e.i,"Object("+this.serialize(e.f)+")")}serializePlugin(e){let r=this.plugins;if(r)for(let i=0,a=r.length;i<a;i++){let n=r[i];if(n.tag===e.c)return this.assignIndexedValue(e.i,n.serialize(e.s,this,{id:e.i}))}throw new Xe(e.c)}getConstructor(e){let r=this.serialize(e);return r===this.getRefParam(e.i)?r:"("+r+")"}serializePromiseConstructor(e){return this.assignIndexedValue(e.i,this.getConstructor(e.f)+"()")}serializePromiseResolve(e){return this.getConstructor(e.a[0])+"("+this.getRefParam(e.i)+","+this.serialize(e.a[1])+")"}serializePromiseReject(e){return this.getConstructor(e.a[0])+"("+this.getRefParam(e.i)+","+this.serialize(e.a[1])+")"}serializeSpecialReferenceValue(e){switch(e){case 0:return"[]";case 1:return this.createFunction(["s","f","p"],"((p=new Promise("+this.createEffectfulFunction(["a","b"],"s=a,f=b")+")).s=s,p.f=f,p)");case 2:return this.createEffectfulFunction(["p","d"],'p.s(d),p.status="success",p.value=d;delete p.s;delete p.f');case 3:return this.createEffectfulFunction(["p","d"],'p.f(d),p.status="failure",p.value=d;delete p.s;delete p.f');case 4:return this.createFunction(["b","a","s","l","p","f","e","n"],"(b=[],a=!0,s=!1,l=[],p=0,f="+this.createEffectfulFunction(["v","m","x"],"for(x=0;x<p;x++)l[x]&&l[x][m](v)")+",n="+this.createEffectfulFunction(["o","x","z","c"],'for(x=0,z=b.length;x<z;x++)(c=b[x],(!a&&x===z-1)?o[s?"return":"throw"](c):o.next(c))')+",e="+this.createFunction(["o","t"],"(a&&(l[t=p++]=o),n(o),"+this.createEffectfulFunction([],"a&&(l[t]=void 0)")+")")+",{__SEROVAL_STREAM__:!0,on:"+this.createFunction(["o"],"e(o)")+",next:"+this.createEffectfulFunction(["v"],'a&&(b.push(v),f(v,"next"))')+",throw:"+this.createEffectfulFunction(["v"],'a&&(b.push(v),f(v,"throw"),a=s=!1,l.length=0)')+",return:"+this.createEffectfulFunction(["v"],'a&&(b.push(v),f(v,"return"),a=!1,s=!0,l.length=0)')+"})");case 5:return this.createFunction(["a","s"],"((s=(a=new AbortController).signal).a=a,s)");case 6:return this.createEffectfulFunction(["s","r"],"s.a.abort(r);delete s.a");default:return""}}serializeSpecialReference(e){return this.assignIndexedValue(e.i,this.serializeSpecialReferenceValue(e.s))}serializeIteratorFactory(e){let r="",i=!1;return e.f.t!==4&&(this.markRef(e.f.i),r="("+this.serialize(e.f)+",",i=!0),r+=this.assignIndexedValue(e.i,this.createFunction(["s"],this.createFunction(["i","c","d","t"],"(i=0,t={["+this.getRefParam(e.f.i)+"]:"+this.createFunction([],"t")+",next:"+this.createEffectfulFunction([],"if(i>s.d)return{done:!0,value:void 0};if(d=s.v[c=i++],c===s.t)throw d;return{done:c===s.d,value:d}")+"})"))),i&&(r+=")"),r}serializeIteratorFactoryInstance(e){return this.getConstructor(e.a[0])+"("+this.serialize(e.a[1])+")"}serializeAsyncIteratorFactory(e){let r=e.a[0],i=e.a[1],a="";r.t!==4&&(this.markRef(r.i),a+="("+this.serialize(r)),i.t!==4&&(this.markRef(i.i),a+=(a?",":"(")+this.serialize(i)),a&&(a+=",");let n=this.assignIndexedValue(e.i,this.createFunction(["s"],this.createFunction(["b","c","p","d","e","t","f"],"(b=[],c=0,p=[],d=-1,e=!1,f="+this.createEffectfulFunction(["i","l"],"for(i=0,l=p.length;i<l;i++)p[i].s({done:!0,value:void 0})")+",s.on({next:"+this.createEffectfulFunction(["v","t"],"if(t=p.shift())t.s({done:!1,value:v});b.push(v)")+",throw:"+this.createEffectfulFunction(["v","t"],"if(t=p.shift())t.f(v);f(),d=b.length,e=!0,b.push(v)")+",return:"+this.createEffectfulFunction(["v","t"],"if(t=p.shift())t.s({done:!0,value:v});f(),d=b.length,b.push(v)")+"}),t={["+this.getRefParam(i.i)+"]:"+this.createFunction([],"t")+",next:"+this.createEffectfulFunction(["i","t","v"],"if(d===-1){return((i=c++)>=b.length)?(p.push(t="+this.getRefParam(r.i)+"()),t):{done:!1,value:b[i]}}if(c>d)return{done:!0,value:void 0};if(v=b[i=c++],i!==d)return{done:!1,value:v};if(e)throw v;return{done:!0,value:v}")+"})")));return a?a+n+")":n}serializeAsyncIteratorFactoryInstance(e){return this.getConstructor(e.a[0])+"("+this.serialize(e.a[1])+")"}serializeStreamConstructor(e){let r=this.assignIndexedValue(e.i,this.getConstructor(e.f)+"()"),i=e.a.length;if(i){let a=this.serialize(e.a[0]);for(let n=1;n<i;n++)a+=","+this.serialize(e.a[n]);return"("+r+","+a+","+this.getRefParam(e.i)+")"}return r}serializeStreamNext(e){return this.getRefParam(e.i)+".next("+this.serialize(e.f)+")"}serializeStreamThrow(e){return this.getRefParam(e.i)+".throw("+this.serialize(e.f)+")"}serializeStreamReturn(e){return this.getRefParam(e.i)+".return("+this.serialize(e.f)+")"}serializeAbortSignalSync(e){return this.assignIndexedValue(e.i,"AbortSignal.abort("+this.serialize(e.f)+")")}serializeAbortSignalConstructor(e){return this.assignIndexedValue(e.i,this.getConstructor(e.f)+"()")}serializeAbortSignalAbort(e){return this.getConstructor(e.a[0])+"("+this.getRefParam(e.i)+","+this.serialize(e.a[1])+")"}serialize(e){try{switch(e.t){case 2:return Wt[e.s];case 0:return""+e.s;case 1:return'"'+e.s+'"';case 3:return e.s+"n";case 4:return this.getRefParam(e.i);case 18:return this.serializeReference(e);case 9:return this.serializeArray(e);case 10:return this.serializeObject(e);case 11:return this.serializeNullConstructor(e);case 5:return this.serializeDate(e);case 6:return this.serializeRegExp(e);case 7:return this.serializeSet(e);case 8:return this.serializeMap(e);case 19:return this.serializeArrayBuffer(e);case 16:case 15:return this.serializeTypedArray(e);case 20:return this.serializeDataView(e);case 14:return this.serializeAggregateError(e);case 13:return this.serializeError(e);case 12:return this.serializePromise(e);case 17:return this.serializeWellKnownSymbol(e);case 21:return this.serializeBoxed(e);case 22:return this.serializePromiseConstructor(e);case 23:return this.serializePromiseResolve(e);case 24:return this.serializePromiseReject(e);case 25:return this.serializePlugin(e);case 26:return this.serializeSpecialReference(e);case 27:return this.serializeIteratorFactory(e);case 28:return this.serializeIteratorFactoryInstance(e);case 29:return this.serializeAsyncIteratorFactory(e);case 30:return this.serializeAsyncIteratorFactoryInstance(e);case 31:return this.serializeStreamConstructor(e);case 32:return this.serializeStreamNext(e);case 33:return this.serializeStreamThrow(e);case 34:return this.serializeStreamReturn(e);case 36:return this.serializeAbortSignalAbort(e);case 35:return this.serializeAbortSignalConstructor(e);case 37:return this.serializeAbortSignalSync(e);default:throw new Ke(e)}}catch(r){throw new pr(r)}}},Fr=class extends Dr{constructor(t){super(t),this.mode="cross",this.scopeId=t.scopeId}getRefParam(t){return F+"["+t+"]"}assignIndexedValue(t,e){return this.getRefParam(t)+"="+e}serializeTop(t){let e=this.serialize(t),r=t.i;if(r==null)return e;let i=this.resolvePatches(),a=this.getRefParam(r),n=this.scopeId==null?"":F,o=i?"("+e+","+i+a+")":e;if(n==="")return t.t===10&&!i?"("+o+")":o;let l=this.scopeId==null?"()":"("+F+'["'+g(this.scopeId)+'"])';return"("+this.createFunction([n],o)+")"+l}},Ur=class extends wr{parseItems(t){let e=[];for(let r=0,i=t.length;r<i;r++)r in t&&(e[r]=this.parse(t[r]));return e}parseArray(t,e){return Zt(t,e,this.parseItems(e))}parseProperties(t){let e=Object.entries(t),r=[],i=[];for(let n=0,o=e.length;n<o;n++)r.push(g(e[n][0])),i.push(this.parse(e[n][1]));let a=Symbol.iterator;return a in t&&(r.push(this.parseWellKnownSymbol(a)),i.push(Be(this.parseIteratorFactory(),this.parse(Ge(t))))),a=Symbol.asyncIterator,a in t&&(r.push(this.parseWellKnownSymbol(a)),i.push(qe(this.parseAsyncIteratorFactory(),this.parse(C())))),a=Symbol.toStringTag,a in t&&(r.push(this.parseWellKnownSymbol(a)),i.push(K(t[a]))),a=Symbol.isConcatSpreadable,a in t&&(r.push(this.parseWellKnownSymbol(a)),i.push(t[a]?q:H)),{k:r,v:i,s:r.length}}parsePlainObject(t,e,r){return this.createObjectNode(t,e,r,this.parseProperties(e))}parseBoxed(t,e){return Qt(t,this.parse(e.valueOf()))}parseTypedArray(t,e){return er(t,e,this.parse(e.buffer))}parseBigIntTypedArray(t,e){return tr(t,e,this.parse(e.buffer))}parseDataView(t,e){return rr(t,e,this.parse(e.buffer))}parseError(t,e){let r=Pe(e,this.features);return sr(t,e,r?this.parseProperties(r):s)}parseAggregateError(t,e){let r=Pe(e,this.features);return ir(t,e,r?this.parseProperties(r):s)}parseMap(t,e){let r=[],i=[];for(let[a,n]of e.entries())r.push(this.parse(a)),i.push(this.parse(n));return this.createMapNode(t,r,i,e.size)}parseSet(t,e){let r=[];for(let i of e.keys())r.push(this.parse(i));return ar(t,e.size,r)}parsePlugin(t,e){let r=this.plugins;if(r)for(let i=0,a=r.length;i<a;i++){let n=r[i];if(n.parse.sync&&n.test(e))return je(t,n.tag,n.parse.sync(e,this,{id:t}))}}parseStream(t,e){return He(t,this.parseSpecialReference(4),[])}parsePromise(t,e){return this.createPromiseConstructorNode(t)}parseAbortSignalSync(t,e){return h(37,t,s,s,s,s,s,s,s,this.parse(e.reason),s,s)}parseAbortSignal(t,e){return e.aborted?this.parseAbortSignalSync(t,e):this.createAbortSignalConstructorNode(t)}parseObject(t,e){if(Array.isArray(e))return this.parseArray(t,e);if(xr(e))return this.parseStream(t,e);let r=e.constructor;if(r===mr)return this.parse(e.replacement);let i=this.parsePlugin(t,e);if(i)return i;switch(r){case Object:return this.parsePlainObject(t,e,!1);case void 0:return this.parsePlainObject(t,e,!0);case Date:return Kt(t,e);case RegExp:return Xt(t,e);case Error:case EvalError:case RangeError:case ReferenceError:case SyntaxError:case TypeError:case URIError:return this.parseError(t,e);case Number:case Boolean:case String:case BigInt:return this.parseBoxed(t,e);case ArrayBuffer:return Gt(t,e);case Int8Array:case Int16Array:case Int32Array:case Uint8Array:case Uint16Array:case Uint32Array:case Uint8ClampedArray:case Float32Array:case Float64Array:return this.parseTypedArray(t,e);case DataView:return this.parseDataView(t,e);case Map:return this.parseMap(t,e);case Set:return this.parseSet(t,e)}if(r===Promise||e instanceof Promise)return this.parsePromise(t,e);let a=this.features;if(a&32&&typeof AbortSignal<"u"&&r===AbortSignal)return this.parseAbortSignal(t,e);if(a&16)switch(r){case BigInt64Array:case BigUint64Array:return this.parseBigIntTypedArray(t,e)}if(a&1&&typeof AggregateError<"u"&&(r===AggregateError||e instanceof AggregateError))return this.parseAggregateError(t,e);if(e instanceof Error)return this.parseError(t,e);if(Symbol.iterator in e||Symbol.asyncIterator in e)return this.parsePlainObject(t,e,!!r);throw new U(e)}parseFunction(t){let e=this.getReference(t);if(e.type!==0)return e.value;let r=this.parsePlugin(e.value,t);if(r)return r;throw new U(t)}parse(t){try{switch(typeof t){case"boolean":return t?q:H;case"undefined":return Ut;case"string":return K(t);case"number":return Bt(t);case"bigint":return qt(t);case"object":{if(t){let e=this.getReference(t);return e.type===0?this.parseObject(e.value,t):e.value}return Ot}case"symbol":return this.parseWellKnownSymbol(t);case"function":return this.parseFunction(t);default:throw new U(t)}}catch(e){throw new ur(e)}}},Or=class extends Ur{constructor(e){super(e),this.alive=!0,this.pending=0,this.initial=!0,this.buffer=[],this.onParseCallback=e.onParse,this.onErrorCallback=e.onError,this.onDoneCallback=e.onDone}onParseInternal(e,r){try{this.onParseCallback(e,r)}catch(i){this.onError(i)}}flush(){for(let e=0,r=this.buffer.length;e<r;e++)this.onParseInternal(this.buffer[e],!1)}onParse(e){this.initial?this.buffer.push(e):this.onParseInternal(e,!1)}onError(e){if(this.onErrorCallback)this.onErrorCallback(e);else throw e}onDone(){this.onDoneCallback&&this.onDoneCallback()}pushPendingState(){this.pending++}popPendingState(){--this.pending<=0&&this.onDone()}parseProperties(e){let r=Object.entries(e),i=[],a=[];for(let o=0,l=r.length;o<l;o++)i.push(g(r[o][0])),a.push(this.parse(r[o][1]));let n=Symbol.iterator;return n in e&&(i.push(this.parseWellKnownSymbol(n)),a.push(Be(this.parseIteratorFactory(),this.parse(Ge(e))))),n=Symbol.asyncIterator,n in e&&(i.push(this.parseWellKnownSymbol(n)),a.push(qe(this.parseAsyncIteratorFactory(),this.parse(Ar(e))))),n=Symbol.toStringTag,n in e&&(i.push(this.parseWellKnownSymbol(n)),a.push(K(e[n]))),n=Symbol.isConcatSpreadable,n in e&&(i.push(this.parseWellKnownSymbol(n)),a.push(e[n]?q:H)),{k:i,v:a,s:i.length}}parsePromise(e,r){return r.then(i=>{let a=this.parseWithError(i);a&&this.onParse(h(23,e,s,s,s,s,s,s,[this.parseSpecialReference(2),a],s,s,s)),this.popPendingState()},i=>{if(this.alive){let a=this.parseWithError(i);a&&this.onParse(h(24,e,s,s,s,s,s,s,[this.parseSpecialReference(3),a],s,s,s))}this.popPendingState()}),this.pushPendingState(),this.createPromiseConstructorNode(e)}parsePlugin(e,r){let i=this.plugins;if(i)for(let a=0,n=i.length;a<n;a++){let o=i[a];if(o.parse.stream&&o.test(r))return je(e,o.tag,o.parse.stream(r,this,{id:e}))}return s}parseStream(e,r){let i=He(e,this.parseSpecialReference(4),[]);return this.pushPendingState(),r.on({next:a=>{if(this.alive){let n=this.parseWithError(a);n&&this.onParse(nr(e,n))}},throw:a=>{if(this.alive){let n=this.parseWithError(a);n&&this.onParse(or(e,n))}this.popPendingState()},return:a=>{if(this.alive){let n=this.parseWithError(a);n&&this.onParse(lr(e,n))}this.popPendingState()}}),i}handleAbortSignal(e,r){if(this.alive){let i=this.parseWithError(r.reason);i&&this.onParse(h(36,e,s,s,s,s,s,s,[this.parseSpecialReference(6),i],s,s,s))}this.popPendingState()}parseAbortSignal(e,r){return r.aborted?this.parseAbortSignalSync(e,r):(this.pushPendingState(),r.addEventListener("abort",this.handleAbortSignal.bind(this,e,r),{once:!0}),this.createAbortSignalConstructorNode(e))}parseWithError(e){try{return this.parse(e)}catch(r){return this.onError(r),s}}start(e){let r=this.parseWithError(e);r&&(this.onParseInternal(r,!0),this.initial=!1,this.flush(),this.pending<=0&&this.destroy())}destroy(){this.alive&&(this.onDone(),this.alive=!1)}isAlive(){return this.alive}},Mr=class extends Or{constructor(){super(...arguments),this.mode="cross"}};function Lr(t,e){let r=Me(e.plugins),i=new Mr({plugins:r,refs:e.refs,disabledFeatures:e.disabledFeatures,onParse(a,n){let o=new Fr({plugins:r,features:i.features,scopeId:e.scopeId,markedRefs:i.marked}),l;try{l=o.serializeTop(a)}catch(c){e.onError&&e.onError(c);return}e.onSerialize(l,n)},onError:e.onError,onDone:e.onDone});return i.start(t),i.destroy.bind(i)}var Nr=class extends Rr{constructor(t){super(t),this.mode="vanilla",this.marked=new Set(t.markedRefs)}assignIndexedValue(t,e){return this.marked.has(t)&&this.refs.set(t,e),e}};function Ae(t,e={}){let r=Me(e.plugins);return new Nr({plugins:r,markedRefs:t.m}).deserialize(t.t)}function M(t){return{detail:t.detail,bubbles:t.bubbles,cancelable:t.cancelable,composed:t.composed}}var Vr={tag:"seroval-plugins/web/CustomEvent",test(t){return typeof CustomEvent>"u"?!1:t instanceof CustomEvent},parse:{sync(t,e){return{type:e.parse(t.type),options:e.parse(M(t))}},async async(t,e){return{type:await e.parse(t.type),options:await e.parse(M(t))}},stream(t,e){return{type:e.parse(t.type),options:e.parse(M(t))}}},serialize(t,e){return"new CustomEvent("+e.serialize(t.type)+","+e.serialize(t.options)+")"},deserialize(t,e){return new CustomEvent(e.deserialize(t.type),e.deserialize(t.options))}},G=Vr,jr={tag:"seroval-plugins/web/DOMException",test(t){return typeof DOMException>"u"?!1:t instanceof DOMException},parse:{sync(t,e){return{name:e.parse(t.name),message:e.parse(t.message)}},async async(t,e){return{name:await e.parse(t.name),message:await e.parse(t.message)}},stream(t,e){return{name:e.parse(t.name),message:e.parse(t.message)}}},serialize(t,e){return"new DOMException("+e.serialize(t.message)+","+e.serialize(t.name)+")"},deserialize(t,e){return new DOMException(e.deserialize(t.message),e.deserialize(t.name))}},J=jr;function L(t){return{bubbles:t.bubbles,cancelable:t.cancelable,composed:t.composed}}var Br={tag:"seroval-plugins/web/Event",test(t){return typeof Event>"u"?!1:t instanceof Event},parse:{sync(t,e){return{type:e.parse(t.type),options:e.parse(L(t))}},async async(t,e){return{type:await e.parse(t.type),options:await e.parse(L(t))}},stream(t,e){return{type:e.parse(t.type),options:e.parse(L(t))}}},serialize(t,e){return"new Event("+e.serialize(t.type)+","+e.serialize(t.options)+")"},deserialize(t,e){return new Event(e.deserialize(t.type),e.deserialize(t.options))}},Y=Br,qr={tag:"seroval-plugins/web/File",test(t){return typeof File>"u"?!1:t instanceof File},parse:{async async(t,e){return{name:await e.parse(t.name),options:await e.parse({type:t.type,lastModified:t.lastModified}),buffer:await e.parse(await t.arrayBuffer())}}},serialize(t,e){return"new File(["+e.serialize(t.buffer)+"],"+e.serialize(t.name)+","+e.serialize(t.options)+")"},deserialize(t,e){return new File([e.deserialize(t.buffer)],e.deserialize(t.name),e.deserialize(t.options))}},Hr=qr;function N(t){let e=[];return t.forEach((r,i)=>{e.push([i,r])}),e}var k={},Kr={tag:"seroval-plugins/web/FormDataFactory",test(t){return t===k},parse:{sync(){},async async(){return await Promise.resolve(void 0)},stream(){}},serialize(t,e){return e.createEffectfulFunction(["e","f","i","s","t"],"f=new FormData;for(i=0,s=e.length;i<s;i++)f.append((t=e[i])[0],t[1]);return f")},deserialize(){return k}},Xr={tag:"seroval-plugins/web/FormData",extends:[Hr,Kr],test(t){return typeof FormData>"u"?!1:t instanceof FormData},parse:{sync(t,e){return{factory:e.parse(k),entries:e.parse(N(t))}},async async(t,e){return{factory:await e.parse(k),entries:await e.parse(N(t))}},stream(t,e){return{factory:e.parse(k),entries:e.parse(N(t))}}},serialize(t,e){return"("+e.serialize(t.factory)+")("+e.serialize(t.entries)+")"},deserialize(t,e){let r=new FormData,i=e.deserialize(t.entries);for(let a=0,n=i.length;a<n;a++){let o=i[a];r.append(o[0],o[1])}return r}},Z=Xr;function V(t){let e=[];return t.forEach((r,i)=>{e.push([i,r])}),e}var Gr={tag:"seroval-plugins/web/Headers",test(t){return typeof Headers>"u"?!1:t instanceof Headers},parse:{sync(t,e){return e.parse(V(t))},async async(t,e){return await e.parse(V(t))},stream(t,e){return e.parse(V(t))}},serialize(t,e){return"new Headers("+e.serialize(t)+")"},deserialize(t,e){return new Headers(e.deserialize(t))}},E=Gr,I={},Jr={tag:"seroval-plugins/web/ReadableStreamFactory",test(t){return t===I},parse:{sync(){},async async(){return await Promise.resolve(void 0)},stream(){}},serialize(t,e){return e.createFunction(["d"],"new ReadableStream({start:"+e.createEffectfulFunction(["c"],"d.on({next:"+e.createEffectfulFunction(["v"],"c.enqueue(v)")+",throw:"+e.createEffectfulFunction(["v"],"c.error(v)")+",return:"+e.createEffectfulFunction([],"c.close()")+"})")+"})")},deserialize(){return I}};function ve(t){let e=C(),r=t.getReader();async function i(){try{let a=await r.read();a.done?e.return(a.value):(e.next(a.value),await i())}catch(a){e.throw(a)}}return i().catch(()=>{}),e}var Yr={tag:"seroval/plugins/web/ReadableStream",extends:[Jr],test(t){return typeof ReadableStream>"u"?!1:t instanceof ReadableStream},parse:{sync(t,e){return{factory:e.parse(I),stream:e.parse(C())}},async async(t,e){return{factory:await e.parse(I),stream:await e.parse(ve(t))}},stream(t,e){return{factory:e.parse(I),stream:e.parse(ve(t))}}},serialize(t,e){return"("+e.serialize(t.factory)+")("+e.serialize(t.stream)+")"},deserialize(t,e){let r=e.deserialize(t.stream);return new ReadableStream({start(i){r.on({next(a){i.enqueue(a)},throw(a){i.error(a)},return(){i.close()}})}})}},_=Yr;function Se(t,e){return{body:e,cache:t.cache,credentials:t.credentials,headers:t.headers,integrity:t.integrity,keepalive:t.keepalive,method:t.method,mode:t.mode,redirect:t.redirect,referrer:t.referrer,referrerPolicy:t.referrerPolicy}}var Zr={tag:"seroval-plugins/web/Request",extends:[_,E],test(t){return typeof Request>"u"?!1:t instanceof Request},parse:{async async(t,e){return{url:await e.parse(t.url),options:await e.parse(Se(t,t.body?await t.clone().arrayBuffer():null))}},stream(t,e){return{url:e.parse(t.url),options:e.parse(Se(t,t.clone().body))}}},serialize(t,e){return"new Request("+e.serialize(t.url)+","+e.serialize(t.options)+")"},deserialize(t,e){return new Request(e.deserialize(t.url),e.deserialize(t.options))}},Q=Zr;function we(t){return{headers:t.headers,status:t.status,statusText:t.statusText}}var Qr={tag:"seroval-plugins/web/Response",extends:[_,E],test(t){return typeof Response>"u"?!1:t instanceof Response},parse:{async async(t,e){return{body:await e.parse(t.body?await t.clone().arrayBuffer():null),options:await e.parse(we(t))}},stream(t,e){return{body:e.parse(t.clone().body),options:e.parse(we(t))}}},serialize(t,e){return"new Response("+e.serialize(t.body)+","+e.serialize(t.options)+")"},deserialize(t,e){return new Response(e.deserialize(t.body),e.deserialize(t.options))}},ee=Qr,es={tag:"seroval-plugins/web/URLSearchParams",test(t){return typeof URLSearchParams>"u"?!1:t instanceof URLSearchParams},parse:{sync(t,e){return e.parse(t.toString())},async async(t,e){return await e.parse(t.toString())},stream(t,e){return e.parse(t.toString())}},serialize(t,e){return"new URLSearchParams("+e.serialize(t)+")"},deserialize(t,e){return new URLSearchParams(e.deserialize(t))}},te=es,ts={tag:"seroval-plugins/web/URL",test(t){return typeof URL>"u"?!1:t instanceof URL},parse:{sync(t,e){return e.parse(t.href)},async async(t,e){return await e.parse(t.href)},stream(t,e){return e.parse(t.href)}},serialize(t,e){return"new URL("+e.serialize(t)+")"},deserialize(t,e){return new URL(e.deserialize(t))}},re=ts;const j="Invariant Violation",{setPrototypeOf:rs=function(t,e){return t.__proto__=e,t}}=Object;class oe extends Error{framesToPop=1;name=j;constructor(e=j){super(typeof e=="number"?`${j}: ${e} (see https://github.com/apollographql/invariant-packages)`:e),rs(this,oe.prototype)}}function ss(t,e){if(!t)throw new oe(e)}const w={NORMAL:0,WILDCARD:1,PLACEHOLDER:2};function is(t={}){const e={options:t,rootNode:Je(),staticRoutesMap:{}},r=i=>t.strictTrailingSlash?i:i.replace(/\/$/,"")||"/";if(t.routes)for(const i in t.routes)ze(e,r(i),t.routes[i]);return{ctx:e,lookup:i=>as(e,r(i)),insert:(i,a)=>ze(e,r(i),a),remove:i=>ns(e,r(i))}}function as(t,e){const r=t.staticRoutesMap[e];if(r)return r.data;const i=e.split("/"),a={};let n=!1,o=null,l=t.rootNode,c=null;for(let u=0;u<i.length;u++){const d=i[u];l.wildcardChildNode!==null&&(o=l.wildcardChildNode,c=i.slice(u).join("/"));const m=l.children.get(d);if(m===void 0){if(l&&l.placeholderChildren.length>1){const y=i.length-u;l=l.placeholderChildren.find(p=>p.maxDepth===y)||null}else l=l.placeholderChildren[0]||null;if(!l)break;l.paramName&&(a[l.paramName]=d),n=!0}else l=m}return(l===null||l.data===null)&&o!==null&&(l=o,a[l.paramName||"_"]=c,n=!0),l?n?{...l.data,params:n?a:void 0}:l.data:null}function ze(t,e,r){let i=!0;const a=e.split("/");let n=t.rootNode,o=0;const l=[n];for(const c of a){let u;if(u=n.children.get(c))n=u;else{const d=os(c);u=Je({type:d,parent:n}),n.children.set(c,u),d===w.PLACEHOLDER?(u.paramName=c==="*"?`_${o++}`:c.slice(1),n.placeholderChildren.push(u),i=!1):d===w.WILDCARD&&(n.wildcardChildNode=u,u.paramName=c.slice(3)||"_",i=!1),l.push(u),n=u}}for(const[c,u]of l.entries())u.maxDepth=Math.max(l.length-c,u.maxDepth||0);return n.data=r,i===!0&&(t.staticRoutesMap[e]=n),n}function ns(t,e){let r=!1;const i=e.split("/");let a=t.rootNode;for(const n of i)if(a=a.children.get(n),!a)return r;if(a.data){const n=i.at(-1)||"";a.data=null,Object.keys(a.children).length===0&&a.parent&&(a.parent.children.delete(n),a.parent.wildcardChildNode=null,a.parent.placeholderChildren=[]),r=!0}return r}function Je(t={}){return{type:t.type||w.NORMAL,maxDepth:0,parent:t.parent||null,children:new Map,data:t.data||null,paramName:t.paramName||null,wildcardChildNode:null,placeholderChildren:[]}}function os(t){return t.startsWith("**")?w.WILDCARD:t[0]===":"||t==="*"?w.PLACEHOLDER:w.NORMAL}const Ye=[{page:!0,$component:{src:"src/routes/index.tsx?pick=default&pick=$css",build:()=>import("../index.js"),import:()=>import("../index.js")},path:"/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/index.tsx"},{page:!0,$component:{src:"src/routes/[...404].tsx?pick=default&pick=$css",build:()=>import("../_...404_.js"),import:()=>import("../_...404_.js")},path:"/*404",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/[...404].tsx"},{page:!1,$POST:{src:"src/routes/API/prova.ts?pick=POST",build:()=>import("../prova.js"),import:()=>import("../prova.js")},path:"/API/prova",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/API/prova.ts"},{page:!0,$component:{src:"src/routes/UI/Cursor.tsx?pick=default&pick=$css",build:()=>import("../Cursor.js"),import:()=>import("../Cursor.js")},path:"/UI/Cursor",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/UI/Cursor.tsx"},{page:!0,$component:{src:"src/routes/UI/Loading.tsx?pick=default&pick=$css",build:()=>import("../Loading.js"),import:()=>import("../Loading.js")},path:"/UI/Loading",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/UI/Loading.tsx"},{page:!0,$component:{src:"src/routes/UI/Waves.tsx?pick=default&pick=$css",build:()=>import("../Waves.js"),import:()=>import("../Waves.js")},path:"/UI/Waves",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/UI/Waves.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/LoginRegistration/index.tsx?pick=default&pick=$css",build:()=>import("../index2.js"),import:()=>import("../index2.js")},path:"/(Pages)/LoginRegistration/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/LoginRegistration/index.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/LoginRegistration/riv.tsx?pick=default&pick=$css",build:()=>import("../riv.js"),import:()=>import("../riv.js")},path:"/(Pages)/LoginRegistration/riv",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/LoginRegistration/riv.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/Wallets/index.tsx?pick=default&pick=$css",build:()=>import("../index3.js"),import:()=>import("../index3.js")},path:"/(Pages)/Wallets/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/Wallets/index.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/Wallets/[...slug].tsx?pick=default&pick=$css",build:()=>import("../_...slug_.js"),import:()=>import("../_...slug_.js")},path:"/(Pages)/Wallets/*slug",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/Wallets/[...slug].tsx"},{page:!1,$POST:{src:"src/routes/API/Auth/logout.ts?pick=POST",build:()=>import("../logout.js"),import:()=>import("../logout.js")},path:"/API/Auth/logout",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/API/Auth/logout.ts"},{page:!1,$POST:{src:"src/routes/API/Auth/refresh.ts?pick=POST",build:()=>import("../refresh.js"),import:()=>import("../refresh.js")},path:"/API/Auth/refresh",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/API/Auth/refresh.ts"},{page:!1,$POST:{src:"src/routes/API/lib/addTransaction.ts?pick=POST",build:()=>import("../addTransaction.js"),import:()=>import("../addTransaction.js")},path:"/API/lib/addTransaction",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/API/lib/addTransaction.ts"},{page:!1,$POST:{src:"src/routes/API/lib/getWalletsPaths.ts?pick=POST",build:()=>import("../getWalletsPaths.js"),import:()=>import("../getWalletsPaths.js")},path:"/API/lib/getWalletsPaths",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/API/lib/getWalletsPaths.ts"},{page:!1,$POST:{src:"src/routes/API/Wallets/addWallet.ts?pick=POST",build:()=>import("../addWallet.js"),import:()=>import("../addWallet.js")},path:"/API/Wallets/addWallet",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/API/Wallets/addWallet.ts"},{page:!0,$component:{src:"src/routes/API/Wallets/deleteWallet.ts?pick=default&pick=$css",build:()=>import("../deleteWallet.js"),import:()=>import("../deleteWallet.js")},path:"/API/Wallets/deleteWallet",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/API/Wallets/deleteWallet.ts"},{page:!0,$component:{src:"src/routes/(Pages)/(lib)/Login/index.tsx?pick=default&pick=$css",build:()=>import("../index4.js"),import:()=>import("../index4.js")},path:"/(Pages)/(lib)/Login/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/(lib)/Login/index.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/(lib)/Transactions/index.tsx?pick=default&pick=$css",build:()=>import("../index5.js"),import:()=>import("../index5.js")},path:"/(Pages)/(lib)/Transactions/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/(lib)/Transactions/index.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/LoginRegistration/components/Toggle.tsx?pick=default&pick=$css",build:()=>import("../Toggle.js"),import:()=>import("../Toggle.js")},path:"/(Pages)/LoginRegistration/components/Toggle",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/LoginRegistration/components/Toggle.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/LoginRegistration/Login/index.tsx?pick=default&pick=$css",build:()=>import("../index6.js"),import:()=>import("../index6.js")},path:"/(Pages)/LoginRegistration/Login/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/LoginRegistration/Login/index.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/LoginRegistration/Registration/index.tsx?pick=default&pick=$css",build:()=>import("../index7.js"),import:()=>import("../index7.js")},path:"/(Pages)/LoginRegistration/Registration/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/LoginRegistration/Registration/index.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/Wallets/Wallet/index.tsx?pick=default&pick=$css",build:()=>import("../index8.js"),import:()=>import("../index8.js")},path:"/(Pages)/Wallets/Wallet/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/Wallets/Wallet/index.tsx"},{page:!1,$POST:{src:"src/routes/API/Auth/login/index.ts?pick=POST",build:()=>import("../index9.js"),import:()=>import("../index9.js")},path:"/API/Auth/login/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/API/Auth/login/index.ts"},{page:!1,$POST:{src:"src/routes/API/Wallets/Wallet/addTransaction.ts?pick=POST",build:()=>import("../addTransaction2.js"),import:()=>import("../addTransaction2.js")},path:"/API/Wallets/Wallet/addTransaction",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/API/Wallets/Wallet/addTransaction.ts"},{page:!0,$component:{src:"src/routes/API/Wallets/Wallet/getTransactions.ts?pick=default&pick=$css",build:()=>import("../getTransactions.js"),import:()=>import("../getTransactions.js")},path:"/API/Wallets/Wallet/getTransactions",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/API/Wallets/Wallet/getTransactions.ts"},{page:!0,$component:{src:"src/routes/(Pages)/(lib)/Transactions/utils/pathWallets.tsx?pick=default&pick=$css",build:()=>import("../pathWallets.js"),import:()=>import("../pathWallets.js")},path:"/(Pages)/(lib)/Transactions/utils/pathWallets",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/(lib)/Transactions/utils/pathWallets.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/LoginRegistration/Registration/Credentials/index.tsx?pick=default&pick=$css",build:()=>import("../index10.js"),import:()=>import("../index10.js")},path:"/(Pages)/LoginRegistration/Registration/Credentials/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/LoginRegistration/Registration/Credentials/index.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/LoginRegistration/Registration/Email/index.tsx?pick=default&pick=$css",build:()=>import("../index11.js"),import:()=>import("../index11.js")},path:"/(Pages)/LoginRegistration/Registration/Email/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/LoginRegistration/Registration/Email/index.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/LoginRegistration/Registration/Phone/index.tsx?pick=default&pick=$css",build:()=>import("../index12.js"),import:()=>import("../index12.js")},path:"/(Pages)/LoginRegistration/Registration/Phone/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/LoginRegistration/Registration/Phone/index.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/LoginRegistration/Registration/Phone/sendOtp.tsx?pick=default&pick=$css",build:()=>import("../sendOtp.js"),import:()=>import("../sendOtp.js")},path:"/(Pages)/LoginRegistration/Registration/Phone/sendOtp",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/LoginRegistration/Registration/Phone/sendOtp.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/Wallets/_components/addWallet/index.tsx?pick=default&pick=$css",build:()=>import("../index13.js"),import:()=>import("../index13.js")},path:"/(Pages)/Wallets/_components/addWallet/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/Wallets/_components/addWallet/index.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/Wallets/_components/Card/index.tsx?pick=default&pick=$css",build:()=>import("../index14.js"),import:()=>import("../index14.js")},path:"/(Pages)/Wallets/_components/Card/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/Wallets/_components/Card/index.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/Wallets/_components/Card3D/index.tsx?pick=default&pick=$css",build:()=>import("../index15.js"),import:()=>import("../index15.js")},path:"/(Pages)/Wallets/_components/Card3D/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/Wallets/_components/Card3D/index.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/Wallets/_components/Card3D/preLoader.ts?pick=default&pick=$css",build:()=>import("../preLoader.js"),import:()=>import("../preLoader.js")},path:"/(Pages)/Wallets/_components/Card3D/preLoader",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/Wallets/_components/Card3D/preLoader.ts"},{page:!0,$component:{src:"src/routes/(Pages)/Wallets/_components/cardHolder/index.tsx?pick=default&pick=$css",build:()=>import("../index16.js"),import:()=>import("../index16.js")},path:"/(Pages)/Wallets/_components/cardHolder/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/Wallets/_components/cardHolder/index.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/Wallets/_components/SetWallet/index.tsx?pick=default&pick=$css",build:()=>import("../index17.js"),import:()=>import("../index17.js")},path:"/(Pages)/Wallets/_components/SetWallet/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/Wallets/_components/SetWallet/index.tsx"},{page:!1,$POST:{src:"src/routes/API/Wallets/Wallet/addTransactionByFile/addTransactions.ts?pick=POST",build:()=>import("../addTransactions.js"),import:()=>import("../addTransactions.js")},path:"/API/Wallets/Wallet/addTransactionByFile/addTransactions",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/API/Wallets/Wallet/addTransactionByFile/addTransactions.ts"},{page:!1,$POST:{src:"src/routes/API/Wallets/Wallet/addTransactionByFile/uploadFile.ts?pick=POST",build:()=>import("../uploadFile.js"),import:()=>import("../uploadFile.js")},path:"/API/Wallets/Wallet/addTransactionByFile/uploadFile",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/API/Wallets/Wallet/addTransactionByFile/uploadFile.ts"},{page:!0,$component:{src:"src/routes/(Pages)/(lib)/Transactions/files/csv/index.tsx?pick=default&pick=$css",build:()=>import("../index18.js"),import:()=>import("../index18.js")},path:"/(Pages)/(lib)/Transactions/files/csv/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/(lib)/Transactions/files/csv/index.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/(lib)/Transactions/files/csvChat/index.tsx?pick=default&pick=$css",build:()=>import("../index19.js"),import:()=>import("../index19.js")},path:"/(Pages)/(lib)/Transactions/files/csvChat/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/(lib)/Transactions/files/csvChat/index.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/(lib)/Transactions/files/csvChat/mapper.tsx?pick=default&pick=$css",build:()=>import("../mapper.js"),import:()=>import("../mapper.js")},path:"/(Pages)/(lib)/Transactions/files/csvChat/mapper",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/(lib)/Transactions/files/csvChat/mapper.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/(lib)/Transactions/files/csvChat/preview.tsx?pick=default&pick=$css",build:()=>import("../preview.js"),import:()=>import("../preview.js")},path:"/(Pages)/(lib)/Transactions/files/csvChat/preview",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/(lib)/Transactions/files/csvChat/preview.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/(lib)/Transactions/files/csvChat/uploadFile.tsx?pick=default&pick=$css",build:()=>import("../uploadFile2.js"),import:()=>import("../uploadFile2.js")},path:"/(Pages)/(lib)/Transactions/files/csvChat/uploadFile",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/(lib)/Transactions/files/csvChat/uploadFile.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/LoginRegistration/Registration/components/inputOtp/otpInput.tsx?pick=default&pick=$css",build:()=>import("../otpInput.js"),import:()=>import("../otpInput.js")},path:"/(Pages)/LoginRegistration/Registration/components/inputOtp/otpInput",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/LoginRegistration/Registration/components/inputOtp/otpInput.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/LoginRegistration/Registration/components/ProgressBar/index.tsx?pick=default&pick=$css",build:()=>import("../index20.js"),import:()=>import("../index20.js")},path:"/(Pages)/LoginRegistration/Registration/components/ProgressBar/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/LoginRegistration/Registration/components/ProgressBar/index.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/LoginRegistration/Registration/components/spline/index.tsx?pick=default&pick=$css",build:()=>import("../index21.js"),import:()=>import("../index21.js")},path:"/(Pages)/LoginRegistration/Registration/components/spline/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/LoginRegistration/Registration/components/spline/index.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/Wallets/Wallet/components/table.tsx/index.tsx?pick=default&pick=$css",build:()=>import("../index22.js"),import:()=>import("../index22.js")},path:"/(Pages)/Wallets/Wallet/components/table.tsx/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/Wallets/Wallet/components/table.tsx/index.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/Wallets/_components/cardHolder/Card/Card.tsx?pick=default&pick=$css",build:()=>import("../Card.js"),import:()=>import("../Card.js")},path:"/(Pages)/Wallets/_components/cardHolder/Card/Card",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/Wallets/_components/cardHolder/Card/Card.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/(lib)/Transactions/files/csv/mapper/index.tsx?pick=default&pick=$css",build:()=>import("../index23.js"),import:()=>import("../index23.js")},path:"/(Pages)/(lib)/Transactions/files/csv/mapper/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/(lib)/Transactions/files/csv/mapper/index.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/(lib)/Transactions/files/csv/Preview/index.tsx?pick=default&pick=$css",build:()=>import("../index24.js"),import:()=>import("../index24.js")},path:"/(Pages)/(lib)/Transactions/files/csv/Preview/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/(lib)/Transactions/files/csv/Preview/index.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/(lib)/Transactions/files/csv/Upload/index.tsx?pick=default&pick=$css",build:()=>import("../index25.js"),import:()=>import("../index25.js")},path:"/(Pages)/(lib)/Transactions/files/csv/Upload/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/(lib)/Transactions/files/csv/Upload/index.tsx"},{page:!0,$component:{src:"src/routes/(Pages)/(lib)/Transactions/files/csv/Upload/DropZone/index.tsx?pick=default&pick=$css",build:()=>import("../index26.js"),import:()=>import("../index26.js")},path:"/(Pages)/(lib)/Transactions/files/csv/Upload/DropZone/",filePath:"C:/Users/Matteo/Desktop/Pulsix/src/routes/(Pages)/(lib)/Transactions/files/csv/Upload/DropZone/index.tsx"}],ls=cs(Ye.filter(t=>t.page));function cs(t){function e(r,i,a,n){const o=Object.values(r).find(l=>a.startsWith(l.id+"/"));return o?(e(o.children||(o.children=[]),i,a.slice(o.id.length)),r):(r.push({...i,id:a,path:a.replace(/\([^)/]+\)/g,"").replace(/\/+/g,"/")}),r)}return t.sort((r,i)=>r.path.length-i.path.length).reduce((r,i)=>e(r,i,i.path,i.path),[])}function us(t){return t.$HEAD||t.$GET||t.$POST||t.$PUT||t.$PATCH||t.$DELETE}is({routes:Ye.reduce((t,e)=>{if(!us(e))return t;let r=e.path.replace(/\([^)/]+\)/g,"").replace(/\/+/g,"/").replace(/\*([^/]*)/g,(i,a)=>`**:${a}`).split("/").map(i=>i.startsWith(":")||i.startsWith("*")?i:encodeURIComponent(i)).join("/");if(/:[^/]*\?/g.test(r))throw new Error(`Optional parameters are not supported in API routes: ${r}`);if(t[r])throw new Error(`Duplicate API routes for "${r}" found at "${t[r].route.path}" and "${e.path}"`);return t[r]={route:e},t},{})});function ps(t){t.forEach(e=>{if(!e.attrs.href)return;let r=document.head.querySelector(`link[href="${e.attrs.href}"]`);r||(r=document.createElement("link"),r.setAttribute("rel","preload"),r.setAttribute("as","style"),r.setAttribute("href",e.attrs.href),document.head.appendChild(r))})}var hs=" ";const ds={style:t=>W("style",t.attrs,()=>t.children,!0),link:t=>W("link",t.attrs,void 0,!0),script:t=>t.attrs.src?W("script",dt(()=>t.attrs,{get id(){return t.key}}),()=>ft(hs),!0):null,noscript:t=>W("noscript",t.attrs,()=>ht(t.children),!0)};function fs(t,e){let{tag:r,attrs:{key:i,...a}={key:void 0},children:n}=t;return ds[r]({attrs:{...a,nonce:e},key:i,children:n})}function gs(t,e,r,i="default"){return ut(async()=>{{const n=(await t.import())[i],l=(await e.inputs?.[t.src].assets()).filter(u=>u.tag==="style"||u.attrs.rel==="stylesheet");return typeof window<"u"&&ps(l),{default:u=>[...l.map(d=>fs(d)),pt(n,u)]}}})}function Ze(){function t(r){return{...r,...r.$$route?r.$$route.require().route:void 0,info:{...r.$$route?r.$$route.require().route.info:{},filesystem:!0},component:r.$component&&gs(r.$component,globalThis.MANIFEST.client,globalThis.MANIFEST.ssr),children:r.children?r.children.map(t):void 0}}return ls.map(t)}let Re;const Bs=mt?()=>gt().routes:()=>Re||(Re=Ze());function ms(t){const e=rt(t.nativeEvent,"flash");if(e)try{let r=JSON.parse(e);if(!r||!r.result)return;const i=[...r.input.slice(0,-1),new Map(r.input[r.input.length-1])],a=r.error?new Error(r.result):r.result;return{input:i,url:r.url,pending:!1,result:r.thrown?void 0:a,error:r.thrown?a:void 0}}catch(r){console.error(r)}finally{st(t.nativeEvent,"flash","",{maxAge:0})}}async function Ps(t){const e=globalThis.MANIFEST.client;return globalThis.MANIFEST.ssr,t.response.headers.set("Content-Type","text/html"),Object.assign(t,{manifest:await e.json(),assets:[...await e.inputs[e.handler].assets()],router:{submission:ms(t)},routes:Ze(),complete:!1,$islands:new Set})}const ys=new Set([301,302,303,307,308]);function bs(t){return t.status&&ys.has(t.status)?t.status:302}const xs={"src_routes_API_Wallets_deleteWallet_ts--deleteWallet_1":{functionName:"deleteWallet_1",importer:()=>import("./deleteWallet-jK3sXpn2.js")},"src_routes_API_Wallets_Wallet_getTransactions_ts--getTransactions_1":{functionName:"getTransactions_1",importer:()=>import("./getTransactions-Cr4f694O.js")},"src_routes_API_Wallets_getWallets_server_ts--getWallets_1":{functionName:"getWallets_1",importer:()=>import("./getWallets.server-Ddr8BrzP.js")},"src_routes_API_Wallets_getWallets_server_ts--getWalletsContainer_1":{functionName:"getWalletsContainer_1",importer:()=>import("./getWallets.server-Ddr8BrzP.js")},"src_routes_API_Wallets_getWallets_server_ts--getRecursiveWalletBalance_1":{functionName:"getRecursiveWalletBalance_1",importer:()=>import("./getWallets.server-Ddr8BrzP.js")},"src_routes_API_Wallets_getWallets_server_ts--getWalletName_1":{functionName:"getWalletName_1",importer:()=>import("./getWallets.server-Ddr8BrzP.js")},"src_server_auth_server_ts--getUserId_1":{functionName:"getUserId_1",importer:()=>import("./auth.server-F_zbwjhE.js")},"src_server_auth_server_ts--getUsername_1":{functionName:"getUsername_1",importer:()=>import("./auth.server-F_zbwjhE.js")},"src_server_auth_server_ts--getUser_1":{functionName:"getUser_1",importer:()=>import("./auth.server-F_zbwjhE.js")},"src_routes_API_exchangeRates_exchangeRates_ts--getExchangeRate_1":{functionName:"getExchangeRate_1",importer:()=>import("./exchangeRates-BoUYCRuj.js")},"src_routes_API_exchangeRates_exchangeRates_ts--getConversionRate_1":{functionName:"getConversionRate_1",importer:()=>import("./exchangeRates-BoUYCRuj.js")},"src_routes_API_exchangeRates_exchangeRates_ts--calculateConvertedTotal_1":{functionName:"calculateConvertedTotal_1",importer:()=>import("./exchangeRates-BoUYCRuj.js")},"src_routes_API_exchangeRates_exchangeRates_ts--convertBalance_1":{functionName:"convertBalance_1",importer:()=>import("./exchangeRates-BoUYCRuj.js")},"src_routes_API_Wallets_getWallet_ts--getWallet_1":{functionName:"getWallet_1",importer:()=>import("./getWallet-CFmvrtny.js")},"src_routes_API_Auth_registration_createUser_ts--createUser_action":{functionName:"createUser_action",importer:()=>import("./createUser-CqiEsOu_.js")},"src_routes_API_Wallets_setWallet_ts--setWallet_action":{functionName:"setWallet_action",importer:()=>import("./setWallet-LYtwpUnS.js")},"src_routes_API_Auth_registration_credentials_usernameAlreadyexist_ts--usernameAlreadyexist_action":{functionName:"usernameAlreadyexist_action",importer:()=>import("./usernameAlreadyexist-CUMQy92F.js")},"src_routes_API_Auth_registration_phone_phoneAlreadyexist_ts--phoneAlreadyexist_action":{functionName:"phoneAlreadyexist_action",importer:()=>import("./phoneAlreadyexist-BFvINIFk.js")},"src_routes_API_Auth_registration_email_emailAlreadyexist_ts--emailAlreadyexist_action":{functionName:"emailAlreadyexist_action",importer:()=>import("./emailAlreadyexist-BoJ37vKf.js")}};function As(t){const e=new TextEncoder().encode(t),r=e.length,i=r.toString(16),a="00000000".substring(0,8-i.length)+i,n=new TextEncoder().encode(`;0x${a};`),o=new Uint8Array(12+r);return o.set(n),o.set(e,12),o}function ke(t,e){return new ReadableStream({start(r){Lr(e,{scopeId:t,plugins:[G,J,Y,Z,E,_,Q,ee,te,re],onSerialize(i,a){r.enqueue(As(a?`(${It(t)},${i})`:i))},onDone(){r.close()},onError(i){r.error(i)}})}})}async function vs(t){const e=se(t),r=e.request,i=r.headers.get("X-Server-Id"),a=r.headers.get("X-Server-Instance"),n=r.headers.has("X-Single-Flight"),o=new URL(r.url);let l,c;if(i)ss(typeof i=="string","Invalid server function"),[l,c]=i.split("#");else if(l=o.searchParams.get("id"),c=o.searchParams.get("name"),!l||!c)return new Response(null,{status:404});const u=xs[l];let d;if(!u)return new Response(null,{status:404});d=await u.importer();const m=d[u.functionName];let y=[];if(!a||t.method==="GET"){const p=o.searchParams.get("args");if(p){const f=JSON.parse(p);(f.t?Ae(f,{plugins:[G,J,Y,Z,E,_,Q,ee,te,re]}):f).forEach($=>y.push($))}}if(t.method==="POST"){const p=r.headers.get("content-type"),f=t.node.req,$=f instanceof ReadableStream,Qe=f.body instanceof ReadableStream,le=$&&f.locked||Qe&&f.body.locked,ce=$?f:f.body;if(p?.startsWith("multipart/form-data")||p?.startsWith("application/x-www-form-urlencoded"))y.push(await(le?r:new Request(r,{...r,body:ce})).formData());else if(p?.startsWith("application/json")){const et=le?r:new Request(r,{...r,body:ce});y=Ae(await et.json(),{plugins:[G,J,Y,Z,E,_,Q,ee,te,re]})}}try{let p=await We(e,async()=>(Te.context={event:e},e.locals.serverFunctionMeta={id:l+"#"+c},m(...y)));if(n&&a&&(p=await Ee(e,p)),p instanceof Response){if(p.headers&&p.headers.has("X-Content-Raw"))return p;a&&(p.headers&&pe(t,p.headers),p.status&&(p.status<300||p.status>=400)&&he(t,p.status),p.customBody?p=await p.customBody():p.body==null&&(p=null))}return a?(T(t,"content-type","text/javascript"),ke(a,p)):Ie(p,r,y)}catch(p){if(p instanceof Response)n&&a&&(p=await Ee(e,p)),p.headers&&pe(t,p.headers),p.status&&(!a||p.status<300||p.status>=400)&&he(t,p.status),p.customBody?p=p.customBody():p.body==null&&(p=null),T(t,"X-Error","true");else if(a){const f=p instanceof Error?p.message:typeof p=="string"?p:"true";T(t,"X-Error",f.replace(/[\r\n]+/g,""))}else p=Ie(p,r,y,!0);return a?(T(t,"content-type","text/javascript"),ke(a,p)):p}}function Ie(t,e,r,i){const a=new URL(e.url),n=t instanceof Error;let o=302,l;return t instanceof Response?(l=new Headers(t.headers),t.headers.has("Location")&&(l.set("Location",new URL(t.headers.get("Location"),a.origin+"").toString()),o=bs(t))):l=new Headers({Location:new URL(e.headers.get("referer")).toString()}),t&&l.append("Set-Cookie",`flash=${encodeURIComponent(JSON.stringify({url:a.pathname+a.search,result:n?t.message:t,thrown:i,error:n,input:[...r.slice(0,-1),[...r[r.length-1].entries()]]}))}; Secure; HttpOnly;`),new Response(null,{status:o,headers:l})}let B;function Ss(t){const e=new Headers(t.request.headers),r=at(t.nativeEvent),i=t.response.headers.getSetCookie();e.delete("cookie");let a=!1;return t.nativeEvent.node?.req&&(a=!0,t.nativeEvent.node.req.headers.cookie=""),i.forEach(n=>{if(!n)return;const o=n.split(";")[0],[l,c]=o.split("=");l&&c&&(r[l]=c)}),Object.entries(r).forEach(([n,o])=>{e.append("cookie",`${n}=${o}`),a&&(t.nativeEvent.node.req.headers.cookie+=`${n}=${o};`)}),e}async function Ee(t,e){let r,i=new URL(t.request.headers.get("referer")).toString();e instanceof Response&&(e.headers.has("X-Revalidate")&&(r=e.headers.get("X-Revalidate").split(",")),e.headers.has("Location")&&(i=new URL(e.headers.get("Location"),new URL(t.request.url).origin+"").toString()));const a=it(t);return a.request=new Request(i,{headers:Ss(t)}),await We(a,async()=>{await Ps(a),B||(B=(await import("./app-CW49o6De.js")).default),a.router.dataOnly=r||!0,a.router.previousUrl=t.request.headers.get("referer");try{Pt(()=>{Te.context.event=a,B()})}catch(l){console.log(l)}const n=a.router.data;if(!n)return e;let o=!1;for(const l in n)n[l]===void 0?delete n[l]:o=!0;return o&&(e instanceof Response?e.customBody&&(n._$value=e.customBody()):(n._$value=e,e=new Response(null,{status:200})),e.customBody=()=>n,e.headers.set("X-Single-Flight","true")),e})}const _e=$e(vs),qs=$e({onRequest:me.onRequest,onBeforeResponse:me.onBeforeResponse,handler:_e,websocket:_e.__websocket__});export{Bs as F,qs as s};
