import{c as _}from"./assets/server-fns-runtime-C3tiYEg6.js";import{d as c}from"./assets/db.server-CDeyn5Z_.js";import{j as m}from"./assets/response-CbUr9JDj.js";import"solid-js/web";import"solid-js/web/storage";import"./assets/fetchEvent-9EzSf9d7.js";import"h3";import"vite-plugin-node-polyfills/shims/global";import"node:async_hooks";import"vite-plugin-node-polyfills/shims/process";import"pg";const y=_(async function(o){console.log("ADD WALLET");let t;try{t=await o.request.json()}catch{return m({success:!1,message:"Corpo della richiesta non valido o mancante (JSON invalido)."},{status:400})}const{walletName:a,type:r,nation:n,currency:u,container_id:s,color:p,type_ui:d,category_id:i}=t,l=o.locals.user?.id;console.log(t);try{let e;return r==="wallet"&&(console.log("wallet"),e=await c.query("INSERT INTO public.wallets (wallet_name, type, nation, currency, category_id, user_id, container_id, color, type_ui) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9);",[a,r,n,u,i,l,s,p,d])),r==="container"&&(e=await c.query("INSERT INTO public.wallets (wallet_name, type, category_id, user_id, container_id) VALUES ($1, $2, $3, $4, $5);",[a,r,i,l,s])),"Success"}catch(e){throw console.error("[Server Function:getWalletsSub] Errore DB:",e),new Error("Error.")}},"src_routes_API_Wallets_addWallet_ts--POST_1","C:/Users/Matteo/Desktop/Pulsix/src/routes/API/Wallets/addWallet.ts?pick=POST&tsr-directive-use-server="),W=y;export{W as POST};
