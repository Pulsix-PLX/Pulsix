import{k as l,n as y,a as D}from"./solid-DuWri35y.js";import{S as P,b as M,I as $}from"./Inputs-DcqJwVVk.js";import{g as S}from"./getWallets.server-rCnpGkki.js";import{g as W}from"./auth.server-BY2lFEoQ.js";import"./web-DpIebe6J.js";import"./store-EkIb7068.js";import"./server-runtime-G1njbCYf.js";import"./index-BbP3371Q.js";import"./action-Dtdjs7R9.js";import"./routing-CrKy3yVb.js";function q(){const[E,i]=l(null),[_,s]=l(void 0),[p,a]=l([]),[m,n]=l([]);return y(async()=>{P({}),M({});try{const e=await W();if(e==null)console.warn("[onMount] getUserId ha restituito null/undefined."),i(null),s(void 0),a([]),n([]);else{i(e);const I=await S(e);s(I);const c=_();if(!c||!Array.isArray(c)){console.warn("[onMount] Dati non validi o non presenti."),a([]),n([]);return}const u=new Map,f=[];c.forEach(t=>{if(!t||typeof t!="object"||t.id===void 0||t.id===null||!t.wallet_name){console.warn("Elemento non valido o incompleto, saltato:",t);return}let o=null,r;if(t.container_id===null||t.container_id===void 0)r=t.wallet_name;else{const h=u.get(t.container_id);h?r=`${h.path}/${t.wallet_name}`:(console.warn(`Genitore con id '${t.container_id}' non trovato per '${t.wallet_name}' (id: ${t.id}). SarÃ  trattato come orfano.`),r=`__ORPHANED__/${t.wallet_name}`)}o={id:t.id,wallet:t.wallet_name,path:r,type:t.type,container_id:t.container_id},f.push(o),u.set(o.id,o)});const d=f.filter(t=>t.type!=="container");d.sort((t,o)=>t.path.localeCompare(o.path));const g=d.map(t=>t.path),v=d.map(t=>t.id);a(g),n(v),console.log("Paths Ordinati (no container):",p()),console.log("IDs Ordinati (no container):",m())}}catch(e){console.error("[onMount] Errore durante recupero dati o elaborazione:",e),i(null),s(void 0),a([]),n([])}}),D($,{type:"select",name:"walletId",get options(){return p()},get values(){return m()},placeholder:"Wallet",class:"ml-30",required:!0})}export{q as default};
