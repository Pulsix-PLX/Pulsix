import{ssr as m,ssrHydrationKey as u,ssrAttribute as n,escape as t,createComponent as i,ssrStyle as V}from"solid-js/web";import{createMemo as le,createSignal as y,onMount as O,Show as I,createEffect as te,For as se,onCleanup as oe,Index as F,Switch as ie,Match as $}from"solid-js";import{createStore as ae}from"solid-js/store";import{gsap as H}from"gsap";import{c as W}from"./server-fns-runtime-C3tiYEg6.js";import{d as G}from"./db.server-CDeyn5Z_.js";import{b as U,u as B}from"./action-BR9kmesq.js";const[z,r]=ae({}),[R,J]=ae({}),ut=le(()=>{const e=Object.keys(z);return e.length===0?!1:e.every(s=>z[s]===!0)}),dt=e=>R[e];var ce=["<button",' class="visible absolute text-white ml-50 text-m mt-15" style="','"',">x</button>"],ue=["<div",' class="input-wrapper"><input',' class="','" placeholder','><label class="','">','</label><div class="input-underline"><div class="','"></div></div><div class="form-group__actions"><button type="button" title="Toggle Eye"',' class="eye-button w-[50%] "><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"','><path class="lid lid--upper" d="M1 12C1 12 5 4 12 4C19 4 23 12 23 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path class="lid lid--lower" d="M1 12C1 12 5 20 12 20C19 20 23 12 23 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path class="eyelashes" d="M7 18L5 20 M12 21L12 23 M17 18L19 20" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path><g class="eye"><circle class="eye-circle" cy="12" cx="12" r="4" fill="currentColor"></circle><circle class="eye-glint" cy="11" cx="13" r="1" fill="var(--glint)"></circle></g></svg><span class="sr-only">Toggle Eye</span></button><!--$-->',"<!--/--></div></div>"];function K(e){const[s,P]=y(e.initialValue||""),[v,E]=y(!0),[b,M]=y(!1),[a,_]=y(!1);let g=null;const f=()=>{if(a())return;const x=H.utils.random(2,8),l=.075,h=Math.random()>.5?3:1;g&&g.kill(),g=H.timeline({delay:x,onComplete:()=>f(),repeat:h,yoyo:!0}).to(".lid--upper",{duration:l,attr:{d:"M1 12C1 12 5 20 12 20C19 20 23 12 23 12"}})};return O(()=>{f(),H.utils.mapRange(-100,100,30,-30);const x=l=>{};return window.addEventListener("mousemove",x),()=>{window.removeEventListener("mousemove",x),g&&g.kill()}}),m(ue,u(),n("name",t(e.name,!0),!1)+n("type",v()?"password":"text",!1),`fancy-input ${t(e.class,!0)} ${b()?"text-clear":""}`,n("value",t(s(),!0),!1),`input-label ${b()?"text-clear":""}`,t(e.placeholder),`clear-wave ${b()?"active":""}`,n("aria-pressed",t(a(),!0),!1),n("class",a()?"eye-closed":"",!1),t(i(I,{get when(){return s().length>0},get children(){return m(ce,u(),"width:20px;height:20px",n("disabled",b(),!0))}})))}var de=["<button",' class="visible absolute text-white -ml-17 text-m mt-15" style="','"',">x</button>"],me=["<div",' class="input-wrapper"><input',' class="','" placeholder','><label class="','">','</label><div class="input-underline"><div class="','"></div></div><div class="form-group__actions">',"</div></div>"];function j(e){const[s,P]=y(e.initialValue||""),[v,E]=y(!1);return m(me,u(),n("name",t(e.name,!0),!1)+n("type",t(e.type,!0)||"text",!1),`fancy-input ${t(e.class,!0)} ${v()?"text-clear":""}`,n("value",t(s(),!0),!1),`input-label ${v()?"text-clear":""}`,t(e.placeholder),`clear-wave ${v()?"active":""}`,t(i(I,{get when(){return s().length>0},get children(){return m(de,u(),"width:20px;height:20px",n("disabled",v(),!0))}})))}const he=W(async e=>{try{console.log(e);const s=await G.query("SELECT username FROM auth.users WHERE username=$1",[e]);return console.log(s.rows),s.rows.length>0?"already exist":"available"}catch(s){return console.error("Error checking username:",s),`error:${s.message}`}},"src_routes_API_Auth_registration_credentials_usernameAlreadyexist_ts--usernameAlreadyexist_action","C:/Users/Matteo/Desktop/Pulsix/src/routes/API/Auth/registration/credentials/usernameAlreadyexist.ts?tsr-directive-use-server="),ge=U(he,"usernameAlreadyexist"),ye=W(async e=>{try{console.log(e);const s=await G.query("SELECT phone_number FROM users WHERE phone_number=$1",[e]);return console.log(s.rows),s.rows.length>0?"already exist":"available"}catch(s){return console.error("Error checking phone:",s),`error:${s.message}`}},"src_routes_API_Auth_registration_phone_phoneAlreadyexist_ts--phoneAlreadyexist_action","C:/Users/Matteo/Desktop/Pulsix/src/routes/API/Auth/registration/phone/phoneAlreadyexist.ts?tsr-directive-use-server="),fe=U(ye,"phoneAlreadyexist"),ve=W(async e=>{try{console.log(e);const s=await G.query("SELECT email FROM users WHERE email=$1",[e]);return console.log(s.rows.length>0?"already exist":"available"),s.rows.length>0?"already exist":"available"}catch(s){return console.error("Error checking email:",s),`error:${s.message}`}},"src_routes_API_Auth_registration_email_emailAlreadyexist_ts--emailAlreadyexist_action","C:/Users/Matteo/Desktop/Pulsix/src/routes/API/Auth/registration/email/emailAlreadyexist.ts?tsr-directive-use-server="),be=U(ve,"emailAlreadyexist");var _e=["<input",' type="hidden"',">"],we=["<div",' class="','" style="','"><span class="dropdown-selected-text">',"</span><ul>","</ul></div>"],$e=["<li","><a>","</a></li>"],Z=["<li",">Nessuna opzione valida</li>"];function xe(e){const[s,P]=y(!1),[v,E]=y(e.initialValue),[b,M]=y(e.placeholder||"Select an option");te(()=>{const _=e.initialValue;if(_!==void 0&&e.values&&e.options){const g=e.values.findIndex(f=>f===_);g!==-1&&e.options[g]!==void 0?(M(e.options[g]),E(_)):(M(e.placeholder||"Select an option"),E(void 0))}else _===void 0&&(M(e.placeholder||"Select an option"),E(void 0))});const a=_=>{};return O(()=>{document.addEventListener("click",a)}),[m(_e,u(),n("value",t(v(),!0)??"",!1)+n("name",t(e.name,!0),!1)),m(we,u(),`dropdown  ${t(e.class,!0)??""} ${s()?"open":""} ${v()!==void 0?"filled":""}`,V(e.style),t(b()),e.options&&e.values&&e.options.length===e.values.length?t(i(se,{get each(){return e.options},children:(_,g)=>{const f=e.values[g()];return m($e,u()+n("class",v()===f?"active":"",!1),t(_))}})):Z[0]+u()+Z[1])]}const Ce="#BDBDBD",ke="_container_1tjo6_5",Ae="_control_1tjo6_13",Me="_input_1tjo6_28",Se="_trigger_1tjo6_46",Ee="_calendar_1tjo6_69",De="_viewControl_1tjo6_98",Ie="_navButton_1tjo6_107",Pe="_viewTrigger_1tjo6_108",Te="_table_1tjo6_163",je="_tableHeader_1tjo6_169",Ve="_tableCell_1tjo6_178",Oe="_cellTrigger_1tjo6_184",Le="_selected_1tjo6_200",Ne="_otherMonth_1tjo6_208",Fe="_monthGrid_1tjo6_216",He="_yearGrid_1tjo6_216",Be="_monthCell_1tjo6_229",ze="_yearCell_1tjo6_229",c={accentSecondaryColor:Ce,container:ke,control:Ae,input:Me,trigger:Se,calendar:Ee,viewControl:De,navButton:Ie,viewTrigger:Pe,table:Te,tableHeader:je,tableCell:Ve,cellTrigger:Oe,selected:Le,otherMonth:Ne,monthGrid:Fe,yearGrid:He,monthCell:Be,yearCell:ze};var Re=["<div",'><button type="button"',' aria-label="Previous month">&lt;</button><button type="button" class="','"><!--$-->',"<!--/--> <!--$-->",'<!--/--></button><button type="button"',' aria-label="Next month">&gt;</button></div>'],We=["<table","><thead><tr>","</tr></thead><tbody>","</tbody></table>"],Ge=["<div",'><button type="button"',">","</button></div>"],Q=["<div",">","</div>"],Ue=["<div",' class="','"><button type="button" class="','" aria-label="Previous years">&lt;</button><span class="','"><!--$-->',"<!--/--> - <!--$-->",'<!--/--></span><button type="button" class="','" aria-label="Next years">&gt;</button></div>'],qe=["<div","><!--$-->","<!--/--><!--$-->","<!--/--><!--$-->","<!--/--></div>"],Ye=["<div",' class="','"',"><div",'><input type="text"',' readonly aria-label="Selected date"><button type="button"',' aria-label="Open/Close calendar"><svg viewBox="0 0 24 24" width="16" height="16"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM9 10H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm-8 4H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z"></path></svg></button></div><!--$-->',"<!--/--></div>"],Je=["<th",">","</th>"],Ke=["<tr",">","</tr>"],Ze=["<td",'><button type="button" class="','" style="','" aria-label="','">',"</button></td>"],X=["<button",' type="button" class="','" aria-label="','">',"</button>"];function Qe(e){const[s,P]=y(e.initialValue||null),[v,E]=y(!1),[b,M]=y("day"),[a,_]=y(new Date().getMonth()),[g,f]=y(new Date().getFullYear()),x=d=>{};O(()=>{document.addEventListener("mousedown",x)}),oe(()=>{document.removeEventListener("mousedown",x)});const l=()=>{const d=g(),o=a(),C=new Date(d,o,1),k=new Date(d,o+1,0),L=C.getDay(),T=k.getDate(),N=[];let A=[];const re=new Date(d,o,0).getDate();for(let w=L-1;w>=0;w--)A.push({date:new Date(d,o-1,re-w),isCurrentMonth:!1});for(let w=1;w<=T;w++)A.length===7&&(N.push([...A]),A=[]),A.push({date:new Date(d,o,w),isCurrentMonth:!0});const ne=7-A.length;for(let w=1;w<=ne;w++)A.push({date:new Date(d,o+1,w),isCurrentMonth:!1});return A.length>0&&N.push([...A]),N},h=()=>{const d=g(),o=Math.floor(d/12)*12;return Array.from({length:12},(C,k)=>o+k)},S=d=>{if(!d)return"";const o=(d.getMonth()+1).toString().padStart(2,"0"),C=d.getDate().toString().padStart(2,"0"),k=d.getFullYear();return`${o}/${C}/${k}`},q=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],D=["January","February","March","April","May","June","July","August","September","October","November","December"],Y=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return m(Ye,u(),`${t(e.class,!0)} ${t(c.container,!0)}`,n("data-open",t(v(),!0),!1),n("class",t(c.control,!0),!1),n("class",t(c.input,!0),!1)+n("placeholder",t(e.placeholder,!0)||"mm/dd/yyyy",!1)+n("value",t(S(s()),!0),!1),n("class",t(c.trigger,!0),!1),t(i(I,{get when(){return v()},get children(){return m(qe,u()+n("class",t(c.calendar,!0),!1),t(i(I,{get when(){return b()==="day"},get children(){return[m(Re,u()+n("class",t(c.viewControl,!0),!1),n("class",t(c.navButton,!0),!1),`${t(c.viewTrigger,!0)}`,t(D[a()]),t(g()),n("class",t(c.navButton,!0),!1)),m(We,u()+n("class",t(c.table,!0),!1),t(i(F,{each:q,children:d=>m(Je,u()+n("class",t(c.tableHeader,!0),!1),t(d()))})),t(i(F,{get each(){return l()},children:d=>m(Ke,u(),t(i(F,{get each(){return d()},children:o=>{const C=o().date,k=o().isCurrentMonth,L=C.toDateString()===new Date().toDateString(),T=s()?.toDateString()===C.toDateString();return m(Ze,u()+n("class",t(c.tableCell,!0),!1),`${`text-[1.2em] ${t(c.cellTrigger,!0)}`||""} ${k&&T?t(t(c.selected,!0),!0):""} ${k?"":t(t(c.otherMonth,!0),!0)}`,V(k&&L&&!T?{color:c.accentSecondaryColor}:{}),`Select ${t(C.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),!0)}`,t(C.getDate()))}})))})))]}})),t(i(I,{get when(){return b()==="month"},get children(){return[m(Ge,u()+n("class",t(c.viewControl,!0),!1),n("class",t(c.viewTrigger,!0),!1),t(g())),m(Q,u()+n("class",t(c.monthGrid,!0),!1),t(Y.map((d,o)=>m(X,u(),`${` ${t(c.monthCell,!0)}`||""} ${a()===o?t(t(c.selected,!0),!0):""}`,`Select ${t(D[o],!0)}`,t(d)))))]}})),t(i(I,{get when(){return b()==="year"},get children(){return[m(Ue,u(),`${t(c.viewControl,!0)}`,`mt-[1vw] ${t(c.navButton,!0)}`,"mt-[1vw] text-[1.4em]",t(h()[0]),t(h()[11]),`mt-[1vw] ${t(c.navButton,!0)}`),m(Q,u()+n("class",t(c.yearGrid,!0),!1),t(h().map(d=>m(X,u(),`${t(c.yearCell,!0)||""} ${g()===d?t(t(c.selected,!0),!0):""}`,`Select year ${t(d,!0)}`,t(d)))))]}})))}})))}var Xe=["<input",' style="','" type="number">'],pe=["<input",' style="','" type="color"',">"],et=["<div",' class="input-container"><!--$-->',"<!--/--><!--$-->","<!--/--><!--$-->","<!--/--></div>"],tt=["<label",">","</label>"],at=["<div",' class="error-message" style="','">',"</div>"];const[p,ee]=y("");function mt(e){const s=B(ge),P=B(fe),v=B(be),[E,b]=y(!1),[M,a]=y(""),[_,g]=y(!1);O(()=>{e.required?(e.defaultError&&a(e.defaultError),e.mountOn!=!1&&r(e.name,!1)):r(e.name,!0)}),te(()=>{if(e.type==="password"&&R.passwordConfirm){const l=document.querySelector('[name="passwordConfirm"]');if(l&&l.value){const h=new Event("input",{bubbles:!0});l.dispatchEvent(h)}}});function f(l){g(!0);var h;if(e.type!="date"?(h=l.target.value,ee(h),J(e.name,h)):(h=l,ee(l),J(e.name,l)),console.log(e.name,p()),!e.required&&h===""){r(e.name,!0);return}if(e.ValidationSchema){const S=e.ValidationSchema(h);r(e.name,S);return}x(h)}async function x(l){if(!l&&e.required){r(e.name,!1),a("Provide");return}switch(console.log(z),e.type){case"text":l?(r(e.name,!0),a("")):(r(e.name,!1),a("Provide"));break;case"password":if(l.length<8){r(e.name,!1),a("At least 8 characters");return}if(!/[A-Z]/.test(l)){r(e.name,!1),a("At least one uppercase letter");return}if(!/[0-9]/.test(l)){r(e.name,!1),a("At least one number");return}r(e.name,!0),a("");break;case"passwordConfirm":if(l!==R.password){r(e.name,!1),a("Le password non corrispondono");return}if(l.length<8){r(e.name,!1),a("At least 8 characters");return}if(!/[A-Z]/.test(l)){r(e.name,!1),a("At least one uppercase letter");return}if(!/[0-9]/.test(l)){r(e.name,!1),a("At least one number");return}r(e.name,!0),a("");break;case"usernameLogin":try{console.log("Validating username:",l);const o=await s(l);console.log("Username check response:",o),o==="already exist"?(r(e.name,!0),a("")):o.startsWith("error:")?(r(e.name,!1),a(`Errore verifica username: ${o.split(":")[1]}`)):(r(e.name,!1),a("Username not found"))}catch(o){console.error("Error in username validation:",o),b(!1),r(e.name,!1),a("Errore generico di verifica")}break;case"username":try{console.log("Validating username:",l);const o=await s(l);console.log("Username check response:",o),o==="already exist"?(r(e.name,!1),e.type=="username"?a("Username already exist"):a("")):o.startsWith("error:")?(r(e.name,!1),a(`Errore verifica username: ${o.split(":")[1]}`)):(r(e.name,!0),a("Username avaible"))}catch(o){console.error("Error in username validation:",o),b(!1),r(e.name,!1),a("Errore generico di verifica")}break;case"phoneNumber":const h=l.replace(/[\s-]/g,"");if(!/^\d+$/.test(h)){r(e.name,!1),a("Phone number must contain only digits");return}if(h.length<7||h.length>10){r(e.name,!1),a("Invalid phone number length");return}if(h.startsWith("0")){r(e.name,!1),a("Phone number should not start with unnecessary zeros");return}const S=await P(l);if(S==="already exist"){r(e.name,!1),a("Phone number already associated to another account");return}else if(S.startsWith("error:")){r(e.name,!1),a(`Errore verifica phone: ${S.split(":")[1]}`);return}else r(e.name,!0),a("");r(e.name,!0),a("");break;case"email":if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l))a("");else{r(e.name,!1),a("Inserisci un indirizzo email valido");return}const D=await v(l);if(console.log(D),D==="already exist"){r(e.name,!1),a("Email already associated to another account");return}else if(D.startsWith("error:")){r(e.name,!1),a(`Errore verifica phone: ${D.split(":")[1]}`);return}else r(e.name,!0),a("");break;case"number":!isNaN(Number(l))?(r(e.name,!0),a("")):(r(e.name,!1),a("Inserisci un numero valido"));break;case"select":l?(r(e.name,!0),a("")):(r(e.name,!1),a("Select something"));break;case"date":!isNaN(Date.parse(l))?(r(e.name,!0),a("")):(r(e.name,!1),a("Inserisci una data valida"));break}}return m(et,u(),e.label&&m(tt,u()+n("for",t(e.name,!0),!1),t(e.label)),t(i(ie,{get children(){return[i($,{get when(){return e.type==="select"},get children(){return i(xe,{get name(){return e.name},onInput:f,get options(){return e.options},get values(){return e.values},get class(){return e.class},get style(){return e.style},get placeholder(){return e.placeholder},get initialValue(){return e.defaultValue}})}}),i($,{get when(){return e.type==="date"},get children(){return i(Qe,{get name(){return e.name},onInput:f,get class(){return e.class},get style(){return e.style},get placeholder(){return e.placeholder},get initialValue(){return e.defaultValue}})}}),i($,{get when(){return e.type==="password"},get children(){return i(K,{get name(){return e.name},get placeholder(){return e.placeholder},get class(){return e.class},get style(){return e.style},type:"password",onInput:f,get initialValue(){return e.defaultValue}})}}),i($,{get when(){return e.type==="passwordConfirm"},get children(){return i(K,{get name(){return e.name},get placeholder(){return e.placeholder},get class(){return e.class},get style(){return e.style},type:"password",onInput:f})}}),i($,{get when(){return e.type==="username"||e.type==="usernameLogin"},get children(){return i(j,{get name(){return e.name},get placeholder(){return e.placeholder},get class(){return e.class},get style(){return e.style},type:"text",onInput:f})}}),i($,{get when(){return e.type==="text"},get children(){return i(j,{get name(){return e.name},get placeholder(){return e.placeholder},get class(){return e.class},get style(){return e.style},type:"text",onInput:f,get initialValue(){return e.defaultValue}})}}),i($,{get when(){return e.type==="phoneNumber"},get children(){return i(j,{get name(){return e.name},get placeholder(){return e.placeholder},get class(){return e.class},get style(){return e.style},type:"text",onInput:f})}}),i($,{get when(){return e.type==="email"},get children(){return i(j,{get name(){return e.name},get placeholder(){return e.placeholder},get class(){return e.class},get style(){return e.style},type:"text",onInput:f,get initialValue(){return p()}})}}),i($,{get when(){return e.type==="number"},get children(){return m(Xe,u()+n("name",t(e.name,!0),!1)+n("placeholder",t(e.placeholder,!0),!1)+n("class",t(e.class,!0),!1),V(e.style))}}),i($,{get when(){return e.type==="color"},get children(){return m(pe,u()+n("name",t(e.name,!0),!1)+n("placeholder",t(e.placeholder,!0),!1)+n("class",t(e.class,!0),!1),V(e.style),n("value",t(e.defaultValue,!0),!1))}})]}})),_()&&M()||e.defaultError?m(at,u(),"color:var(--Secondary)",t(M())):t(null))}export{mt as I,r as S,ut as a,J as b,dt as g};
